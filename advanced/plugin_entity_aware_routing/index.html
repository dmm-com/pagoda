<!doctype html><html lang=en><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="Entity-Aware Routing"><title>Entity-Aware Routing | Pagoda</title><link rel=icon href=https://dmm-com.github.io/pagoda/favicon/favicon-32x32.png type=image/x-icon><link rel=preload as=font href=https://dmm-com.github.io/pagoda/fonts/Metropolis.woff2 type=font/woff2 crossorigin=anonymous><link rel=preload as=font href=https://dmm-com.github.io/pagoda/fonts/LiberationSans.woff2 type=font/woff2 crossorigin=anonymous><link rel=preload as=font href=https://dmm-com.github.io/pagoda/fonts/LiberationSans-Bold.woff2 type=font/woff2 crossorigin=anonymous><link rel=preload as=font href=https://dmm-com.github.io/pagoda/fonts/LiberationSans-BoldItalic.woff2 type=font/woff2 crossorigin=anonymous><link rel=preload as=font href=https://dmm-com.github.io/pagoda/fonts/LiberationSans-Italic.woff2 type=font/woff2 crossorigin=anonymous><link rel=preload as=font href=https://dmm-com.github.io/pagoda/fonts/LiberationMono.woff2 type=font/woff2 crossorigin=anonymous><link rel=preload as=font href=https://dmm-com.github.io/pagoda/fonts/DroidSans.woff2 type=font/woff2 crossorigin=anonymous><link rel=preload as=font href=https://dmm-com.github.io/pagoda/fonts/GeekdocIcons.woff2 type=font/woff2 crossorigin=anonymous><link rel=preload href=https://dmm-com.github.io/pagoda/main.min.css as=style><link rel=stylesheet href=https://dmm-com.github.io/pagoda/main.min.css media=all><link rel=preload href=https://dmm-com.github.io/pagoda/mobile.min.css as=style><link rel=stylesheet href=https://dmm-com.github.io/pagoda/mobile.min.css media="screen and (max-width: 45rem)"><link rel=preload href=https://dmm-com.github.io/pagoda/print.min.css as=style><link rel=stylesheet href=https://dmm-com.github.io/pagoda/print.min.css media=print><link rel=preload href=https://dmm-com.github.io/pagoda/custom.css as=style><link rel=stylesheet href=https://dmm-com.github.io/pagoda/custom.css media=all></head><body><svg style="position:absolute;width:0;height:0;overflow:hidden" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><symbol viewBox="-2.67 -2.67 29.33 29.33" id="arrow_back" xmlns="http://www.w3.org/2000/svg"><path d="M24 10.526v2.947H5.755l8.351 8.421-2.105 2.105-12-12 12-12 2.105 2.105-8.351 8.421H24z"/></symbol><symbol viewBox="-2.67 -2.67 29.33 29.33" id="arrow_left_alt" xmlns="http://www.w3.org/2000/svg"><path d="M5.965 10.526V6.035L0 12l5.965 5.965v-4.491H24v-2.947H5.965z"/></symbol><symbol viewBox="-2.67 -2.67 29.33 29.33" id="arrow_right_alt" xmlns="http://www.w3.org/2000/svg"><path d="M18.035 10.526V6.035L24 12l-5.965 5.965v-4.491H0v-2.947h18.035z"/></symbol><symbol viewBox="-2.67 -2.67 29.33 29.33" id="bookmark" xmlns="http://www.w3.org/2000/svg"><path d="M15.268 4.392q.868.0 1.532.638t.664 1.506v17.463l-7.659-3.268-7.608 3.268V6.536q0-.868.664-1.506t1.532-.638h10.876zm4.34 14.144V4.392q0-.868-.638-1.532t-1.506-.664H6.537q0-.868.664-1.532T8.733.0h10.876q.868.0 1.532.664t.664 1.532v17.412z"/></symbol><symbol viewBox="-2.67 -2.67 33.33 33.33" id="code" xmlns="http://www.w3.org/2000/svg"><path d="M9.917 24.5a1.75 1.75.0 10-3.501.001 1.75 1.75.0 003.501-.001zm0-21a1.75 1.75.0 10-3.501.001A1.75 1.75.0 009.917 3.5zm11.666 2.333a1.75 1.75.0 10-3.501.001 1.75 1.75.0 003.501-.001zm1.75.0a3.502 3.502.0 01-1.75 3.026c-.055 6.581-4.721 8.039-7.82 9.023-2.898.911-3.846 1.349-3.846 3.117v.474a3.502 3.502.0 011.75 3.026c0 1.932-1.568 3.5-3.5 3.5s-3.5-1.568-3.5-3.5c0-1.294.711-2.424 1.75-3.026V6.526A3.502 3.502.0 014.667 3.5c0-1.932 1.568-3.5 3.5-3.5s3.5 1.568 3.5 3.5a3.502 3.502.0 01-1.75 3.026v9.06c.93-.456 1.914-.766 2.807-1.039 3.391-1.075 5.323-1.878 5.359-5.687a3.502 3.502.0 01-1.75-3.026c0-1.932 1.568-3.5 3.5-3.5s3.5 1.568 3.5 3.5z"/></symbol><symbol viewBox="-2.67 -2.67 37.33 37.33" id="date" xmlns="http://www.w3.org/2000/svg"><path d="M27.192 28.844V11.192H4.808v17.652h22.384zm0-25.689q1.277.0 2.253.976t.976 2.253v22.459q0 1.277-.976 2.216t-2.253.939H4.808q-1.352.0-2.291-.901t-.939-2.253V6.385q0-1.277.939-2.253t2.291-.976h1.577V.001h3.23v3.155h12.769V.001h3.23v3.155h1.577zm-3.155 11.267v3.155h-3.23v-3.155h3.23zm-6.46.0v3.155h-3.155v-3.155h3.155zm-6.384.0v3.155h-3.23v-3.155h3.23z"/></symbol><symbol viewBox="-2.67 -2.67 37.33 37.33" id="download" xmlns="http://www.w3.org/2000/svg"><path d="M2.866 28.209h26.269v3.79H2.866v-3.79zm26.268-16.925L16 24.418 2.866 11.284h7.493V.001h11.283v11.283h7.493z"/></symbol><symbol viewBox="-2.67 -2.67 37.33 37.33" id="email" xmlns="http://www.w3.org/2000/svg"><path d="M28.845 9.615v-3.23L16 14.422 3.155 6.385v3.23L16 17.577zm0-6.46q1.277.0 2.216.977T32 6.385v19.23q0 1.277-.939 2.253t-2.216.977H3.155q-1.277.0-2.216-.977T0 25.615V6.385q0-1.277.939-2.253t2.216-.977h25.69z"/></symbol><symbol viewBox="-2.67 -2.67 37.33 37.33" id="github" xmlns="http://www.w3.org/2000/svg"><path d="M16 .394c8.833.0 15.999 7.166 15.999 15.999.0 7.062-4.583 13.062-10.937 15.187-.813.146-1.104-.354-1.104-.771.0-.521.021-2.25.021-4.396.0-1.5-.5-2.458-1.083-2.958 3.562-.396 7.312-1.75 7.312-7.896.0-1.75-.625-3.167-1.646-4.291.167-.417.708-2.042-.167-4.25-1.333-.417-4.396 1.646-4.396 1.646a15.032 15.032.0 00-8 0S8.937 6.602 7.603 7.018c-.875 2.208-.333 3.833-.167 4.25-1.021 1.125-1.646 2.542-1.646 4.291.0 6.125 3.729 7.5 7.291 7.896-.458.417-.875 1.125-1.021 2.146-.917.417-3.25 1.125-4.646-1.333-.875-1.521-2.458-1.646-2.458-1.646-1.562-.021-.104.979-.104.979 1.042.479 1.771 2.333 1.771 2.333.938 2.854 5.396 1.896 5.396 1.896.0 1.333.021 2.583.021 2.979.0.417-.292.917-1.104.771C4.582 29.455-.001 23.455-.001 16.393-.001 7.56 7.165.394 15.998.394zM6.063 23.372c.042-.083-.021-.187-.146-.25-.125-.042-.229-.021-.271.042-.042.083.021.187.146.25.104.062.229.042.271-.042zm.646.709c.083-.062.062-.208-.042-.333-.104-.104-.25-.146-.333-.062-.083.062-.062.208.042.333.104.104.25.146.333.062zm.625.937c.104-.083.104-.25.0-.396-.083-.146-.25-.208-.354-.125-.104.062-.104.229.0.375s.271.208.354.146zm.875.875c.083-.083.042-.271-.083-.396-.146-.146-.333-.167-.417-.062-.104.083-.062.271.083.396.146.146.333.167.417.062zm1.187.521c.042-.125-.083-.271-.271-.333-.167-.042-.354.021-.396.146s.083.271.271.312c.167.062.354.0.396-.125zm1.313.104c0-.146-.167-.25-.354-.229-.187.0-.333.104-.333.229.0.146.146.25.354.229.187.0.333-.104.333-.229zm1.208-.208c-.021-.125-.187-.208-.375-.187-.187.042-.312.167-.292.312.021.125.187.208.375.167s.312-.167.292-.292z"/></symbol><symbol viewBox="-2.67 -2.67 37.33 37.33" id="heart" xmlns="http://www.w3.org/2000/svg"><path d="M16 29.714a1.11 1.11.0 01-.786-.321L4.072 18.643c-.143-.125-4.071-3.714-4.071-8 0-5.232 3.196-8.357 8.535-8.357 3.125.0 6.053 2.464 7.464 3.857 1.411-1.393 4.339-3.857 7.464-3.857 5.339.0 8.535 3.125 8.535 8.357.0 4.286-3.928 7.875-4.089 8.035L16.785 29.392c-.214.214-.5.321-.786.321z"/></symbol><symbol viewBox="-2.67 -2.67 33.33 33.33" id="keyborad_arrow_down" xmlns="http://www.w3.org/2000/svg"><path d="M3.281 5.36 14 16.079 24.719 5.36 28 8.641l-14 14-14-14z"/></symbol><symbol viewBox="-2.67 -2.67 37.33 37.33" id="keyborad_arrow_left" xmlns="http://www.w3.org/2000/svg"><path d="M25.875 28.25 22.125 32 6.126 16.001 22.125.002l3.75 3.75-12.25 12.25z"/></symbol><symbol viewBox="-2.67 -2.67 37.33 37.33" id="keyborad_arrow_right" xmlns="http://www.w3.org/2000/svg"><path d="M6.125 28.25 18.375 16 6.125 3.75 9.875.0l15.999 15.999L9.875 31.998z"/></symbol><symbol viewBox="-2.67 -2.67 37.33 37.33" id="link" xmlns="http://www.w3.org/2000/svg"><path d="M24.037 7.963q3.305.0 5.634 2.366T32 16t-2.329 5.671-5.634 2.366h-6.46v-3.08h6.46q2.028.0 3.493-1.465t1.465-3.493-1.465-3.493-3.493-1.465h-6.46v-3.08h6.46zM9.615 17.578v-3.155h12.77v3.155H9.615zM3.005 16q0 2.028 1.465 3.493t3.493 1.465h6.46v3.08h-6.46q-3.305.0-5.634-2.366T0 16.001t2.329-5.671 5.634-2.366h6.46v3.08h-6.46q-2.028.0-3.493 1.465t-1.465 3.493z"/></symbol><symbol viewBox="-2.67 -2.67 37.33 37.33" id="menu" xmlns="http://www.w3.org/2000/svg"><path d="M.001 5.334h31.998v3.583H.001V5.334zm0 12.416v-3.5h31.998v3.5H.001zm0 8.916v-3.583h31.998v3.583H.001z"/></symbol><symbol viewBox="-2.67 -2.67 33.33 33.33" id="notification" xmlns="http://www.w3.org/2000/svg"><path d="M22.615 19.384l2.894 2.894v1.413H2.49v-1.413l2.894-2.894V12.25q0-3.365 1.716-5.856t4.745-3.231v-1.01q0-.875.606-1.514T13.999.0t1.548.639.606 1.514v1.01q3.029.74 4.745 3.231t1.716 5.856v7.134zM14 27.999q-1.211.0-2.053-.808t-.841-2.019h5.788q0 1.144-.875 1.986T14 27.999z"/></symbol><symbol viewBox="-2.67 -2.67 33.33 33.33" id="path" xmlns="http://www.w3.org/2000/svg"><path d="M28 12.62h-9.793V8.414h-2.826v11.173h2.826v-4.206H28V26.62h-9.793v-4.206H12.62v-14H9.794v4.206H.001V1.381h9.793v4.206h8.413V1.381H28V12.62z"/></symbol><symbol viewBox="-2.67 -2.67 37.33 37.33" id="person" xmlns="http://www.w3.org/2000/svg"><path d="M16 20.023q5.052.0 10.526 2.199t5.473 5.754v4.023H0v-4.023q0-3.555 5.473-5.754t10.526-2.199zM16 16q-3.275.0-5.614-2.339T8.047 8.047t2.339-5.661T16 0t5.614 2.386 2.339 5.661-2.339 5.614T16 16z"/></symbol><symbol viewBox="-2.67 -2.67 37.33 37.33" id="search" xmlns="http://www.w3.org/2000/svg"><path d="M11.925 20.161q3.432.0 5.834-2.402t2.402-5.834-2.402-5.834-5.834-2.402-5.834 2.402-2.402 5.834 2.402 5.834 5.834 2.402zm10.981.0L32 29.255 29.255 32l-9.094-9.094v-1.458l-.515-.515q-3.26 2.831-7.721 2.831-4.976.0-8.45-3.432T.001 11.925t3.474-8.45 8.45-3.474 8.407 3.474 3.432 8.45q0 1.802-.858 4.075t-1.973 3.646l.515.515h1.458z"/></symbol><symbol viewBox="-2.67 -2.67 33.33 33.33" id="shield" xmlns="http://www.w3.org/2000/svg"><path d="M22.167 15.166V3.5h-8.166v20.726c.93-.492 2.424-1.349 3.883-2.497 1.95-1.531 4.284-3.919 4.284-6.562zm3.499-13.999v14c0 7.674-10.737 12.523-11.192 12.724-.146.073-.31.109-.474.109s-.328-.036-.474-.109c-.456-.201-11.192-5.049-11.192-12.724v-14C2.334.529 2.863.0 3.501.0H24.5c.638.0 1.167.529 1.167 1.167z"/></symbol><symbol viewBox="-2.67 -2.67 33.33 33.33" id="tags" xmlns="http://www.w3.org/2000/svg"><path d="M6.606 7.549c0-1.047-.84-1.887-1.887-1.887s-1.887.84-1.887 1.887.84 1.887 1.887 1.887 1.887-.84 1.887-1.887zm15.732 8.493c0 .501-.206.988-.546 1.327l-7.239 7.254c-.354.339-.84.546-1.342.546s-.988-.206-1.327-.546L1.342 14.066C.59 13.329.0 11.899.0 10.852V4.718a1.9 1.9.0 011.887-1.887h6.134c1.047.0 2.477.59 3.229 1.342L21.792 14.7c.339.354.546.84.546 1.342zm5.661.0c0 .501-.206.988-.546 1.327l-7.239 7.254c-.354.339-.84.546-1.342.546-.767.0-1.15-.354-1.651-.87l6.93-6.93c.339-.339.546-.826.546-1.327s-.206-.988-.546-1.342L13.609 4.173c-.752-.752-2.182-1.342-3.229-1.342h3.303c1.047.0 2.477.59 3.229 1.342L27.454 14.7c.339.354.546.84.546 1.342z"/></symbol><symbol viewBox="-2.67 -2.67 37.33 37.33" id="telescope" xmlns="http://www.w3.org/2000/svg"><path d="M25.026 3.335a.466.466.0 00-.646-.238L13.362 8.91a.463.463.0 00-.216.575l.227.593-6.36 3.488a.462.462.0 00-.205.583l.211.508-6.755 3.228a.463.463.0 00-.228.595l1.386 3.341a.463.463.0 00.583.259l7.056-2.5.211.508a.462.462.0 00.557.267l6.733-1.941.202.527a.46.46.0 00.566.277l12.03-3.702a.46.46.0 00.293-.613L25.026 3.335zM2.109 21.061l-1.049-2.53 6.314-3.018 1.332 3.211-6.596 2.337zm7.857-1.708-.22-.531-1.706-4.113-.22-.53 5.863-3.216 2.197 5.676.347.908-6.261 1.806zm7.505-1.146-.188-.491c-.003-.01-.001-.022-.006-.032l-.572-1.478-2.549-6.668 10.201-5.381 4.249 10.624-11.136 3.428zm8.943-16.723a.463.463.0 00-.86.344l5.552 13.881a.464.464.0 00.602.258.464.464.0 00.258-.602L26.413 1.484zM16.268 20.627h-2.776c-1.055.0-1.851.796-1.851 1.851v1.217l-5.44 6.347a.462.462.0 10.702.602l5.415-6.316h2.101v6.015a.463.463.0 00.926.0v-6.015h2.101l5.414 6.316a.462.462.0 10.703-.602l-5.44-6.347v-1.148c0-1.076-.813-1.92-1.851-1.92zm.925 2.777h-4.627v-.925c0-.545.38-.925.925-.925h2.776c.527.0.925.428.925.995v.856z"/></symbol></svg><div class=wrapper><input type=checkbox class=hidden id=menu-control><header class=gdoc-header><div class="container flex align-center justify-between"><label for=menu-control class=gdoc-nav__control><svg class="icon menu"><use xlink:href="#menu"/></svg><svg class="icon arrow-back"><use xlink:href="#arrow_back"/></svg></label><a class=gdoc-header__link href=https://dmm-com.github.io/pagoda/><span class="gdoc-brand flex align-center"><img class=gdoc-brand__img src=https://dmm-com.github.io/pagoda/media/logo.png alt width=38 height=38>
Pagoda</span></a></div></header><main class="container flex flex-even"><aside class=gdoc-nav><nav><div class=gdoc-search><svg class="icon search"><use xlink:href="#search"/></svg><input type=text id=gdoc-search-input class=gdoc-search__input placeholder=Search... aria-label=Search maxlength=64><div class="gdoc-search__spinner spinner hidden"></div><ul id=gdoc-search-results class=gdoc-search__list></ul></div><section class=gdoc-nav--main><h2>Navigation</h2><ul class=gdoc-nav__list><li><span class=flex>Getting Started</span><ul class=gdoc-nav__list><li><span class=flex><a href=https://dmm-com.github.io/pagoda/getting_started/overview/ class=gdoc-nav__entry>Pagoda Overview</a></span></li><li><span class=flex><a href=https://dmm-com.github.io/pagoda/getting_started/installation/ class=gdoc-nav__entry>Installation and Configuration</a></span></li><li><span class=flex><a href=https://dmm-com.github.io/pagoda/getting_started/tutorial/ class=gdoc-nav__entry>Tutorial</a></span></li><li><span class=flex><a href=https://dmm-com.github.io/pagoda/getting_started/development/ class=gdoc-nav__entry>Development</a></span></li><li><span class=flex><a href=https://dmm-com.github.io/pagoda/getting_started/teckstack/ class=gdoc-nav__entry>Tech Stack</a></span></li></ul></li><li><span class=flex><a href=https://dmm-com.github.io/pagoda/advanced/ class=gdoc-nav__entry>Advanced Topics</a></span><ul class=gdoc-nav__list><li><span class=flex><a href=https://dmm-com.github.io/pagoda/advanced/advanced_search/ class=gdoc-nav__entry>Advanced Search</a></span></li><li><span class=flex><a href=https://dmm-com.github.io/pagoda/advanced/categories/ class=gdoc-nav__entry>Categories</a></span></li><li><span class=flex><a href=https://dmm-com.github.io/pagoda/advanced/frontend_architecture/ class=gdoc-nav__entry>Frontend Architecture</a></span></li><li><span class=flex><a href=https://dmm-com.github.io/pagoda/advanced/google_spreadsheet_linkage/ class=gdoc-nav__entry>Google Spreadsheet Linkage</a></span></li><li><span class=flex><a href=https://dmm-com.github.io/pagoda/advanced/custom_view/ class=gdoc-nav__entry>CustomView</a></span></li><li><span class=flex><a href=https://dmm-com.github.io/pagoda/advanced/plugin_system/ class=gdoc-nav__entry>Plugin System</a></span></li><li><span class=flex><a href=https://dmm-com.github.io/pagoda/advanced/plugin_architecture_diagrams/ class=gdoc-nav__entry>Plugin System Architecture Diagrams</a></span></li><li><span class=flex><a href=https://dmm-com.github.io/pagoda/advanced/plugin_entity_aware_routing/ class="gdoc-nav__entry is-active">Entity-Aware Routing</a></span></li><li><span class=flex><a href=https://dmm-com.github.io/pagoda/advanced/plugin_quickstart_guide/ class=gdoc-nav__entry>Plugin Development Quick Start Guide</a></span></li><li><span class=flex><a href=https://dmm-com.github.io/pagoda/advanced/frontend_plugin_development/ class=gdoc-nav__entry>Frontend Plugin Development</a></span></li></ul></li><li><span class=flex>Release Notes</span><ul class=gdoc-nav__list><li><span class=flex><a href=https://dmm-com.github.io/pagoda/release_note/CHANGELOG/ class=gdoc-nav__entry>Changelog</a></span></li></ul></li></ul></section><section class=gdoc-nav--more><h2>More</h2><ul class=gdoc-nav__list><li><span class=flex><svg class="icon notification"><use xlink:href="#notification"/></svg><a href=https://dmm-com.github.io/pagoda/posts/ class=gdoc-nav__entry>News</a></span></li><li><span class=flex><svg class="icon download"><use xlink:href="#download"/></svg><a href=https://github.com/dmm-com/pagoda/releases class=gdoc-nav__entry>Releases</a></span></li><li><span class=flex><svg class="icon github"><use xlink:href="#github"/></svg><a href=https://github.com/dmm-com/pagoda class=gdoc-nav__entry>View Source</a></span></li></ul></section></nav></aside><div class=gdoc-page><div class="gdoc-page__header flex flex-wrap justify-between hidden-mobile" itemscope itemtype=http://data-vocabulary.org/Breadcrumb><span><span class=breadcrumb><svg class="icon path"><use xlink:href="#path"/></svg><a href=https://dmm-com.github.io/pagoda/>Pagoda</a> / <a href=https://dmm-com.github.io/pagoda/advanced/>Advanced Topics</a> / Entity-Aware Routing</span></span>
<span></span></div><article class=gdoc-markdown><h1>Entity-Aware Routing</h1><div class=gdoc-page__anchorwrap><h2 id=overview>Overview<a data-clipboard-text=https://dmm-com.github.io/pagoda/advanced/plugin_entity_aware_routing/#overview class="gdoc-page__anchor gdoc-page__anchor--right clip" aria-label="Anchor Overview" href=#overview><svg class="icon link"><use xlink:href="#link"/></svg></a></h2></div><p>Entity-Aware Routing enables <strong>entity-specific UI customization</strong> through the frontend plugin system. This feature allows administrators to configure custom plugin views for specific entities, replacing default Pagoda pages with plugin-provided alternatives.</p><div class=gdoc-page__anchorwrap><h3 id=key-benefits>Key Benefits<a data-clipboard-text=https://dmm-com.github.io/pagoda/advanced/plugin_entity_aware_routing/#key-benefits class="gdoc-page__anchor gdoc-page__anchor--right clip" aria-label="Anchor Key Benefits" href=#key-benefits><svg class="icon link"><use xlink:href="#link"/></svg></a></h3></div><ul><li><strong>Entity-Specific UX</strong>: Different entities can have completely different UI experiences</li><li><strong>Plugin-Based Customization</strong>: Leverage the plugin ecosystem for UI extensions</li><li><strong>Zero-Code Configuration</strong>: Switch views via Django settings, no code changes required</li><li><strong>Graceful Fallback</strong>: Missing plugins or pages automatically fall back to defaults</li></ul><div class=gdoc-page__anchorwrap><h3 id=current-scope-phase-1>Current Scope (Phase 1)<a data-clipboard-text=https://dmm-com.github.io/pagoda/advanced/plugin_entity_aware_routing/#current-scope-phase-1 class="gdoc-page__anchor gdoc-page__anchor--right clip" aria-label="Anchor Current Scope (Phase 1)" href=#current-scope-phase-1><svg class="icon link"><use xlink:href="#link"/></svg></a></h3></div><p>Phase 1 supports:</p><ul><li><strong>Page Type</strong>: <code>entry.list</code> (Entity entries listing page)</li><li><strong>URL Pattern</strong>: <code>/ui/entities/:entityId/entries</code></li></ul><p>Future phases may extend to additional page types such as <code>entry.detail</code>, <code>entry.edit</code>, etc.</p><div class=gdoc-page__anchorwrap><h2 id=architecture>Architecture<a data-clipboard-text=https://dmm-com.github.io/pagoda/advanced/plugin_entity_aware_routing/#architecture class="gdoc-page__anchor gdoc-page__anchor--right clip" aria-label="Anchor Architecture" href=#architecture><svg class="icon link"><use xlink:href="#link"/></svg></a></h2></div><div class=gdoc-page__anchorwrap><h3 id=system-overview>System Overview<a data-clipboard-text=https://dmm-com.github.io/pagoda/advanced/plugin_entity_aware_routing/#system-overview class="gdoc-page__anchor gdoc-page__anchor--right clip" aria-label="Anchor System Overview" href=#system-overview><svg class="icon link"><use xlink:href="#link"/></svg></a></h3></div><pre tabindex=0><code class=language-mermaid data-lang=mermaid>graph TB
    subgraph &#34;Django Backend&#34;
        SETTINGS[settings_common.py&lt;br/&gt;ENTITY_PLUGIN_VIEWS]
        TEMPLATE[index.html Template]
        CONTEXT[django_context&lt;br/&gt;window.django_context]
    end

    subgraph &#34;React Frontend&#34;
        SERVERCTX[ServerContext]
        HOOK[usePluginMappings Hook]
        ROUTER[EntityAwareRoute]
        PLUGINMAP[pluginMap&lt;br/&gt;Map&amp;lt;string, Plugin&amp;gt;]
    end

    subgraph &#34;Plugin Layer&#34;
        PLUGIN[Entity View Plugin]
        PAGES[entityPages&lt;br/&gt;entry.list Component]
    end

    subgraph &#34;UI Output&#34;
        DEFAULT[Default EntryListPage]
        CUSTOM[Plugin Custom Page]
    end

    SETTINGS --&gt; TEMPLATE
    TEMPLATE --&gt; CONTEXT
    CONTEXT --&gt; SERVERCTX
    SERVERCTX --&gt; HOOK
    HOOK --&gt; ROUTER
    PLUGINMAP --&gt; ROUTER

    PLUGIN --&gt; PAGES
    PAGES --&gt; ROUTER

    ROUTER --&gt;|No mapping| DEFAULT
    ROUTER --&gt;|Has mapping| CUSTOM

    style SETTINGS fill:#e8f5e8
    style ROUTER fill:#e1f5fe
    style PLUGIN fill:#f3e5f5
</code></pre><div class=gdoc-page__anchorwrap><h3 id=data-flow>Data Flow<a data-clipboard-text=https://dmm-com.github.io/pagoda/advanced/plugin_entity_aware_routing/#data-flow class="gdoc-page__anchor gdoc-page__anchor--right clip" aria-label="Anchor Data Flow" href=#data-flow><svg class="icon link"><use xlink:href="#link"/></svg></a></h3></div><pre tabindex=0><code class=language-mermaid data-lang=mermaid>sequenceDiagram
    participant Admin as Administrator
    participant Django as Django Settings
    participant Template as HTML Template
    participant React as React App
    participant Router as EntityAwareRoute
    participant Plugin as Plugin Component

    Note over Admin,Django: Configuration Phase
    Admin-&gt;&gt;Django: Set ENTITY_PLUGIN_VIEWS&lt;br/&gt;{&#34;9681&#34;: {&#34;plugin&#34;: &#34;sample&#34;, &#34;pages&#34;: [&#34;entry.list&#34;]}}

    Note over Template,React: Page Load Phase
    Django-&gt;&gt;Template: Render index.html
    Template-&gt;&gt;React: window.django_context.entityPluginViews

    Note over React,Plugin: Routing Phase
    React-&gt;&gt;Router: Navigate to /ui/entities/9681/entries
    Router-&gt;&gt;Router: Extract entityId from URL
    Router-&gt;&gt;Router: Lookup config[entityId] (O(1))
    Router-&gt;&gt;Router: Check if &#34;entry.list&#34; in pages
    Router-&gt;&gt;Router: Lookup pluginMap.get(&#34;sample&#34;) (O(1))
    Router-&gt;&gt;Plugin: Render plugin.entityPages[&#34;entry.list&#34;]
    Plugin--&gt;&gt;React: Custom Entry List UI
</code></pre><div class=gdoc-page__anchorwrap><h3 id=component-relationships>Component Relationships<a data-clipboard-text=https://dmm-com.github.io/pagoda/advanced/plugin_entity_aware_routing/#component-relationships class="gdoc-page__anchor gdoc-page__anchor--right clip" aria-label="Anchor Component Relationships" href=#component-relationships><svg class="icon link"><use xlink:href="#link"/></svg></a></h3></div><pre tabindex=0><code class=language-mermaid data-lang=mermaid>graph LR
    subgraph &#34;App Initialization&#34;
        APP[AppBase]
        PLUGINS[plugins: Plugin[]]
        MAP[pluginMap: Map]
    end

    subgraph &#34;Routing Layer&#34;
        APPROUTER[AppRouter]
        ROUTE[EntityAwareRoute]
    end

    subgraph &#34;Data Sources&#34;
        CTX[ServerContext]
        HOOK[usePluginMappings]
        CONFIG[EntityPluginViewsConfig]
    end

    subgraph &#34;Resolution&#34;
        LOOKUP_ID[config&amp;lsqb;entityId&amp;rsqb;]
        LOOKUP_PLUGIN[pluginMap.get&amp;lpar;pluginId&amp;rpar;]
        COMPONENT[PluginComponent]
    end

    APP --&gt; PLUGINS
    PLUGINS --&gt;|useMemo| MAP
    APP --&gt; APPROUTER
    APPROUTER --&gt; ROUTE
    MAP --&gt; ROUTE

    CTX --&gt; HOOK
    HOOK --&gt; CONFIG
    CONFIG --&gt; ROUTE

    ROUTE --&gt; LOOKUP_ID
    LOOKUP_ID --&gt; LOOKUP_PLUGIN
    LOOKUP_PLUGIN --&gt; COMPONENT

    style APP fill:#e1f5fe
    style ROUTE fill:#f3e5f5
    style COMPONENT fill:#e8f5e8
</code></pre><div class=gdoc-page__anchorwrap><h2 id=configuration>Configuration<a data-clipboard-text=https://dmm-com.github.io/pagoda/advanced/plugin_entity_aware_routing/#configuration class="gdoc-page__anchor gdoc-page__anchor--right clip" aria-label="Anchor Configuration" href=#configuration><svg class="icon link"><use xlink:href="#link"/></svg></a></h2></div><div class=gdoc-page__anchorwrap><h3 id=django-settings>Django Settings<a data-clipboard-text=https://dmm-com.github.io/pagoda/advanced/plugin_entity_aware_routing/#django-settings class="gdoc-page__anchor gdoc-page__anchor--right clip" aria-label="Anchor Django Settings" href=#django-settings><svg class="icon link"><use xlink:href="#link"/></svg></a></h3></div><p>Configure entity-plugin mappings in <code>settings_common.py</code> or via environment variable:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=c1># airone/settings_common.py</span>
</span></span><span class=line><span class=cl><span class=n>AIRONE</span> <span class=o>=</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=c1># ... other settings ...</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=c1># Frontend plugin entity override configuration</span>
</span></span><span class=line><span class=cl>    <span class=c1># Format: { &#34;entityId&#34;: { &#34;plugin&#34;: &#34;plugin-id&#34;, &#34;pages&#34;: [&#34;entry.list&#34;] } }</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;FRONTEND_PLUGIN_ENTITY_OVERRIDES&#34;</span><span class=p>:</span> <span class=n>json</span><span class=o>.</span><span class=n>loads</span><span class=p>(</span>
</span></span><span class=line><span class=cl>        <span class=n>env</span><span class=o>.</span><span class=n>str</span><span class=p>(</span>
</span></span><span class=line><span class=cl>            <span class=s2>&#34;FRONTEND_PLUGIN_ENTITY_OVERRIDES&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=n>json</span><span class=o>.</span><span class=n>dumps</span><span class=p>({}),</span>  <span class=c1># Default: no overrides</span>
</span></span><span class=line><span class=cl>        <span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=p>),</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><blockquote><p><strong>Note</strong>: The configuration key was renamed from <code>ENTITY_PLUGIN_VIEWS</code> to <code>FRONTEND_PLUGIN_ENTITY_OVERRIDES</code> to clearly distinguish it from backend override configuration (<code>BACKEND_PLUGIN_ENTITY_OVERRIDES</code>).</p></blockquote><div class=gdoc-page__anchorwrap><h3 id=configuration-format>Configuration Format<a data-clipboard-text=https://dmm-com.github.io/pagoda/advanced/plugin_entity_aware_routing/#configuration-format class="gdoc-page__anchor gdoc-page__anchor--right clip" aria-label="Anchor Configuration Format" href=#configuration-format><svg class="icon link"><use xlink:href="#link"/></svg></a></h3></div><div class=highlight><pre tabindex=0 class=chroma><code class=language-json data-lang=json><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nt>&#34;entityId&#34;</span><span class=p>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;plugin&#34;</span><span class=p>:</span> <span class=s2>&#34;plugin-id&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;pages&#34;</span><span class=p>:</span> <span class=p>[</span><span class=s2>&#34;entry.list&#34;</span><span class=p>]</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><table><thead><tr><th>Field</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td><code>entityId</code></td><td>string</td><td>The entity ID (as string) to apply custom routing</td></tr><tr><td><code>plugin</code></td><td>string</td><td>The plugin ID that provides the custom view</td></tr><tr><td><code>pages</code></td><td>string[]</td><td>List of page types to override (currently only <code>"entry.list"</code>)</td></tr></tbody></table><div class=gdoc-page__anchorwrap><h3 id=example-configurations>Example Configurations<a data-clipboard-text=https://dmm-com.github.io/pagoda/advanced/plugin_entity_aware_routing/#example-configurations class="gdoc-page__anchor gdoc-page__anchor--right clip" aria-label="Anchor Example Configurations" href=#example-configurations><svg class="icon link"><use xlink:href="#link"/></svg></a></h3></div><p><strong>Single Entity Override:</strong></p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=nb>export</span> <span class=nv>FRONTEND_PLUGIN_ENTITY_OVERRIDES</span><span class=o>=</span><span class=s1>&#39;{&#34;42&#34;: {&#34;plugin&#34;: &#34;network-tools&#34;, &#34;pages&#34;: [&#34;entry.list&#34;]}}&#39;</span>
</span></span></code></pre></div><p><strong>Multiple Entity Overrides:</strong></p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=nb>export</span> <span class=nv>FRONTEND_PLUGIN_ENTITY_OVERRIDES</span><span class=o>=</span><span class=s1>&#39;{
</span></span></span><span class=line><span class=cl><span class=s1>  &#34;42&#34;: {&#34;plugin&#34;: &#34;network-tools&#34;, &#34;pages&#34;: [&#34;entry.list&#34;]},
</span></span></span><span class=line><span class=cl><span class=s1>  &#34;100&#34;: {&#34;plugin&#34;: &#34;asset-manager&#34;, &#34;pages&#34;: [&#34;entry.list&#34;]},
</span></span></span><span class=line><span class=cl><span class=s1>  &#34;255&#34;: {&#34;plugin&#34;: &#34;custom-dashboard&#34;, &#34;pages&#34;: [&#34;entry.list&#34;]}
</span></span></span><span class=line><span class=cl><span class=s1>}&#39;</span>
</span></span></code></pre></div><p><strong>Disable All Overrides:</strong></p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=nb>export</span> <span class=nv>FRONTEND_PLUGIN_ENTITY_OVERRIDES</span><span class=o>=</span><span class=s1>&#39;{}&#39;</span>
</span></span></code></pre></div><div class=gdoc-page__anchorwrap><h2 id=plugin-development>Plugin Development<a data-clipboard-text=https://dmm-com.github.io/pagoda/advanced/plugin_entity_aware_routing/#plugin-development class="gdoc-page__anchor gdoc-page__anchor--right clip" aria-label="Anchor Plugin Development" href=#plugin-development><svg class="icon link"><use xlink:href="#link"/></svg></a></h2></div><div class=gdoc-page__anchorwrap><h3 id=creating-an-entity-view-plugin>Creating an Entity View Plugin<a data-clipboard-text=https://dmm-com.github.io/pagoda/advanced/plugin_entity_aware_routing/#creating-an-entity-view-plugin class="gdoc-page__anchor gdoc-page__anchor--right clip" aria-label="Anchor Creating an Entity View Plugin" href=#creating-an-entity-view-plugin><svg class="icon link"><use xlink:href="#link"/></svg></a></h3></div><p>To provide custom entity pages, your plugin must implement the <code>EntityViewPlugin</code> interface:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-typescript data-lang=typescript><span class=line><span class=cl><span class=kr>import</span> <span class=p>{</span> <span class=nx>FC</span> <span class=p>}</span> <span class=kr>from</span> <span class=s2>&#34;react&#34;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// Plugin interface for entity-specific views
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kr>interface</span> <span class=nx>EntityViewPlugin</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nx>id</span>: <span class=kt>string</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  <span class=nx>name</span>: <span class=kt>string</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=c1>// Entity page components by page type
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=nx>entityPages</span><span class=o>?:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;entry.list&#34;</span><span class=o>?:</span> <span class=nx>FC</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=c1>// Future: &#34;entry.detail&#34;?, &#34;entry.edit&#34;?, etc.
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=p>};</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><div class=gdoc-page__anchorwrap><h3 id=example-plugin-implementation>Example Plugin Implementation<a data-clipboard-text=https://dmm-com.github.io/pagoda/advanced/plugin_entity_aware_routing/#example-plugin-implementation class="gdoc-page__anchor gdoc-page__anchor--right clip" aria-label="Anchor Example Plugin Implementation" href=#example-plugin-implementation><svg class="icon link"><use xlink:href="#link"/></svg></a></h3></div><div class=highlight><pre tabindex=0 class=chroma><code class=language-typescript data-lang=typescript><span class=line><span class=cl><span class=c1>// plugin-sample/src/index.ts
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kr>import</span> <span class=p>{</span> <span class=nx>FC</span> <span class=p>}</span> <span class=kr>from</span> <span class=s2>&#34;react&#34;</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=kr>import</span> <span class=p>{</span> <span class=nx>CustomEntryList</span> <span class=p>}</span> <span class=kr>from</span> <span class=s2>&#34;./components/CustomEntryList&#34;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kr>interface</span> <span class=nx>Plugin</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nx>id</span>: <span class=kt>string</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  <span class=nx>name</span>: <span class=kt>string</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  <span class=nx>entityPages</span><span class=o>?:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;entry.list&#34;</span><span class=o>?:</span> <span class=nx>FC</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  <span class=p>};</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kr>const</span> <span class=nx>plugin</span>: <span class=kt>Plugin</span> <span class=o>=</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nx>id</span><span class=o>:</span> <span class=s2>&#34;sample&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=nx>name</span><span class=o>:</span> <span class=s2>&#34;Sample Entity View Plugin&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=nx>entityPages</span><span class=o>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;entry.list&#34;</span><span class=o>:</span> <span class=nx>CustomEntryList</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=p>},</span>
</span></span><span class=line><span class=cl><span class=p>};</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kr>export</span> <span class=k>default</span> <span class=nx>plugin</span><span class=p>;</span>
</span></span></code></pre></div><div class=gdoc-page__anchorwrap><h3 id=custom-component-example>Custom Component Example<a data-clipboard-text=https://dmm-com.github.io/pagoda/advanced/plugin_entity_aware_routing/#custom-component-example class="gdoc-page__anchor gdoc-page__anchor--right clip" aria-label="Anchor Custom Component Example" href=#custom-component-example><svg class="icon link"><use xlink:href="#link"/></svg></a></h3></div><div class=highlight><pre tabindex=0 class=chroma><code class=language-tsx data-lang=tsx><span class=line><span class=cl><span class=c1>// plugin-sample/src/components/CustomEntryList.tsx
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kr>import</span> <span class=p>{</span> <span class=nx>FC</span> <span class=p>}</span> <span class=kr>from</span> <span class=s2>&#34;react&#34;</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=kr>import</span> <span class=p>{</span> <span class=nx>useParams</span> <span class=p>}</span> <span class=kr>from</span> <span class=s2>&#34;react-router&#34;</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=kr>import</span> <span class=p>{</span> <span class=nx>Box</span><span class=p>,</span> <span class=nx>Typography</span> <span class=p>}</span> <span class=kr>from</span> <span class=s2>&#34;@mui/material&#34;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kr>export</span> <span class=kr>const</span> <span class=nx>CustomEntryList</span>: <span class=kt>FC</span> <span class=o>=</span> <span class=p>()</span> <span class=o>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=kr>const</span> <span class=p>{</span> <span class=nx>entityId</span> <span class=p>}</span> <span class=o>=</span> <span class=nx>useParams</span><span class=o>&lt;</span><span class=p>{</span> <span class=nx>entityId</span>: <span class=kt>string</span> <span class=p>}</span><span class=o>&gt;</span><span class=p>();</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=k>return</span> <span class=p>(</span>
</span></span><span class=line><span class=cl>    <span class=p>&lt;</span><span class=nt>Box</span> <span class=na>p</span><span class=o>=</span><span class=p>{</span><span class=mi>3</span><span class=p>}&gt;</span>
</span></span><span class=line><span class=cl>      <span class=p>&lt;</span><span class=nt>Typography</span> <span class=na>variant</span><span class=o>=</span><span class=s>&#34;h4&#34;</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>        <span class=nx>Custom</span> <span class=nx>Entry</span> <span class=nx>List</span> <span class=k>for</span> <span class=nx>Entity</span> <span class=p>{</span><span class=nx>entityId</span><span class=p>}</span>
</span></span><span class=line><span class=cl>      <span class=p>&lt;/</span><span class=nt>Typography</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>      <span class=p>{</span><span class=cm>/* Your custom implementation */</span><span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=p>&lt;/</span><span class=nt>Box</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>  <span class=p>);</span>
</span></span><span class=line><span class=cl><span class=p>};</span>
</span></span></code></pre></div><div class=gdoc-page__anchorwrap><h3 id=plugin-registration>Plugin Registration<a data-clipboard-text=https://dmm-com.github.io/pagoda/advanced/plugin_entity_aware_routing/#plugin-registration class="gdoc-page__anchor gdoc-page__anchor--right clip" aria-label="Anchor Plugin Registration" href=#plugin-registration><svg class="icon link"><use xlink:href="#link"/></svg></a></h3></div><p>Register your plugin in <code>pagoda-minimal-builder</code>:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=c1>// frontend/plugins/pagoda-minimal-builder/plugins.config.js
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=nx>module</span><span class=p>.</span><span class=nx>exports</span> <span class=o>=</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nx>plugins</span><span class=o>:</span> <span class=p>[</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;pagoda-plugin-hello-world&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;pagoda-plugin-dashboard&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;pagoda-plugin-entity-sample&#34;</span><span class=p>,</span>  <span class=c1>// Your entity view plugin
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=p>],</span>
</span></span><span class=line><span class=cl><span class=p>};</span>
</span></span></code></pre></div><div class=gdoc-page__anchorwrap><h2 id=entity-schema-validation>Entity Schema Validation<a data-clipboard-text=https://dmm-com.github.io/pagoda/advanced/plugin_entity_aware_routing/#entity-schema-validation class="gdoc-page__anchor gdoc-page__anchor--right clip" aria-label="Anchor Entity Schema Validation" href=#entity-schema-validation><svg class="icon link"><use xlink:href="#link"/></svg></a></h2></div><p>Plugins can define requirements for entity structure using Zod schemas. When a plugin specifies an <code>entitySchema</code>, the system validates that the target entity meets these requirements before rendering the plugin&rsquo;s page.</p><div class=gdoc-page__anchorwrap><h3 id=why-use-entity-schema-validation>Why Use Entity Schema Validation?<a data-clipboard-text=https://dmm-com.github.io/pagoda/advanced/plugin_entity_aware_routing/#why-use-entity-schema-validation class="gdoc-page__anchor gdoc-page__anchor--right clip" aria-label="Anchor Why Use Entity Schema Validation?" href=#why-use-entity-schema-validation><svg class="icon link"><use xlink:href="#link"/></svg></a></h3></div><ul><li><strong>Prevent Runtime Errors</strong>: Ensure required attributes exist before your plugin code runs</li><li><strong>Clear Error Messages</strong>: Users see exactly what&rsquo;s missing when an entity doesn&rsquo;t match</li><li><strong>Type Safety</strong>: Schema validation provides TypeScript type inference</li><li><strong>Self-Documenting</strong>: The schema serves as documentation for entity requirements</li></ul><div class=gdoc-page__anchorwrap><h3 id=defining-an-entity-schema>Defining an Entity Schema<a data-clipboard-text=https://dmm-com.github.io/pagoda/advanced/plugin_entity_aware_routing/#defining-an-entity-schema class="gdoc-page__anchor gdoc-page__anchor--right clip" aria-label="Anchor Defining an Entity Schema" href=#defining-an-entity-schema><svg class="icon link"><use xlink:href="#link"/></svg></a></h3></div><p>Use the <code>entitySchema</code> property in your <code>EntityViewPlugin</code> to define requirements:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-typescript data-lang=typescript><span class=line><span class=cl><span class=kr>import</span> <span class=p>{</span> <span class=nx>z</span> <span class=p>}</span> <span class=kr>from</span> <span class=s2>&#34;zod&#34;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// AttrType constants (matching airone/lib/types.py)
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kr>const</span> <span class=nx>AttrType</span> <span class=o>=</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nx>OBJECT</span>: <span class=kt>1</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=nx>STRING</span>: <span class=kt>2</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=nx>TEXT</span>: <span class=kt>4</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=nx>BOOLEAN</span>: <span class=kt>8</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=nx>GROUP</span>: <span class=kt>16</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=nx>NUMBER</span>: <span class=kt>256</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=nx>ARRAY_STRING</span>: <span class=kt>1026</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=nx>ARRAY_OBJECT</span>: <span class=kt>1025</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=c1>// ... other types
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=p>}</span> <span class=kr>as</span> <span class=kr>const</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// Helper to check for required attributes
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kr>const</span> <span class=nx>hasAttr</span> <span class=o>=</span> <span class=p>(</span><span class=nx>name</span>: <span class=kt>string</span><span class=p>,</span> <span class=kr>type</span><span class=o>:</span> <span class=kt>number</span> <span class=o>|</span> <span class=kt>number</span><span class=p>[])</span> <span class=o>=&gt;</span>
</span></span><span class=line><span class=cl>  <span class=p>(</span><span class=nx>attrs</span>: <span class=kt>EntityAttrStructure</span><span class=p>[])</span> <span class=o>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=kr>const</span> <span class=nx>types</span> <span class=o>=</span> <span class=nb>Array</span><span class=p>.</span><span class=nx>isArray</span><span class=p>(</span><span class=kr>type</span><span class=p>)</span> <span class=o>?</span> <span class=kr>type</span> <span class=o>:</span> <span class=p>[</span><span class=kr>type</span><span class=p>];</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=nx>attrs</span><span class=p>.</span><span class=nx>some</span><span class=p>(</span><span class=nx>a</span> <span class=o>=&gt;</span> <span class=nx>a</span><span class=p>.</span><span class=nx>name</span> <span class=o>===</span> <span class=nx>name</span> <span class=o>&amp;&amp;</span> <span class=nx>types</span><span class=p>.</span><span class=nx>includes</span><span class=p>(</span><span class=nx>a</span><span class=p>.</span><span class=kr>type</span><span class=p>));</span>
</span></span><span class=line><span class=cl>  <span class=p>};</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// Define the entity schema
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kr>const</span> <span class=nx>networkDeviceSchema</span> <span class=o>=</span> <span class=nx>z</span><span class=p>.</span><span class=kt>object</span><span class=p>({</span>
</span></span><span class=line><span class=cl>  <span class=nx>id</span>: <span class=kt>z.number</span><span class=p>(),</span>
</span></span><span class=line><span class=cl>  <span class=nx>name</span>: <span class=kt>z.string</span><span class=p>(),</span>
</span></span><span class=line><span class=cl>  <span class=nx>attrs</span>: <span class=kt>z.array</span><span class=p>(</span><span class=nx>z</span><span class=p>.</span><span class=kt>object</span><span class=p>({</span>
</span></span><span class=line><span class=cl>    <span class=nx>id</span>: <span class=kt>z.number</span><span class=p>(),</span>
</span></span><span class=line><span class=cl>    <span class=nx>name</span>: <span class=kt>z.string</span><span class=p>(),</span>
</span></span><span class=line><span class=cl>    <span class=kr>type</span><span class=o>:</span> <span class=nx>z</span><span class=p>.</span><span class=kt>number</span><span class=p>(),</span>
</span></span><span class=line><span class=cl>    <span class=nx>isMandatory</span>: <span class=kt>z.boolean</span><span class=p>(),</span>
</span></span><span class=line><span class=cl>    <span class=nx>referral</span>: <span class=kt>z.array</span><span class=p>(</span><span class=nx>z</span><span class=p>.</span><span class=kt>object</span><span class=p>({</span> <span class=nx>id</span>: <span class=kt>z.number</span><span class=p>(),</span> <span class=nx>name</span>: <span class=kt>z.string</span><span class=p>()</span> <span class=p>})),</span>
</span></span><span class=line><span class=cl>  <span class=p>}))</span>
</span></span><span class=line><span class=cl><span class=p>})</span>
</span></span><span class=line><span class=cl><span class=p>.</span><span class=nx>refine</span><span class=p>(</span>
</span></span><span class=line><span class=cl>  <span class=p>(</span><span class=nx>entity</span><span class=p>)</span> <span class=o>=&gt;</span> <span class=nx>hasAttr</span><span class=p>(</span><span class=s2>&#34;hostname&#34;</span><span class=p>,</span> <span class=nx>AttrType</span><span class=p>.</span><span class=nx>STRING</span><span class=p>)(</span><span class=nx>entity</span><span class=p>.</span><span class=nx>attrs</span><span class=p>),</span>
</span></span><span class=line><span class=cl>  <span class=p>{</span> <span class=nx>message</span><span class=o>:</span> <span class=s2>&#34;hostname attribute (STRING type) is required&#34;</span> <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=p>.</span><span class=nx>refine</span><span class=p>(</span>
</span></span><span class=line><span class=cl>  <span class=p>(</span><span class=nx>entity</span><span class=p>)</span> <span class=o>=&gt;</span> <span class=nx>hasAttr</span><span class=p>(</span><span class=s2>&#34;ip_address&#34;</span><span class=p>,</span> <span class=nx>AttrType</span><span class=p>.</span><span class=nx>STRING</span><span class=p>)(</span><span class=nx>entity</span><span class=p>.</span><span class=nx>attrs</span><span class=p>),</span>
</span></span><span class=line><span class=cl>  <span class=p>{</span> <span class=nx>message</span><span class=o>:</span> <span class=s2>&#34;ip_address attribute (STRING type) is required&#34;</span> <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// Use in plugin
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kr>const</span> <span class=nx>plugin</span>: <span class=kt>EntityViewPlugin</span> <span class=o>=</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nx>id</span><span class=o>:</span> <span class=s2>&#34;network-tools&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=nx>name</span><span class=o>:</span> <span class=s2>&#34;Network Tools Plugin&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=nx>version</span><span class=o>:</span> <span class=s2>&#34;1.0.0&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=nx>routes</span><span class=o>:</span> <span class=p>[],</span>
</span></span><span class=line><span class=cl>  <span class=nx>entityPages</span><span class=o>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;entry.list&#34;</span><span class=o>:</span> <span class=nx>NetworkDeviceList</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=p>},</span>
</span></span><span class=line><span class=cl>  <span class=nx>entitySchema</span>: <span class=kt>networkDeviceSchema</span><span class=p>,</span>  <span class=c1>// Enable validation
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=p>};</span>
</span></span></code></pre></div><div class=gdoc-page__anchorwrap><h3 id=using-schema-helpers-from-pagoda-core>Using Schema Helpers (from pagoda-core)<a data-clipboard-text=https://dmm-com.github.io/pagoda/advanced/plugin_entity_aware_routing/#using-schema-helpers-from-pagoda-core class="gdoc-page__anchor gdoc-page__anchor--right clip" aria-label="Anchor Using Schema Helpers (from pagoda-core)" href=#using-schema-helpers-from-pagoda-core><svg class="icon link"><use xlink:href="#link"/></svg></a></h3></div><p>The frontend provides helper functions to simplify schema creation:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-typescript data-lang=typescript><span class=line><span class=cl><span class=kr>import</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nx>AttrType</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=nx>baseEntitySchema</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=nx>requireAttr</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=nx>requireReferral</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=nx>createEntitySchema</span><span class=p>,</span>
</span></span><span class=line><span class=cl><span class=p>}</span> <span class=kr>from</span> <span class=s2>&#34;plugins/schema&#34;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// Method 1: Using baseEntitySchema with refine
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kr>const</span> <span class=nx>schema1</span> <span class=o>=</span> <span class=nx>baseEntitySchema</span>
</span></span><span class=line><span class=cl>  <span class=p>.</span><span class=nx>refine</span><span class=p>(</span>
</span></span><span class=line><span class=cl>    <span class=p>(</span><span class=nx>entity</span><span class=p>)</span> <span class=o>=&gt;</span> <span class=nx>requireAttr</span><span class=p>(</span><span class=s2>&#34;hostname&#34;</span><span class=p>,</span> <span class=nx>AttrType</span><span class=p>.</span><span class=nx>STRING</span><span class=p>)(</span><span class=nx>entity</span><span class=p>.</span><span class=nx>attrs</span><span class=p>),</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span> <span class=nx>message</span><span class=o>:</span> <span class=s2>&#34;hostname attribute is required&#34;</span> <span class=p>}</span>
</span></span><span class=line><span class=cl>  <span class=p>)</span>
</span></span><span class=line><span class=cl>  <span class=p>.</span><span class=nx>refine</span><span class=p>(</span>
</span></span><span class=line><span class=cl>    <span class=p>(</span><span class=nx>entity</span><span class=p>)</span> <span class=o>=&gt;</span> <span class=nx>requireReferral</span><span class=p>(</span><span class=s2>&#34;location&#34;</span><span class=p>,</span> <span class=p>[</span><span class=s2>&#34;Datacenter&#34;</span><span class=p>])(</span><span class=nx>entity</span><span class=p>.</span><span class=nx>attrs</span><span class=p>),</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span> <span class=nx>message</span><span class=o>:</span> <span class=s2>&#34;location must reference Datacenter entity&#34;</span> <span class=p>}</span>
</span></span><span class=line><span class=cl>  <span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// Method 2: Using createEntitySchema helper
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kr>const</span> <span class=nx>schema2</span> <span class=o>=</span> <span class=nx>createEntitySchema</span><span class=p>([</span>
</span></span><span class=line><span class=cl>  <span class=p>{</span> <span class=nx>name</span><span class=o>:</span> <span class=s2>&#34;hostname&#34;</span><span class=p>,</span> <span class=kr>type</span><span class=o>:</span> <span class=nx>AttrType</span><span class=p>.</span><span class=nx>STRING</span> <span class=p>},</span>
</span></span><span class=line><span class=cl>  <span class=p>{</span> <span class=nx>name</span><span class=o>:</span> <span class=s2>&#34;ip_address&#34;</span><span class=p>,</span> <span class=kr>type</span><span class=o>:</span> <span class=nx>AttrType</span><span class=p>.</span><span class=nx>STRING</span> <span class=p>},</span>
</span></span><span class=line><span class=cl>  <span class=p>{</span> <span class=nx>name</span><span class=o>:</span> <span class=s2>&#34;location&#34;</span><span class=p>,</span> <span class=kr>type</span><span class=o>:</span> <span class=nx>AttrType</span><span class=p>.</span><span class=nx>OBJECT</span><span class=p>,</span> <span class=nx>referrals</span><span class=o>:</span> <span class=p>[</span><span class=s2>&#34;Datacenter&#34;</span><span class=p>]</span> <span class=p>},</span>
</span></span><span class=line><span class=cl><span class=p>]);</span>
</span></span></code></pre></div><div class=gdoc-page__anchorwrap><h3 id=validation-flow>Validation Flow<a data-clipboard-text=https://dmm-com.github.io/pagoda/advanced/plugin_entity_aware_routing/#validation-flow class="gdoc-page__anchor gdoc-page__anchor--right clip" aria-label="Anchor Validation Flow" href=#validation-flow><svg class="icon link"><use xlink:href="#link"/></svg></a></h3></div><p>When schema validation is enabled:</p><pre tabindex=0><code class=language-mermaid data-lang=mermaid>sequenceDiagram
    participant User
    participant Router as EntityAwareRoute
    participant API as Airone API
    participant Validator as Schema Validator
    participant Plugin as Plugin Page

    User-&gt;&gt;Router: Navigate to entity page
    Router-&gt;&gt;Router: Find plugin with entitySchema
    Router-&gt;&gt;API: Fetch entity details
    API--&gt;&gt;Router: EntityDetail response
    Router-&gt;&gt;Validator: Validate against schema

    alt Validation passes
        Validator--&gt;&gt;Router: success: true
        Router-&gt;&gt;Plugin: Render plugin page
    else Validation fails
        Validator--&gt;&gt;Router: success: false, errors: [...]
        Router-&gt;&gt;User: Show SchemaValidationErrorPage
    end
</code></pre><div class=gdoc-page__anchorwrap><h3 id=error-page>Error Page<a data-clipboard-text=https://dmm-com.github.io/pagoda/advanced/plugin_entity_aware_routing/#error-page class="gdoc-page__anchor gdoc-page__anchor--right clip" aria-label="Anchor Error Page" href=#error-page><svg class="icon link"><use xlink:href="#link"/></svg></a></h3></div><p>When validation fails, users see a clear error page showing:</p><ul><li>Which entity failed validation</li><li>Which plugin defined the requirements</li><li>Specific validation errors with helpful messages</li></ul><p>This allows administrators to either:</p><ol><li>Update the entity to meet the plugin&rsquo;s requirements</li><li>Remove the plugin mapping for this entity</li></ol><div class=gdoc-page__anchorwrap><h3 id=attrtype-reference>AttrType Reference<a data-clipboard-text=https://dmm-com.github.io/pagoda/advanced/plugin_entity_aware_routing/#attrtype-reference class="gdoc-page__anchor gdoc-page__anchor--right clip" aria-label="Anchor AttrType Reference" href=#attrtype-reference><svg class="icon link"><use xlink:href="#link"/></svg></a></h3></div><table><thead><tr><th>Type</th><th>Value</th><th>Description</th></tr></thead><tbody><tr><td><code>OBJECT</code></td><td>1</td><td>Reference to another entry</td></tr><tr><td><code>STRING</code></td><td>2</td><td>Single-line text</td></tr><tr><td><code>TEXT</code></td><td>4</td><td>Multi-line text</td></tr><tr><td><code>BOOLEAN</code></td><td>8</td><td>True/false value</td></tr><tr><td><code>GROUP</code></td><td>16</td><td>Reference to a group</td></tr><tr><td><code>DATE</code></td><td>32</td><td>Date value</td></tr><tr><td><code>ROLE</code></td><td>64</td><td>Reference to a role</td></tr><tr><td><code>DATETIME</code></td><td>128</td><td>Date and time value</td></tr><tr><td><code>NUMBER</code></td><td>256</td><td>Numeric value</td></tr><tr><td><code>NAMED_OBJECT</code></td><td>2049</td><td>Named reference to entry</td></tr><tr><td><code>ARRAY_OBJECT</code></td><td>1025</td><td>Array of entry references</td></tr><tr><td><code>ARRAY_STRING</code></td><td>1026</td><td>Array of strings</td></tr><tr><td><code>ARRAY_NUMBER</code></td><td>1280</td><td>Array of numbers</td></tr><tr><td><code>ARRAY_NAMED_OBJECT</code></td><td>3073</td><td>Array of named references</td></tr><tr><td><code>ARRAY_GROUP</code></td><td>1040</td><td>Array of group references</td></tr><tr><td><code>ARRAY_ROLE</code></td><td>1088</td><td>Array of role references</td></tr></tbody></table><div class=gdoc-page__anchorwrap><h2 id=routing-flow>Routing Flow<a data-clipboard-text=https://dmm-com.github.io/pagoda/advanced/plugin_entity_aware_routing/#routing-flow class="gdoc-page__anchor gdoc-page__anchor--right clip" aria-label="Anchor Routing Flow" href=#routing-flow><svg class="icon link"><use xlink:href="#link"/></svg></a></h2></div><div class=gdoc-page__anchorwrap><h3 id=decision-logic>Decision Logic<a data-clipboard-text=https://dmm-com.github.io/pagoda/advanced/plugin_entity_aware_routing/#decision-logic class="gdoc-page__anchor gdoc-page__anchor--right clip" aria-label="Anchor Decision Logic" href=#decision-logic><svg class="icon link"><use xlink:href="#link"/></svg></a></h3></div><pre tabindex=0><code class=language-mermaid data-lang=mermaid>flowchart TD
    START[User navigates to&lt;br/&gt;/ui/entities/:entityId/entries]

    CHECK_ID{entityId&lt;br/&gt;in URL?}

    LOOKUP_CONFIG[Lookup config&amp;lsqb;entityId&amp;rsqb;&lt;br/&gt;O&amp;lpar;1&amp;rpar;]

    CHECK_MAPPING{Mapping&lt;br/&gt;exists?}

    CHECK_PAGE{pageType in&lt;br/&gt;mapping.pages?}

    LOOKUP_PLUGIN[Lookup pluginMap.get&amp;lpar;pluginId&amp;rpar;&lt;br/&gt;O&amp;lpar;1&amp;rpar;]

    CHECK_PLUGIN{Plugin&lt;br/&gt;found?}

    CHECK_ENTITY_VIEW{Plugin has&lt;br/&gt;entityPages?}

    CHECK_COMPONENT{Page component&lt;br/&gt;exists?}

    RENDER_PLUGIN[Render Plugin Component]
    RENDER_DEFAULT[Render Default EntryListPage]

    START --&gt; CHECK_ID
    CHECK_ID --&gt;|No| RENDER_DEFAULT
    CHECK_ID --&gt;|Yes| LOOKUP_CONFIG

    LOOKUP_CONFIG --&gt; CHECK_MAPPING
    CHECK_MAPPING --&gt;|No| RENDER_DEFAULT
    CHECK_MAPPING --&gt;|Yes| CHECK_PAGE

    CHECK_PAGE --&gt;|No| RENDER_DEFAULT
    CHECK_PAGE --&gt;|Yes| LOOKUP_PLUGIN

    LOOKUP_PLUGIN --&gt; CHECK_PLUGIN
    CHECK_PLUGIN --&gt;|No| RENDER_DEFAULT
    CHECK_PLUGIN --&gt;|Yes| CHECK_ENTITY_VIEW

    CHECK_ENTITY_VIEW --&gt;|No| RENDER_DEFAULT
    CHECK_ENTITY_VIEW --&gt;|Yes| CHECK_COMPONENT

    CHECK_COMPONENT --&gt;|No| RENDER_DEFAULT
    CHECK_COMPONENT --&gt;|Yes| RENDER_PLUGIN

    style START fill:#e1f5fe
    style RENDER_PLUGIN fill:#e8f5e8
    style RENDER_DEFAULT fill:#fff3e0
</code></pre><div class=gdoc-page__anchorwrap><h3 id=performance-characteristics>Performance Characteristics<a data-clipboard-text=https://dmm-com.github.io/pagoda/advanced/plugin_entity_aware_routing/#performance-characteristics class="gdoc-page__anchor gdoc-page__anchor--right clip" aria-label="Anchor Performance Characteristics" href=#performance-characteristics><svg class="icon link"><use xlink:href="#link"/></svg></a></h3></div><p>All lookups are O(1):</p><table><thead><tr><th>Operation</th><th>Complexity</th><th>Implementation</th></tr></thead><tbody><tr><td>Entity mapping lookup</td><td>O(1)</td><td><code>config[entityId]</code> object property access</td></tr><tr><td>Plugin lookup</td><td>O(1)</td><td><code>pluginMap.get(pluginId)</code> Map lookup</td></tr><tr><td>Page check</td><td>O(n)</td><td><code>pages.includes(pageType)</code> where n is typically 1-3</td></tr></tbody></table><p>Total routing decision: <strong>O(1)</strong> with respect to number of entities and plugins.</p><div class=gdoc-page__anchorwrap><h2 id=implementation-details>Implementation Details<a data-clipboard-text=https://dmm-com.github.io/pagoda/advanced/plugin_entity_aware_routing/#implementation-details class="gdoc-page__anchor gdoc-page__anchor--right clip" aria-label="Anchor Implementation Details" href=#implementation-details><svg class="icon link"><use xlink:href="#link"/></svg></a></h2></div><div class=gdoc-page__anchorwrap><h3 id=key-files>Key Files<a data-clipboard-text=https://dmm-com.github.io/pagoda/advanced/plugin_entity_aware_routing/#key-files class="gdoc-page__anchor gdoc-page__anchor--right clip" aria-label="Anchor Key Files" href=#key-files><svg class="icon link"><use xlink:href="#link"/></svg></a></h3></div><table><thead><tr><th>File</th><th>Purpose</th></tr></thead><tbody><tr><td><code>airone/settings_common.py</code></td><td>Django configuration for ENTITY_PLUGIN_VIEWS</td></tr><tr><td><code>templates/frontend/index.html</code></td><td>Passes config to frontend via django_context</td></tr><tr><td><code>frontend/src/plugins/index.ts</code></td><td>Type definitions for EntityViewPlugin</td></tr><tr><td><code>frontend/src/services/ServerContext.ts</code></td><td>Reads entityPluginViews from window</td></tr><tr><td><code>frontend/src/hooks/usePluginMappings.ts</code></td><td>Hook to access plugin mappings</td></tr><tr><td><code>frontend/src/routes/EntityAwareRoute.tsx</code></td><td>Core routing logic component</td></tr><tr><td><code>frontend/src/routes/AppRouter.tsx</code></td><td>Integrates EntityAwareRoute</td></tr><tr><td><code>frontend/src/AppBase.tsx</code></td><td>Creates pluginMap from plugins array</td></tr></tbody></table><div class=gdoc-page__anchorwrap><h3 id=type-definitions>Type Definitions<a data-clipboard-text=https://dmm-com.github.io/pagoda/advanced/plugin_entity_aware_routing/#type-definitions class="gdoc-page__anchor gdoc-page__anchor--right clip" aria-label="Anchor Type Definitions" href=#type-definitions><svg class="icon link"><use xlink:href="#link"/></svg></a></h3></div><div class=highlight><pre tabindex=0 class=chroma><code class=language-typescript data-lang=typescript><span class=line><span class=cl><span class=c1>// frontend/src/plugins/index.ts
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl><span class=c1>// Supported page types for entity views
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kr>export</span> <span class=kr>type</span> <span class=nx>EntityPageType</span> <span class=o>=</span> <span class=s2>&#34;entry.list&#34;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// Configuration for a single entity mapping
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kr>export</span> <span class=kr>interface</span> <span class=nx>EntityPluginMapping</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nx>plugin</span>: <span class=kt>string</span><span class=p>;</span>           <span class=c1>// Plugin ID
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=nx>pages</span>: <span class=kt>EntityPageType</span><span class=p>[];</span>  <span class=c1>// Page types to override
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// Full configuration: entityId -&gt; mapping
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kr>export</span> <span class=kr>type</span> <span class=nx>EntityPluginViewsConfig</span> <span class=o>=</span> <span class=nx>Record</span><span class=p>&lt;</span><span class=nt>string</span><span class=err>,</span> <span class=na>EntityPluginMapping</span><span class=p>&gt;;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// Plugin interface with entity pages
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kr>export</span> <span class=kr>interface</span> <span class=nx>EntityViewPlugin</span> <span class=kr>extends</span> <span class=nx>Plugin</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nx>entityPages?</span>: <span class=kt>Partial</span><span class=p>&lt;</span><span class=nt>Record</span><span class=err>&lt;</span><span class=na>EntityPageType</span><span class=err>,</span> <span class=na>FC</span><span class=p>&gt;</span><span class=o>&gt;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  <span class=nx>entitySchema?</span>: <span class=kt>z.ZodType</span><span class=p>&lt;</span><span class=nt>EntityStructure</span><span class=p>&gt;;</span>  <span class=c1>// Optional schema validation
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// Type guard function
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kr>export</span> <span class=kd>function</span> <span class=nx>isEntityViewPlugin</span><span class=p>(</span><span class=nx>plugin</span>: <span class=kt>Plugin</span><span class=p>)</span><span class=o>:</span> <span class=nx>plugin</span> <span class=k>is</span> <span class=nx>EntityViewPlugin</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=k>return</span> <span class=s2>&#34;entityPages&#34;</span> <span class=k>in</span> <span class=nx>plugin</span> <span class=o>&amp;&amp;</span> <span class=nx>plugin</span><span class=p>.</span><span class=nx>entityPages</span> <span class=o>!==</span> <span class=kc>undefined</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><div class=gdoc-page__anchorwrap><h2 id=verification>Verification<a data-clipboard-text=https://dmm-com.github.io/pagoda/advanced/plugin_entity_aware_routing/#verification class="gdoc-page__anchor gdoc-page__anchor--right clip" aria-label="Anchor Verification" href=#verification><svg class="icon link"><use xlink:href="#link"/></svg></a></h2></div><div class=gdoc-page__anchorwrap><h3 id=testing-the-configuration>Testing the Configuration<a data-clipboard-text=https://dmm-com.github.io/pagoda/advanced/plugin_entity_aware_routing/#testing-the-configuration class="gdoc-page__anchor gdoc-page__anchor--right clip" aria-label="Anchor Testing the Configuration" href=#testing-the-configuration><svg class="icon link"><use xlink:href="#link"/></svg></a></h3></div><ol><li><p><strong>Set up the configuration:</strong></p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># In your Django settings or environment</span>
</span></span><span class=line><span class=cl><span class=nb>export</span> <span class=nv>FRONTEND_PLUGIN_ENTITY_OVERRIDES</span><span class=o>=</span><span class=s1>&#39;{&#34;9681&#34;: {&#34;plugin&#34;: &#34;sample&#34;, &#34;pages&#34;: [&#34;entry.list&#34;]}}&#39;</span>
</span></span></code></pre></div></li><li><p><strong>Build the frontend with plugins:</strong></p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># Build the core library</span>
</span></span><span class=line><span class=cl>npm run build:lib
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Build with plugins</span>
</span></span><span class=line><span class=cl><span class=nb>cd</span> frontend/plugins/pagoda-minimal-builder
</span></span><span class=line><span class=cl>npm run build
</span></span><span class=line><span class=cl>cp dist/ui.js ../../../static/js/ui.js
</span></span></code></pre></div></li><li><p><strong>Start the server:</strong></p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>python manage.py runserver
</span></span></code></pre></div></li><li><p><strong>Verify in browser:</strong></p><ul><li>Navigate to <code>/ui/entities/9681/entries</code></li><li>You should see the plugin&rsquo;s custom view instead of the default EntryListPage</li></ul></li><li><p><strong>Check console for configuration:</strong></p><div class=highlight><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=c1>// In browser console
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=nb>window</span><span class=p>.</span><span class=nx>django_context</span><span class=p>.</span><span class=nx>frontendPluginEntityOverrides</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=c1>// Output: {&#34;9681&#34;: {&#34;plugin&#34;: &#34;sample&#34;, &#34;pages&#34;: [&#34;entry.list&#34;]}}
</span></span></span></code></pre></div></li></ol><div class=gdoc-page__anchorwrap><h3 id=debugging>Debugging<a data-clipboard-text=https://dmm-com.github.io/pagoda/advanced/plugin_entity_aware_routing/#debugging class="gdoc-page__anchor gdoc-page__anchor--right clip" aria-label="Anchor Debugging" href=#debugging><svg class="icon link"><use xlink:href="#link"/></svg></a></h3></div><p>If the custom view is not displayed:</p><ol><li><p><strong>Check configuration is loaded:</strong></p><div class=highlight><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=nb>window</span><span class=p>.</span><span class=nx>django_context</span><span class=p>.</span><span class=nx>frontendPluginEntityOverrides</span>
</span></span></code></pre></div></li><li><p><strong>Verify plugin is registered:</strong></p><ul><li>Check <code>pagoda-minimal-builder/plugins.config.js</code></li><li>Ensure plugin is in the configured plugins list</li></ul></li><li><p><strong>Check console warnings:</strong></p><ul><li>EntityAwareRoute logs warnings for:<ul><li>Plugin not found</li><li>Plugin doesn&rsquo;t support entity pages</li><li>Page type not provided by plugin</li></ul></li></ul></li></ol><div class=gdoc-page__anchorwrap><h2 id=future-extensions>Future Extensions<a data-clipboard-text=https://dmm-com.github.io/pagoda/advanced/plugin_entity_aware_routing/#future-extensions class="gdoc-page__anchor gdoc-page__anchor--right clip" aria-label="Anchor Future Extensions" href=#future-extensions><svg class="icon link"><use xlink:href="#link"/></svg></a></h2></div><div class=gdoc-page__anchorwrap><h3 id=planned-page-types>Planned Page Types<a data-clipboard-text=https://dmm-com.github.io/pagoda/advanced/plugin_entity_aware_routing/#planned-page-types class="gdoc-page__anchor gdoc-page__anchor--right clip" aria-label="Anchor Planned Page Types" href=#planned-page-types><svg class="icon link"><use xlink:href="#link"/></svg></a></h3></div><table><thead><tr><th>Page Type</th><th>URL Pattern</th><th>Status</th></tr></thead><tbody><tr><td><code>entry.list</code></td><td><code>/ui/entities/:entityId/entries</code></td><td>Implemented</td></tr><tr><td><code>entry.detail</code></td><td><code>/ui/entities/:entityId/entries/:entryId</code></td><td>Planned</td></tr><tr><td><code>entry.edit</code></td><td><code>/ui/entities/:entityId/entries/:entryId/edit</code></td><td>Planned</td></tr><tr><td><code>entry.create</code></td><td><code>/ui/entities/:entityId/entries/new</code></td><td>Planned</td></tr></tbody></table><div class=gdoc-page__anchorwrap><h3 id=adding-new-page-types>Adding New Page Types<a data-clipboard-text=https://dmm-com.github.io/pagoda/advanced/plugin_entity_aware_routing/#adding-new-page-types class="gdoc-page__anchor gdoc-page__anchor--right clip" aria-label="Anchor Adding New Page Types" href=#adding-new-page-types><svg class="icon link"><use xlink:href="#link"/></svg></a></h3></div><p>To extend the system with new page types:</p><ol><li><p>Add the page type to <code>EntityPageType</code>:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-typescript data-lang=typescript><span class=line><span class=cl><span class=kr>export</span> <span class=kr>type</span> <span class=nx>EntityPageType</span> <span class=o>=</span> <span class=s2>&#34;entry.list&#34;</span> <span class=o>|</span> <span class=s2>&#34;entry.detail&#34;</span> <span class=o>|</span> <span class=s2>&#34;entry.edit&#34;</span><span class=p>;</span>
</span></span></code></pre></div></li><li><p>Add routing in <code>AppRouter.tsx</code>:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-typescript data-lang=typescript><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>Route</span>
</span></span><span class=line><span class=cl>  <span class=na>path</span><span class=o>=</span><span class=p>{</span><span class=nx>entryDetailsPath</span><span class=p>(</span><span class=s2>&#34;:entityId&#34;</span><span class=p>,</span> <span class=s2>&#34;:entryId&#34;</span><span class=p>)}</span>
</span></span><span class=line><span class=cl>  <span class=na>element</span><span class=o>=</span><span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=p>&lt;</span><span class=nt>EntityAwareRoute</span>
</span></span><span class=line><span class=cl>      <span class=na>pageType</span><span class=o>=</span><span class=s>&#34;entry.detail&#34;</span>
</span></span><span class=line><span class=cl>      <span class=na>defaultComponent</span><span class=o>=</span><span class=p>{</span><span class=nx>EntryDetailsPage</span><span class=p>}</span>
</span></span><span class=line><span class=cl>      <span class=na>pluginMap</span><span class=o>=</span><span class=p>{</span><span class=nx>pluginMap</span><span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=p>/&gt;</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>/&gt;</span>
</span></span></code></pre></div></li><li><p>Implement the page in your plugin:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-typescript data-lang=typescript><span class=line><span class=cl><span class=nx>entityPages</span><span class=o>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=s2>&#34;entry.list&#34;</span><span class=o>:</span> <span class=nx>CustomEntryList</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=s2>&#34;entry.detail&#34;</span><span class=o>:</span> <span class=nx>CustomEntryDetail</span><span class=p>,</span>
</span></span><span class=line><span class=cl><span class=p>},</span>
</span></span></code></pre></div></li></ol></article><div class="gdoc-page__footer flex flex-wrap justify-between"></div></div></main><footer class=gdoc-footer><div class="container flex flex-wrap"><span class=gdoc-footer__item>Copyright  since 2020, DMM.com LLC. All Rights Reserved.</span></div></footer></div><script defer src=https://dmm-com.github.io/pagoda/js/en.search.min.2f6745c6746daca833f02af894707126692b20181aaa275e4d6e9f7bb00ab7af.js></script>
<script defer src=https://dmm-com.github.io/pagoda/js/clipboard.min.js></script>
<script>document.addEventListener("DOMContentLoaded",function(){var t=new ClipboardJS(".clip")})</script></body></html>