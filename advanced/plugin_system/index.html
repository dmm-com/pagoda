<!doctype html><html lang=en><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="Plugin System"><title>Plugin System | Pagoda</title><link rel=icon href=https://dmm-com.github.io/pagoda/favicon/favicon-32x32.png type=image/x-icon><link rel=preload as=font href=https://dmm-com.github.io/pagoda/fonts/Metropolis.woff2 type=font/woff2 crossorigin=anonymous><link rel=preload as=font href=https://dmm-com.github.io/pagoda/fonts/LiberationSans.woff2 type=font/woff2 crossorigin=anonymous><link rel=preload as=font href=https://dmm-com.github.io/pagoda/fonts/LiberationSans-Bold.woff2 type=font/woff2 crossorigin=anonymous><link rel=preload as=font href=https://dmm-com.github.io/pagoda/fonts/LiberationSans-BoldItalic.woff2 type=font/woff2 crossorigin=anonymous><link rel=preload as=font href=https://dmm-com.github.io/pagoda/fonts/LiberationSans-Italic.woff2 type=font/woff2 crossorigin=anonymous><link rel=preload as=font href=https://dmm-com.github.io/pagoda/fonts/LiberationMono.woff2 type=font/woff2 crossorigin=anonymous><link rel=preload as=font href=https://dmm-com.github.io/pagoda/fonts/DroidSans.woff2 type=font/woff2 crossorigin=anonymous><link rel=preload as=font href=https://dmm-com.github.io/pagoda/fonts/GeekdocIcons.woff2 type=font/woff2 crossorigin=anonymous><link rel=preload href=https://dmm-com.github.io/pagoda/main.min.css as=style><link rel=stylesheet href=https://dmm-com.github.io/pagoda/main.min.css media=all><link rel=preload href=https://dmm-com.github.io/pagoda/mobile.min.css as=style><link rel=stylesheet href=https://dmm-com.github.io/pagoda/mobile.min.css media="screen and (max-width: 45rem)"><link rel=preload href=https://dmm-com.github.io/pagoda/print.min.css as=style><link rel=stylesheet href=https://dmm-com.github.io/pagoda/print.min.css media=print><link rel=preload href=https://dmm-com.github.io/pagoda/custom.css as=style><link rel=stylesheet href=https://dmm-com.github.io/pagoda/custom.css media=all></head><body><svg style="position:absolute;width:0;height:0;overflow:hidden" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><symbol viewBox="-2.67 -2.67 29.33 29.33" id="arrow_back" xmlns="http://www.w3.org/2000/svg"><path d="M24 10.526v2.947H5.755l8.351 8.421-2.105 2.105-12-12 12-12 2.105 2.105-8.351 8.421H24z"/></symbol><symbol viewBox="-2.67 -2.67 29.33 29.33" id="arrow_left_alt" xmlns="http://www.w3.org/2000/svg"><path d="M5.965 10.526V6.035L0 12l5.965 5.965v-4.491H24v-2.947H5.965z"/></symbol><symbol viewBox="-2.67 -2.67 29.33 29.33" id="arrow_right_alt" xmlns="http://www.w3.org/2000/svg"><path d="M18.035 10.526V6.035L24 12l-5.965 5.965v-4.491H0v-2.947h18.035z"/></symbol><symbol viewBox="-2.67 -2.67 29.33 29.33" id="bookmark" xmlns="http://www.w3.org/2000/svg"><path d="M15.268 4.392q.868.0 1.532.638t.664 1.506v17.463l-7.659-3.268-7.608 3.268V6.536q0-.868.664-1.506t1.532-.638h10.876zm4.34 14.144V4.392q0-.868-.638-1.532t-1.506-.664H6.537q0-.868.664-1.532T8.733.0h10.876q.868.0 1.532.664t.664 1.532v17.412z"/></symbol><symbol viewBox="-2.67 -2.67 33.33 33.33" id="code" xmlns="http://www.w3.org/2000/svg"><path d="M9.917 24.5a1.75 1.75.0 10-3.501.001 1.75 1.75.0 003.501-.001zm0-21a1.75 1.75.0 10-3.501.001A1.75 1.75.0 009.917 3.5zm11.666 2.333a1.75 1.75.0 10-3.501.001 1.75 1.75.0 003.501-.001zm1.75.0a3.502 3.502.0 01-1.75 3.026c-.055 6.581-4.721 8.039-7.82 9.023-2.898.911-3.846 1.349-3.846 3.117v.474a3.502 3.502.0 011.75 3.026c0 1.932-1.568 3.5-3.5 3.5s-3.5-1.568-3.5-3.5c0-1.294.711-2.424 1.75-3.026V6.526A3.502 3.502.0 014.667 3.5c0-1.932 1.568-3.5 3.5-3.5s3.5 1.568 3.5 3.5a3.502 3.502.0 01-1.75 3.026v9.06c.93-.456 1.914-.766 2.807-1.039 3.391-1.075 5.323-1.878 5.359-5.687a3.502 3.502.0 01-1.75-3.026c0-1.932 1.568-3.5 3.5-3.5s3.5 1.568 3.5 3.5z"/></symbol><symbol viewBox="-2.67 -2.67 37.33 37.33" id="date" xmlns="http://www.w3.org/2000/svg"><path d="M27.192 28.844V11.192H4.808v17.652h22.384zm0-25.689q1.277.0 2.253.976t.976 2.253v22.459q0 1.277-.976 2.216t-2.253.939H4.808q-1.352.0-2.291-.901t-.939-2.253V6.385q0-1.277.939-2.253t2.291-.976h1.577V.001h3.23v3.155h12.769V.001h3.23v3.155h1.577zm-3.155 11.267v3.155h-3.23v-3.155h3.23zm-6.46.0v3.155h-3.155v-3.155h3.155zm-6.384.0v3.155h-3.23v-3.155h3.23z"/></symbol><symbol viewBox="-2.67 -2.67 37.33 37.33" id="download" xmlns="http://www.w3.org/2000/svg"><path d="M2.866 28.209h26.269v3.79H2.866v-3.79zm26.268-16.925L16 24.418 2.866 11.284h7.493V.001h11.283v11.283h7.493z"/></symbol><symbol viewBox="-2.67 -2.67 37.33 37.33" id="email" xmlns="http://www.w3.org/2000/svg"><path d="M28.845 9.615v-3.23L16 14.422 3.155 6.385v3.23L16 17.577zm0-6.46q1.277.0 2.216.977T32 6.385v19.23q0 1.277-.939 2.253t-2.216.977H3.155q-1.277.0-2.216-.977T0 25.615V6.385q0-1.277.939-2.253t2.216-.977h25.69z"/></symbol><symbol viewBox="-2.67 -2.67 37.33 37.33" id="github" xmlns="http://www.w3.org/2000/svg"><path d="M16 .394c8.833.0 15.999 7.166 15.999 15.999.0 7.062-4.583 13.062-10.937 15.187-.813.146-1.104-.354-1.104-.771.0-.521.021-2.25.021-4.396.0-1.5-.5-2.458-1.083-2.958 3.562-.396 7.312-1.75 7.312-7.896.0-1.75-.625-3.167-1.646-4.291.167-.417.708-2.042-.167-4.25-1.333-.417-4.396 1.646-4.396 1.646a15.032 15.032.0 00-8 0S8.937 6.602 7.603 7.018c-.875 2.208-.333 3.833-.167 4.25-1.021 1.125-1.646 2.542-1.646 4.291.0 6.125 3.729 7.5 7.291 7.896-.458.417-.875 1.125-1.021 2.146-.917.417-3.25 1.125-4.646-1.333-.875-1.521-2.458-1.646-2.458-1.646-1.562-.021-.104.979-.104.979 1.042.479 1.771 2.333 1.771 2.333.938 2.854 5.396 1.896 5.396 1.896.0 1.333.021 2.583.021 2.979.0.417-.292.917-1.104.771C4.582 29.455-.001 23.455-.001 16.393-.001 7.56 7.165.394 15.998.394zM6.063 23.372c.042-.083-.021-.187-.146-.25-.125-.042-.229-.021-.271.042-.042.083.021.187.146.25.104.062.229.042.271-.042zm.646.709c.083-.062.062-.208-.042-.333-.104-.104-.25-.146-.333-.062-.083.062-.062.208.042.333.104.104.25.146.333.062zm.625.937c.104-.083.104-.25.0-.396-.083-.146-.25-.208-.354-.125-.104.062-.104.229.0.375s.271.208.354.146zm.875.875c.083-.083.042-.271-.083-.396-.146-.146-.333-.167-.417-.062-.104.083-.062.271.083.396.146.146.333.167.417.062zm1.187.521c.042-.125-.083-.271-.271-.333-.167-.042-.354.021-.396.146s.083.271.271.312c.167.062.354.0.396-.125zm1.313.104c0-.146-.167-.25-.354-.229-.187.0-.333.104-.333.229.0.146.146.25.354.229.187.0.333-.104.333-.229zm1.208-.208c-.021-.125-.187-.208-.375-.187-.187.042-.312.167-.292.312.021.125.187.208.375.167s.312-.167.292-.292z"/></symbol><symbol viewBox="-2.67 -2.67 37.33 37.33" id="heart" xmlns="http://www.w3.org/2000/svg"><path d="M16 29.714a1.11 1.11.0 01-.786-.321L4.072 18.643c-.143-.125-4.071-3.714-4.071-8 0-5.232 3.196-8.357 8.535-8.357 3.125.0 6.053 2.464 7.464 3.857 1.411-1.393 4.339-3.857 7.464-3.857 5.339.0 8.535 3.125 8.535 8.357.0 4.286-3.928 7.875-4.089 8.035L16.785 29.392c-.214.214-.5.321-.786.321z"/></symbol><symbol viewBox="-2.67 -2.67 33.33 33.33" id="keyborad_arrow_down" xmlns="http://www.w3.org/2000/svg"><path d="M3.281 5.36 14 16.079 24.719 5.36 28 8.641l-14 14-14-14z"/></symbol><symbol viewBox="-2.67 -2.67 37.33 37.33" id="keyborad_arrow_left" xmlns="http://www.w3.org/2000/svg"><path d="M25.875 28.25 22.125 32 6.126 16.001 22.125.002l3.75 3.75-12.25 12.25z"/></symbol><symbol viewBox="-2.67 -2.67 37.33 37.33" id="keyborad_arrow_right" xmlns="http://www.w3.org/2000/svg"><path d="M6.125 28.25 18.375 16 6.125 3.75 9.875.0l15.999 15.999L9.875 31.998z"/></symbol><symbol viewBox="-2.67 -2.67 37.33 37.33" id="link" xmlns="http://www.w3.org/2000/svg"><path d="M24.037 7.963q3.305.0 5.634 2.366T32 16t-2.329 5.671-5.634 2.366h-6.46v-3.08h6.46q2.028.0 3.493-1.465t1.465-3.493-1.465-3.493-3.493-1.465h-6.46v-3.08h6.46zM9.615 17.578v-3.155h12.77v3.155H9.615zM3.005 16q0 2.028 1.465 3.493t3.493 1.465h6.46v3.08h-6.46q-3.305.0-5.634-2.366T0 16.001t2.329-5.671 5.634-2.366h6.46v3.08h-6.46q-2.028.0-3.493 1.465t-1.465 3.493z"/></symbol><symbol viewBox="-2.67 -2.67 37.33 37.33" id="menu" xmlns="http://www.w3.org/2000/svg"><path d="M.001 5.334h31.998v3.583H.001V5.334zm0 12.416v-3.5h31.998v3.5H.001zm0 8.916v-3.583h31.998v3.583H.001z"/></symbol><symbol viewBox="-2.67 -2.67 33.33 33.33" id="notification" xmlns="http://www.w3.org/2000/svg"><path d="M22.615 19.384l2.894 2.894v1.413H2.49v-1.413l2.894-2.894V12.25q0-3.365 1.716-5.856t4.745-3.231v-1.01q0-.875.606-1.514T13.999.0t1.548.639.606 1.514v1.01q3.029.74 4.745 3.231t1.716 5.856v7.134zM14 27.999q-1.211.0-2.053-.808t-.841-2.019h5.788q0 1.144-.875 1.986T14 27.999z"/></symbol><symbol viewBox="-2.67 -2.67 33.33 33.33" id="path" xmlns="http://www.w3.org/2000/svg"><path d="M28 12.62h-9.793V8.414h-2.826v11.173h2.826v-4.206H28V26.62h-9.793v-4.206H12.62v-14H9.794v4.206H.001V1.381h9.793v4.206h8.413V1.381H28V12.62z"/></symbol><symbol viewBox="-2.67 -2.67 37.33 37.33" id="person" xmlns="http://www.w3.org/2000/svg"><path d="M16 20.023q5.052.0 10.526 2.199t5.473 5.754v4.023H0v-4.023q0-3.555 5.473-5.754t10.526-2.199zM16 16q-3.275.0-5.614-2.339T8.047 8.047t2.339-5.661T16 0t5.614 2.386 2.339 5.661-2.339 5.614T16 16z"/></symbol><symbol viewBox="-2.67 -2.67 37.33 37.33" id="search" xmlns="http://www.w3.org/2000/svg"><path d="M11.925 20.161q3.432.0 5.834-2.402t2.402-5.834-2.402-5.834-5.834-2.402-5.834 2.402-2.402 5.834 2.402 5.834 5.834 2.402zm10.981.0L32 29.255 29.255 32l-9.094-9.094v-1.458l-.515-.515q-3.26 2.831-7.721 2.831-4.976.0-8.45-3.432T.001 11.925t3.474-8.45 8.45-3.474 8.407 3.474 3.432 8.45q0 1.802-.858 4.075t-1.973 3.646l.515.515h1.458z"/></symbol><symbol viewBox="-2.67 -2.67 33.33 33.33" id="shield" xmlns="http://www.w3.org/2000/svg"><path d="M22.167 15.166V3.5h-8.166v20.726c.93-.492 2.424-1.349 3.883-2.497 1.95-1.531 4.284-3.919 4.284-6.562zm3.499-13.999v14c0 7.674-10.737 12.523-11.192 12.724-.146.073-.31.109-.474.109s-.328-.036-.474-.109c-.456-.201-11.192-5.049-11.192-12.724v-14C2.334.529 2.863.0 3.501.0H24.5c.638.0 1.167.529 1.167 1.167z"/></symbol><symbol viewBox="-2.67 -2.67 33.33 33.33" id="tags" xmlns="http://www.w3.org/2000/svg"><path d="M6.606 7.549c0-1.047-.84-1.887-1.887-1.887s-1.887.84-1.887 1.887.84 1.887 1.887 1.887 1.887-.84 1.887-1.887zm15.732 8.493c0 .501-.206.988-.546 1.327l-7.239 7.254c-.354.339-.84.546-1.342.546s-.988-.206-1.327-.546L1.342 14.066C.59 13.329.0 11.899.0 10.852V4.718a1.9 1.9.0 011.887-1.887h6.134c1.047.0 2.477.59 3.229 1.342L21.792 14.7c.339.354.546.84.546 1.342zm5.661.0c0 .501-.206.988-.546 1.327l-7.239 7.254c-.354.339-.84.546-1.342.546-.767.0-1.15-.354-1.651-.87l6.93-6.93c.339-.339.546-.826.546-1.327s-.206-.988-.546-1.342L13.609 4.173c-.752-.752-2.182-1.342-3.229-1.342h3.303c1.047.0 2.477.59 3.229 1.342L27.454 14.7c.339.354.546.84.546 1.342z"/></symbol><symbol viewBox="-2.67 -2.67 37.33 37.33" id="telescope" xmlns="http://www.w3.org/2000/svg"><path d="M25.026 3.335a.466.466.0 00-.646-.238L13.362 8.91a.463.463.0 00-.216.575l.227.593-6.36 3.488a.462.462.0 00-.205.583l.211.508-6.755 3.228a.463.463.0 00-.228.595l1.386 3.341a.463.463.0 00.583.259l7.056-2.5.211.508a.462.462.0 00.557.267l6.733-1.941.202.527a.46.46.0 00.566.277l12.03-3.702a.46.46.0 00.293-.613L25.026 3.335zM2.109 21.061l-1.049-2.53 6.314-3.018 1.332 3.211-6.596 2.337zm7.857-1.708-.22-.531-1.706-4.113-.22-.53 5.863-3.216 2.197 5.676.347.908-6.261 1.806zm7.505-1.146-.188-.491c-.003-.01-.001-.022-.006-.032l-.572-1.478-2.549-6.668 10.201-5.381 4.249 10.624-11.136 3.428zm8.943-16.723a.463.463.0 00-.86.344l5.552 13.881a.464.464.0 00.602.258.464.464.0 00.258-.602L26.413 1.484zM16.268 20.627h-2.776c-1.055.0-1.851.796-1.851 1.851v1.217l-5.44 6.347a.462.462.0 10.702.602l5.415-6.316h2.101v6.015a.463.463.0 00.926.0v-6.015h2.101l5.414 6.316a.462.462.0 10.703-.602l-5.44-6.347v-1.148c0-1.076-.813-1.92-1.851-1.92zm.925 2.777h-4.627v-.925c0-.545.38-.925.925-.925h2.776c.527.0.925.428.925.995v.856z"/></symbol></svg><div class=wrapper><input type=checkbox class=hidden id=menu-control><header class=gdoc-header><div class="container flex align-center justify-between"><label for=menu-control class=gdoc-nav__control><svg class="icon menu"><use xlink:href="#menu"/></svg><svg class="icon arrow-back"><use xlink:href="#arrow_back"/></svg></label><a class=gdoc-header__link href=https://dmm-com.github.io/pagoda/><span class="gdoc-brand flex align-center"><img class=gdoc-brand__img src=https://dmm-com.github.io/pagoda/media/logo.png alt width=38 height=38>
Pagoda</span></a></div></header><main class="container flex flex-even"><aside class=gdoc-nav><nav><div class=gdoc-search><svg class="icon search"><use xlink:href="#search"/></svg><input type=text id=gdoc-search-input class=gdoc-search__input placeholder=Search... aria-label=Search maxlength=64><div class="gdoc-search__spinner spinner hidden"></div><ul id=gdoc-search-results class=gdoc-search__list></ul></div><section class=gdoc-nav--main><h2>Navigation</h2><ul class=gdoc-nav__list><li><span class=flex>Getting Started</span><ul class=gdoc-nav__list><li><span class=flex><a href=https://dmm-com.github.io/pagoda/getting_started/overview/ class=gdoc-nav__entry>Pagoda Overview</a></span></li><li><span class=flex><a href=https://dmm-com.github.io/pagoda/getting_started/installation/ class=gdoc-nav__entry>Installation and Configuration</a></span></li><li><span class=flex><a href=https://dmm-com.github.io/pagoda/getting_started/tutorial/ class=gdoc-nav__entry>Tutorial</a></span></li><li><span class=flex><a href=https://dmm-com.github.io/pagoda/getting_started/development/ class=gdoc-nav__entry>Development</a></span></li><li><span class=flex><a href=https://dmm-com.github.io/pagoda/getting_started/teckstack/ class=gdoc-nav__entry>Tech Stack</a></span></li></ul></li><li><span class=flex><a href=https://dmm-com.github.io/pagoda/advanced/ class=gdoc-nav__entry>Advanced Topics</a></span><ul class=gdoc-nav__list><li><span class=flex><a href=https://dmm-com.github.io/pagoda/advanced/advanced_search/ class=gdoc-nav__entry>Advanced Search</a></span></li><li><span class=flex><a href=https://dmm-com.github.io/pagoda/advanced/categories/ class=gdoc-nav__entry>Categories</a></span></li><li><span class=flex><a href=https://dmm-com.github.io/pagoda/advanced/frontend_architecture/ class=gdoc-nav__entry>Frontend Architecture</a></span></li><li><span class=flex><a href=https://dmm-com.github.io/pagoda/advanced/google_spreadsheet_linkage/ class=gdoc-nav__entry>Google Spreadsheet Linkage</a></span></li><li><span class=flex><a href=https://dmm-com.github.io/pagoda/advanced/custom_view/ class=gdoc-nav__entry>CustomView</a></span></li><li><span class=flex><a href=https://dmm-com.github.io/pagoda/advanced/plugin_system/ class="gdoc-nav__entry is-active">Plugin System</a></span></li><li><span class=flex><a href=https://dmm-com.github.io/pagoda/advanced/plugin_architecture_diagrams/ class=gdoc-nav__entry>Plugin System Architecture Diagrams</a></span></li><li><span class=flex><a href=https://dmm-com.github.io/pagoda/advanced/plugin_entity_aware_routing/ class=gdoc-nav__entry>Entity-Aware Routing</a></span></li><li><span class=flex><a href=https://dmm-com.github.io/pagoda/advanced/plugin_quickstart_guide/ class=gdoc-nav__entry>Plugin Development Quick Start Guide</a></span></li><li><span class=flex><a href=https://dmm-com.github.io/pagoda/advanced/frontend_plugin_development/ class=gdoc-nav__entry>Frontend Plugin Development</a></span></li></ul></li><li><span class=flex>Release Notes</span><ul class=gdoc-nav__list><li><span class=flex><a href=https://dmm-com.github.io/pagoda/release_note/CHANGELOG/ class=gdoc-nav__entry>Changelog</a></span></li></ul></li></ul></section><section class=gdoc-nav--more><h2>More</h2><ul class=gdoc-nav__list><li><span class=flex><svg class="icon notification"><use xlink:href="#notification"/></svg><a href=https://dmm-com.github.io/pagoda/posts/ class=gdoc-nav__entry>News</a></span></li><li><span class=flex><svg class="icon download"><use xlink:href="#download"/></svg><a href=https://github.com/dmm-com/pagoda/releases class=gdoc-nav__entry>Releases</a></span></li><li><span class=flex><svg class="icon github"><use xlink:href="#github"/></svg><a href=https://github.com/dmm-com/pagoda class=gdoc-nav__entry>View Source</a></span></li></ul></section></nav></aside><div class=gdoc-page><div class="gdoc-page__header flex flex-wrap justify-between hidden-mobile" itemscope itemtype=http://data-vocabulary.org/Breadcrumb><span><span class=breadcrumb><svg class="icon path"><use xlink:href="#path"/></svg><a href=https://dmm-com.github.io/pagoda/>Pagoda</a> / <a href=https://dmm-com.github.io/pagoda/advanced/>Advanced Topics</a> / Plugin System</span></span>
<span></span></div><article class=gdoc-markdown><h1>Plugin System</h1><div class=gdoc-page__anchorwrap><h2 id=overview>Overview<a data-clipboard-text=https://dmm-com.github.io/pagoda/advanced/plugin_system/#overview class="gdoc-page__anchor gdoc-page__anchor--right clip" aria-label="Anchor Overview" href=#overview><svg class="icon link"><use xlink:href="#link"/></svg></a></h2></div><p>Pagoda&rsquo;s plugin system enables extension through completely independent external plugins using a <strong>3-layer architecture</strong>. This system separates plugins from core functionality and provides stable extension points.</p><div class=gdoc-page__anchorwrap><h3 id=3-layer-architecture>3-Layer Architecture<a data-clipboard-text=https://dmm-com.github.io/pagoda/advanced/plugin_system/#3-layer-architecture class="gdoc-page__anchor gdoc-page__anchor--right clip" aria-label="Anchor 3-Layer Architecture" href=#3-layer-architecture><svg class="icon link"><use xlink:href="#link"/></svg></a></h3></div><pre tabindex=0><code>┌─────────────────┐    ┌──────────────────┐    ┌──────────────────┐
│   Core Layer    │    │   Plugin Layer   │    │Extended App Layer│
│                 │    │                  │    │                  │
│pagoda-plugin-sdk│◄───│  External Plugin │◄───│     Pagoda       │
│                 │    │                  │    │                  │
│ • Interfaces    │    │ • Plugin Logic   │    │ • Bridge Impl.   │
│ • Base Classes  │    │ • API Endpoints  │    │ • URL Integration│
│ • Common Hooks  │    │ • Hook Handlers  │    │ • Django Setup   │
└─────────────────┘    └──────────────────┘    └──────────────────┘
</code></pre><div class=gdoc-page__anchorwrap><h3 id=core-capabilities>Core Capabilities<a data-clipboard-text=https://dmm-com.github.io/pagoda/advanced/plugin_system/#core-capabilities class="gdoc-page__anchor gdoc-page__anchor--right clip" aria-label="Anchor Core Capabilities" href=#core-capabilities><svg class="icon link"><use xlink:href="#link"/></svg></a></h3></div><p>Plugins enable the following extensions:</p><ul><li><strong>API v2 Endpoints</strong>: RESTful API extensions</li><li><strong>Hook-Based Extensions</strong>: Intervention and extension of core operations</li><li><strong>Custom Business Logic</strong>: Unique processing and data manipulation</li><li><strong>Authentication & Authorization Integration</strong>: Utilizing Pagoda&rsquo;s permission system</li></ul><div class=gdoc-page__anchorwrap><h2 id=architecture-deep-dive>Architecture Deep Dive<a data-clipboard-text=https://dmm-com.github.io/pagoda/advanced/plugin_system/#architecture-deep-dive class="gdoc-page__anchor gdoc-page__anchor--right clip" aria-label="Anchor Architecture Deep Dive" href=#architecture-deep-dive><svg class="icon link"><use xlink:href="#link"/></svg></a></h2></div><div class=gdoc-page__anchorwrap><h3 id=layer-1-pagoda-plugin-sdk-core-framework>Layer 1: pagoda-plugin-sdk (Core Framework)<a data-clipboard-text=https://dmm-com.github.io/pagoda/advanced/plugin_system/#layer-1-pagoda-plugin-sdk-core-framework class="gdoc-page__anchor gdoc-page__anchor--right clip" aria-label="Anchor Layer 1: pagoda-plugin-sdk (Core Framework)" href=#layer-1-pagoda-plugin-sdk-core-framework><svg class="icon link"><use xlink:href="#link"/></svg></a></h3></div><p>Foundation layer provided as an independent PyPI package:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=c1># pagoda_plugin_sdk provides:</span>
</span></span><span class=line><span class=cl><span class=kn>from</span> <span class=nn>pagoda_plugin_sdk</span> <span class=kn>import</span> <span class=n>Plugin</span><span class=p>,</span> <span class=n>PluginAPIViewMixin</span>
</span></span><span class=line><span class=cl><span class=kn>from</span> <span class=nn>pagoda_plugin_sdk.models</span> <span class=kn>import</span> <span class=n>Entity</span><span class=p>,</span> <span class=n>Entry</span><span class=p>,</span> <span class=n>User</span>
</span></span><span class=line><span class=cl><span class=kn>from</span> <span class=nn>pagoda_plugin_sdk.protocols</span> <span class=kn>import</span> <span class=n>EntityProtocol</span><span class=p>,</span> <span class=n>EntryProtocol</span><span class=p>,</span> <span class=n>UserProtocol</span>
</span></span></code></pre></div><p><strong>Features:</strong></p><ul><li>Distributable via PyPI</li><li>Depends on Django/DRF but not on Pagoda application</li><li>Type-safe Protocol definitions for host models</li><li>Model injection mechanism for accessing host application data</li></ul><div class=gdoc-page__anchorwrap><h3 id=layer-2-external-plugin-independent-extension>Layer 2: External Plugin (Independent Extension)<a data-clipboard-text=https://dmm-com.github.io/pagoda/advanced/plugin_system/#layer-2-external-plugin-independent-extension class="gdoc-page__anchor gdoc-page__anchor--right clip" aria-label="Anchor Layer 2: External Plugin (Independent Extension)" href=#layer-2-external-plugin-independent-extension><svg class="icon link"><use xlink:href="#link"/></svg></a></h3></div><p>Completely independent plugin that depends only on pagoda-plugin-sdk:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=kn>from</span> <span class=nn>pagoda_plugin_sdk</span> <span class=kn>import</span> <span class=n>Plugin</span>
</span></span><span class=line><span class=cl><span class=kn>from</span> <span class=nn>pagoda_plugin_sdk.decorators</span> <span class=kn>import</span> <span class=n>entry_hook</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>MyPlugin</span><span class=p>(</span><span class=n>Plugin</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=nb>id</span> <span class=o>=</span> <span class=s2>&#34;my-plugin&#34;</span>
</span></span><span class=line><span class=cl>    <span class=n>name</span> <span class=o>=</span> <span class=s2>&#34;My Plugin&#34;</span>
</span></span><span class=line><span class=cl>    <span class=n>version</span> <span class=o>=</span> <span class=s2>&#34;1.0.0&#34;</span>
</span></span><span class=line><span class=cl>    <span class=n>django_apps</span> <span class=o>=</span> <span class=p>[</span><span class=s2>&#34;my_plugin&#34;</span><span class=p>]</span>
</span></span><span class=line><span class=cl>    <span class=n>api_v2_patterns</span> <span class=o>=</span> <span class=s2>&#34;my_plugin.api_v2.urls&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=nd>@entry_hook</span><span class=p>(</span><span class=s2>&#34;after_create&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>log_entry_create</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>entity_name</span><span class=p>,</span> <span class=n>user</span><span class=p>,</span> <span class=n>entry</span><span class=p>,</span> <span class=o>**</span><span class=n>kwargs</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;&#34;&#34;Called after an entry is created&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>        <span class=n>logger</span><span class=o>.</span><span class=n>info</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;Entry created: </span><span class=si>{</span><span class=n>entry</span><span class=o>.</span><span class=n>name</span><span class=si>}</span><span class=s2>&#34;</span><span class=p>)</span>
</span></span></code></pre></div><div class=gdoc-page__anchorwrap><h3 id=layer-3-pagoda-application-host-application>Layer 3: Pagoda Application (Host Application)<a data-clipboard-text=https://dmm-com.github.io/pagoda/advanced/plugin_system/#layer-3-pagoda-application-host-application class="gdoc-page__anchor gdoc-page__anchor--right clip" aria-label="Anchor Layer 3: Pagoda Application (Host Application)" href=#layer-3-pagoda-application-host-application><svg class="icon link"><use xlink:href="#link"/></svg></a></h3></div><p>Injects concrete model implementations into the plugin SDK:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=c1># Pagoda injects actual models into the plugin SDK</span>
</span></span><span class=line><span class=cl><span class=kn>from</span> <span class=nn>airone.plugins.integration</span> <span class=kn>import</span> <span class=n>plugin_integration</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># During initialization, real models are injected</span>
</span></span><span class=line><span class=cl><span class=n>plugin_integration</span><span class=o>.</span><span class=n>initialize</span><span class=p>()</span>  <span class=c1># Injects Entity, Entry, User, etc.</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Plugins can then access models through the SDK</span>
</span></span><span class=line><span class=cl><span class=kn>from</span> <span class=nn>pagoda_plugin_sdk.models</span> <span class=kn>import</span> <span class=n>Entity</span><span class=p>,</span> <span class=n>Entry</span><span class=p>,</span> <span class=n>User</span>
</span></span></code></pre></div><div class=gdoc-page__anchorwrap><h2 id=model-access-through-protocols>Model Access through Protocols<a data-clipboard-text=https://dmm-com.github.io/pagoda/advanced/plugin_system/#model-access-through-protocols class="gdoc-page__anchor gdoc-page__anchor--right clip" aria-label="Anchor Model Access through Protocols" href=#model-access-through-protocols><svg class="icon link"><use xlink:href="#link"/></svg></a></h2></div><div class=gdoc-page__anchorwrap><h3 id=overview-1>Overview<a data-clipboard-text=https://dmm-com.github.io/pagoda/advanced/plugin_system/#overview-1 class="gdoc-page__anchor gdoc-page__anchor--right clip" aria-label="Anchor Overview" href=#overview-1><svg class="icon link"><use xlink:href="#link"/></svg></a></h3></div><p>Plugins access host application models through a safe injection mechanism. The SDK provides Protocol-based type definitions that ensure type safety without creating implementation dependencies.</p><div class=gdoc-page__anchorwrap><h3 id=protocol-definitions>Protocol Definitions<a data-clipboard-text=https://dmm-com.github.io/pagoda/advanced/plugin_system/#protocol-definitions class="gdoc-page__anchor gdoc-page__anchor--right clip" aria-label="Anchor Protocol Definitions" href=#protocol-definitions><svg class="icon link"><use xlink:href="#link"/></svg></a></h3></div><p>The SDK defines type-safe protocols for all major models:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=kn>from</span> <span class=nn>pagoda_plugin_sdk.protocols</span> <span class=kn>import</span> <span class=p>(</span>
</span></span><span class=line><span class=cl>    <span class=n>EntityProtocol</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=n>EntryProtocol</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=n>UserProtocol</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=n>EntityAttrProtocol</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=n>AttributeProtocol</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=n>AttributeValueProtocol</span><span class=p>,</span>
</span></span><span class=line><span class=cl><span class=p>)</span>
</span></span></code></pre></div><p><strong>Available Protocols:</strong></p><ul><li><code>EntityProtocol</code> - Schema definition (Entity model)</li><li><code>EntryProtocol</code> - Data entry (Entry model)</li><li><code>UserProtocol</code> - User account</li><li><code>EntityAttrProtocol</code> - Entity attribute definition</li><li><code>AttributeProtocol</code> - Entry attribute</li><li><code>AttributeValueProtocol</code> - Attribute value</li></ul><div class=gdoc-page__anchorwrap><h3 id=model-injection-mechanism>Model Injection Mechanism<a data-clipboard-text=https://dmm-com.github.io/pagoda/advanced/plugin_system/#model-injection-mechanism class="gdoc-page__anchor gdoc-page__anchor--right clip" aria-label="Anchor Model Injection Mechanism" href=#model-injection-mechanism><svg class="icon link"><use xlink:href="#link"/></svg></a></h3></div><p>Models are injected by the host application during initialization:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=c1># In Pagoda application startup</span>
</span></span><span class=line><span class=cl><span class=kn>from</span> <span class=nn>airone.plugins.integration</span> <span class=kn>import</span> <span class=n>plugin_integration</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Initialize plugin system and inject models</span>
</span></span><span class=line><span class=cl><span class=n>plugin_integration</span><span class=o>.</span><span class=n>initialize</span><span class=p>()</span>  <span class=c1># Automatically injects real models</span>
</span></span></code></pre></div><p>The injection process:</p><ol><li>Pagoda application starts</li><li>Plugin system initializes</li><li>Real Django models are injected into <code>pagoda_plugin_sdk.models</code></li><li>Plugins can safely access models through the SDK</li></ol><div class=gdoc-page__anchorwrap><h3 id=accessing-models-in-plugins>Accessing Models in Plugins<a data-clipboard-text=https://dmm-com.github.io/pagoda/advanced/plugin_system/#accessing-models-in-plugins class="gdoc-page__anchor gdoc-page__anchor--right clip" aria-label="Anchor Accessing Models in Plugins" href=#accessing-models-in-plugins><svg class="icon link"><use xlink:href="#link"/></svg></a></h3></div><p><strong>Basic Model Access:</strong></p><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=kn>from</span> <span class=nn>pagoda_plugin_sdk.models</span> <span class=kn>import</span> <span class=n>Entity</span><span class=p>,</span> <span class=n>Entry</span><span class=p>,</span> <span class=n>User</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>def</span> <span class=nf>my_plugin_view</span><span class=p>(</span><span class=n>request</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=c1># Type-safe Entity access</span>
</span></span><span class=line><span class=cl>    <span class=n>entities</span> <span class=o>=</span> <span class=n>Entity</span><span class=o>.</span><span class=n>objects</span><span class=o>.</span><span class=n>filter</span><span class=p>(</span><span class=n>is_active</span><span class=o>=</span><span class=kc>True</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=c1># Type-safe Entry access</span>
</span></span><span class=line><span class=cl>    <span class=n>entries</span> <span class=o>=</span> <span class=n>Entry</span><span class=o>.</span><span class=n>objects</span><span class=o>.</span><span class=n>filter</span><span class=p>(</span><span class=n>schema__name</span><span class=o>=</span><span class=s2>&#34;MyEntity&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=c1># Access with relationships</span>
</span></span><span class=line><span class=cl>    <span class=k>for</span> <span class=n>entry</span> <span class=ow>in</span> <span class=n>entries</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=n>entity_name</span> <span class=o>=</span> <span class=n>entry</span><span class=o>.</span><span class=n>schema</span><span class=o>.</span><span class=n>name</span>  <span class=c1># Type-safe attribute access</span>
</span></span><span class=line><span class=cl>        <span class=n>creator</span> <span class=o>=</span> <span class=n>entry</span><span class=o>.</span><span class=n>created_user</span><span class=o>.</span><span class=n>username</span>
</span></span></code></pre></div><p><strong>Checking Model Availability:</strong></p><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=kn>from</span> <span class=nn>pagoda_plugin_sdk</span> <span class=kn>import</span> <span class=n>models</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Check if models are initialized</span>
</span></span><span class=line><span class=cl><span class=k>if</span> <span class=n>models</span><span class=o>.</span><span class=n>is_initialized</span><span class=p>():</span>
</span></span><span class=line><span class=cl>    <span class=kn>from</span> <span class=nn>pagoda_plugin_sdk.models</span> <span class=kn>import</span> <span class=n>Entity</span>
</span></span><span class=line><span class=cl>    <span class=n>entities</span> <span class=o>=</span> <span class=n>Entity</span><span class=o>.</span><span class=n>objects</span><span class=o>.</span><span class=n>all</span><span class=p>()</span>
</span></span><span class=line><span class=cl><span class=k>else</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=c1># Handle case where plugin system is not initialized</span>
</span></span><span class=line><span class=cl>    <span class=k>raise</span> <span class=ne>RuntimeError</span><span class=p>(</span><span class=s2>&#34;Plugin system not initialized&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Get list of available models</span>
</span></span><span class=line><span class=cl><span class=n>available</span> <span class=o>=</span> <span class=n>models</span><span class=o>.</span><span class=n>get_available_models</span><span class=p>()</span>  <span class=c1># [&#39;Entity&#39;, &#39;Entry&#39;, &#39;User&#39;, ...]</span>
</span></span></code></pre></div><p><strong>Model CRUD Operations:</strong></p><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=kn>from</span> <span class=nn>pagoda_plugin_sdk.models</span> <span class=kn>import</span> <span class=n>Entity</span><span class=p>,</span> <span class=n>Entry</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Create</span>
</span></span><span class=line><span class=cl><span class=n>entity</span> <span class=o>=</span> <span class=n>Entity</span><span class=o>.</span><span class=n>objects</span><span class=o>.</span><span class=n>create</span><span class=p>(</span>
</span></span><span class=line><span class=cl>    <span class=n>name</span><span class=o>=</span><span class=s2>&#34;New Entity&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=n>note</span><span class=o>=</span><span class=s2>&#34;Created by plugin&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=n>created_user</span><span class=o>=</span><span class=n>request</span><span class=o>.</span><span class=n>user</span>
</span></span><span class=line><span class=cl><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Read</span>
</span></span><span class=line><span class=cl><span class=n>entity</span> <span class=o>=</span> <span class=n>Entity</span><span class=o>.</span><span class=n>objects</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=nb>id</span><span class=o>=</span><span class=mi>123</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>entries</span> <span class=o>=</span> <span class=n>Entry</span><span class=o>.</span><span class=n>objects</span><span class=o>.</span><span class=n>filter</span><span class=p>(</span><span class=n>schema</span><span class=o>=</span><span class=n>entity</span><span class=p>,</span> <span class=n>is_active</span><span class=o>=</span><span class=kc>True</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Update</span>
</span></span><span class=line><span class=cl><span class=n>entity</span><span class=o>.</span><span class=n>note</span> <span class=o>=</span> <span class=s2>&#34;Updated by plugin&#34;</span>
</span></span><span class=line><span class=cl><span class=n>entity</span><span class=o>.</span><span class=n>save</span><span class=p>()</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Delete (soft delete)</span>
</span></span><span class=line><span class=cl><span class=n>entity</span><span class=o>.</span><span class=n>is_active</span> <span class=o>=</span> <span class=kc>False</span>
</span></span><span class=line><span class=cl><span class=n>entity</span><span class=o>.</span><span class=n>save</span><span class=p>()</span>
</span></span></code></pre></div><p><strong>Using Entry-Specific Methods:</strong></p><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=kn>from</span> <span class=nn>pagoda_plugin_sdk.models</span> <span class=kn>import</span> <span class=n>Entry</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Get entry with attributes</span>
</span></span><span class=line><span class=cl><span class=n>entry</span> <span class=o>=</span> <span class=n>Entry</span><span class=o>.</span><span class=n>objects</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=nb>id</span><span class=o>=</span><span class=mi>456</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Use Entry&#39;s custom methods (defined in EntryProtocol)</span>
</span></span><span class=line><span class=cl><span class=n>attrs</span> <span class=o>=</span> <span class=n>entry</span><span class=o>.</span><span class=n>get_attrs</span><span class=p>()</span>  <span class=c1># Get all attributes as dict</span>
</span></span><span class=line><span class=cl><span class=n>entry</span><span class=o>.</span><span class=n>set_attrs</span><span class=p>(</span><span class=n>user</span><span class=o>=</span><span class=n>request</span><span class=o>.</span><span class=n>user</span><span class=p>,</span> <span class=n>name</span><span class=o>=</span><span class=s2>&#34;value&#34;</span><span class=p>,</span> <span class=n>age</span><span class=o>=</span><span class=mi>30</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Permission checking</span>
</span></span><span class=line><span class=cl><span class=k>if</span> <span class=n>entry</span><span class=o>.</span><span class=n>may_permitted</span><span class=p>(</span><span class=n>request</span><span class=o>.</span><span class=n>user</span><span class=p>,</span> <span class=n>some_permission</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=c1># Perform operation</span>
</span></span><span class=line><span class=cl>    <span class=k>pass</span>
</span></span></code></pre></div><div class=gdoc-page__anchorwrap><h3 id=type-safety-benefits>Type Safety Benefits<a data-clipboard-text=https://dmm-com.github.io/pagoda/advanced/plugin_system/#type-safety-benefits class="gdoc-page__anchor gdoc-page__anchor--right clip" aria-label="Anchor Type Safety Benefits" href=#type-safety-benefits><svg class="icon link"><use xlink:href="#link"/></svg></a></h3></div><p>Using Protocols provides several advantages:</p><ol><li><strong>IDE Autocomplete</strong>: Full IntelliSense support in modern IDEs</li><li><strong>Type Checking</strong>: Static type checkers (mypy) can verify correctness</li><li><strong>No Import Errors</strong>: No circular dependency issues</li><li><strong>Documentation</strong>: Protocol definitions serve as API documentation</li></ol><p><strong>Example with Type Hints:</strong></p><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=kn>from</span> <span class=nn>typing</span> <span class=kn>import</span> <span class=n>List</span>
</span></span><span class=line><span class=cl><span class=kn>from</span> <span class=nn>pagoda_plugin_sdk.models</span> <span class=kn>import</span> <span class=n>Entity</span><span class=p>,</span> <span class=n>Entry</span>
</span></span><span class=line><span class=cl><span class=kn>from</span> <span class=nn>pagoda_plugin_sdk.protocols</span> <span class=kn>import</span> <span class=n>EntityProtocol</span><span class=p>,</span> <span class=n>EntryProtocol</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>def</span> <span class=nf>get_entries_for_entity</span><span class=p>(</span><span class=n>entity</span><span class=p>:</span> <span class=n>EntityProtocol</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>List</span><span class=p>[</span><span class=n>EntryProtocol</span><span class=p>]:</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;&#34;&#34;Get all active entries for a given entity
</span></span></span><span class=line><span class=cl><span class=s2>
</span></span></span><span class=line><span class=cl><span class=s2>    Args:
</span></span></span><span class=line><span class=cl><span class=s2>        entity: Entity to query entries for
</span></span></span><span class=line><span class=cl><span class=s2>
</span></span></span><span class=line><span class=cl><span class=s2>    Returns:
</span></span></span><span class=line><span class=cl><span class=s2>        List of active Entry instances
</span></span></span><span class=line><span class=cl><span class=s2>    &#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=n>Entry</span><span class=o>.</span><span class=n>objects</span><span class=o>.</span><span class=n>filter</span><span class=p>(</span><span class=n>schema</span><span class=o>=</span><span class=n>entity</span><span class=p>,</span> <span class=n>is_active</span><span class=o>=</span><span class=kc>True</span><span class=p>)</span>
</span></span></code></pre></div><div class=gdoc-page__anchorwrap><h3 id=error-handling>Error Handling<a data-clipboard-text=https://dmm-com.github.io/pagoda/advanced/plugin_system/#error-handling class="gdoc-page__anchor gdoc-page__anchor--right clip" aria-label="Anchor Error Handling" href=#error-handling><svg class="icon link"><use xlink:href="#link"/></svg></a></h3></div><p>Always handle cases where models might not be available:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=kn>from</span> <span class=nn>pagoda_plugin_sdk.models</span> <span class=kn>import</span> <span class=n>Entity</span>
</span></span><span class=line><span class=cl><span class=kn>from</span> <span class=nn>rest_framework.response</span> <span class=kn>import</span> <span class=n>Response</span>
</span></span><span class=line><span class=cl><span class=kn>from</span> <span class=nn>rest_framework</span> <span class=kn>import</span> <span class=n>status</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>def</span> <span class=nf>my_view</span><span class=p>(</span><span class=n>request</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=k>try</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=n>Entity</span> <span class=ow>is</span> <span class=kc>None</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=k>return</span> <span class=n>Response</span><span class=p>(</span>
</span></span><span class=line><span class=cl>                <span class=p>{</span><span class=s2>&#34;error&#34;</span><span class=p>:</span> <span class=s2>&#34;Entity model not available&#34;</span><span class=p>},</span>
</span></span><span class=line><span class=cl>                <span class=n>status</span><span class=o>=</span><span class=n>status</span><span class=o>.</span><span class=n>HTTP_503_SERVICE_UNAVAILABLE</span>
</span></span><span class=line><span class=cl>            <span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=n>entities</span> <span class=o>=</span> <span class=n>Entity</span><span class=o>.</span><span class=n>objects</span><span class=o>.</span><span class=n>filter</span><span class=p>(</span><span class=n>is_active</span><span class=o>=</span><span class=kc>True</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=c1># Process entities...</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>except</span> <span class=ne>Exception</span> <span class=k>as</span> <span class=n>e</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=n>Response</span><span class=p>(</span>
</span></span><span class=line><span class=cl>            <span class=p>{</span><span class=s2>&#34;error&#34;</span><span class=p>:</span> <span class=nb>str</span><span class=p>(</span><span class=n>e</span><span class=p>)},</span>
</span></span><span class=line><span class=cl>            <span class=n>status</span><span class=o>=</span><span class=n>status</span><span class=o>.</span><span class=n>HTTP_500_INTERNAL_SERVER_ERROR</span>
</span></span><span class=line><span class=cl>        <span class=p>)</span>
</span></span></code></pre></div><div class=gdoc-page__anchorwrap><h2 id=getting-started>Getting Started<a data-clipboard-text=https://dmm-com.github.io/pagoda/advanced/plugin_system/#getting-started class="gdoc-page__anchor gdoc-page__anchor--right clip" aria-label="Anchor Getting Started" href=#getting-started><svg class="icon link"><use xlink:href="#link"/></svg></a></h2></div><div class=gdoc-page__anchorwrap><h3 id=prerequisites>Prerequisites<a data-clipboard-text=https://dmm-com.github.io/pagoda/advanced/plugin_system/#prerequisites class="gdoc-page__anchor gdoc-page__anchor--right clip" aria-label="Anchor Prerequisites" href=#prerequisites><svg class="icon link"><use xlink:href="#link"/></svg></a></h3></div><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># Install pagoda-plugin-sdk from Git repository (recommended)</span>
</span></span><span class=line><span class=cl>pip install git+https://github.com/dmm-com/pagoda.git#subdirectory<span class=o>=</span>plugin/sdk
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Or using uv (faster)</span>
</span></span><span class=line><span class=cl>uv pip install git+https://github.com/dmm-com/pagoda.git#subdirectory<span class=o>=</span>plugin/sdk
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Or from local source (for SDK development)</span>
</span></span><span class=line><span class=cl><span class=nb>cd</span> /path/to/pagoda/plugin/sdk
</span></span><span class=line><span class=cl>pip install -e .
</span></span></code></pre></div><div class=gdoc-page__anchorwrap><h3 id=plugin-enablement>Plugin Enablement<a data-clipboard-text=https://dmm-com.github.io/pagoda/advanced/plugin_system/#plugin-enablement class="gdoc-page__anchor gdoc-page__anchor--right clip" aria-label="Anchor Plugin Enablement" href=#plugin-enablement><svg class="icon link"><use xlink:href="#link"/></svg></a></h3></div><p>The plugin system loads only manually specified plugins:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># Enable a single plugin</span>
</span></span><span class=line><span class=cl><span class=nb>export</span> <span class=nv>ENABLED_PLUGINS</span><span class=o>=</span>my-plugin
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Enable multiple plugins (comma-separated)</span>
</span></span><span class=line><span class=cl><span class=nb>export</span> <span class=nv>ENABLED_PLUGINS</span><span class=o>=</span>my-plugin,another-plugin
</span></span></code></pre></div><div class=gdoc-page__anchorwrap><h3 id=starting-server-with-plugins>Starting Server with Plugins<a data-clipboard-text=https://dmm-com.github.io/pagoda/advanced/plugin_system/#starting-server-with-plugins class="gdoc-page__anchor gdoc-page__anchor--right clip" aria-label="Anchor Starting Server with Plugins" href=#starting-server-with-plugins><svg class="icon link"><use xlink:href="#link"/></svg></a></h3></div><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># Start with uv environment (recommended)</span>
</span></span><span class=line><span class=cl><span class=nv>ENABLED_PLUGINS</span><span class=o>=</span>my-plugin uv run python manage.py runserver
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Start with pip environment</span>
</span></span><span class=line><span class=cl><span class=nv>ENABLED_PLUGINS</span><span class=o>=</span>my-plugin python manage.py runserver
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Start after setting environment variable</span>
</span></span><span class=line><span class=cl><span class=nb>export</span> <span class=nv>ENABLED_PLUGINS</span><span class=o>=</span>my-plugin
</span></span><span class=line><span class=cl>python manage.py runserver
</span></span></code></pre></div><p><strong>Important</strong>: Only plugins explicitly specified in <code>ENABLED_PLUGINS</code> are loaded. If none are specified, the plugin system is disabled.</p><div class=gdoc-page__anchorwrap><h2 id=verifying-plugin-operation>Verifying Plugin Operation<a data-clipboard-text=https://dmm-com.github.io/pagoda/advanced/plugin_system/#verifying-plugin-operation class="gdoc-page__anchor gdoc-page__anchor--right clip" aria-label="Anchor Verifying Plugin Operation" href=#verifying-plugin-operation><svg class="icon link"><use xlink:href="#link"/></svg></a></h2></div><div class=gdoc-page__anchorwrap><h3 id=startup-logs>Startup Logs<a data-clipboard-text=https://dmm-com.github.io/pagoda/advanced/plugin_system/#startup-logs class="gdoc-page__anchor gdoc-page__anchor--right clip" aria-label="Anchor Startup Logs" href=#startup-logs><svg class="icon link"><use xlink:href="#link"/></svg></a></h3></div><p>Logs when the plugin system is operating normally:</p><pre tabindex=0><code>[INFO] Initializing plugin system...
[INFO] Starting plugin discovery...
[INFO] Loaded external plugin: hello-world
[INFO] Registered plugin: hello-world-plugin v1.0.0
[INFO] Connected Entry model signals to hook system
[INFO] Pagoda bridge manager initialized successfully
[INFO] Registered 2 hooks for plugin hello-world-plugin
[INFO] Plugin discovery completed. Found 1 plugins.
[INFO] Plugin system initialized successfully
</code></pre><div class=gdoc-page__anchorwrap><h3 id=testing-plugin-apis>Testing Plugin APIs<a data-clipboard-text=https://dmm-com.github.io/pagoda/advanced/plugin_system/#testing-plugin-apis class="gdoc-page__anchor gdoc-page__anchor--right clip" aria-label="Anchor Testing Plugin APIs" href=#testing-plugin-apis><svg class="icon link"><use xlink:href="#link"/></svg></a></h3></div><p>Sample plugin API endpoints:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># Authentication-free test endpoint (for verification)</span>
</span></span><span class=line><span class=cl>curl http://localhost:8000/api/v2/plugins/hello-world-plugin/test/
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Authentication-required endpoints</span>
</span></span><span class=line><span class=cl>curl -H <span class=s2>&#34;Authorization: Token YOUR_TOKEN&#34;</span> <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>     http://localhost:8000/api/v2/plugins/hello-world-plugin/hello/
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>curl -H <span class=s2>&#34;Authorization: Token YOUR_TOKEN&#34;</span> <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>     http://localhost:8000/api/v2/plugins/hello-world-plugin/greet/John/
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>curl -H <span class=s2>&#34;Authorization: Token YOUR_TOKEN&#34;</span> <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>     http://localhost:8000/api/v2/plugins/hello-world-plugin/status/
</span></span></code></pre></div><div class=gdoc-page__anchorwrap><h3 id=expected-response>Expected Response<a data-clipboard-text=https://dmm-com.github.io/pagoda/advanced/plugin_system/#expected-response class="gdoc-page__anchor gdoc-page__anchor--right clip" aria-label="Anchor Expected Response" href=#expected-response><svg class="icon link"><use xlink:href="#link"/></svg></a></h3></div><div class=highlight><pre tabindex=0 class=chroma><code class=language-json data-lang=json><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nt>&#34;message&#34;</span><span class=p>:</span> <span class=s2>&#34;External Hello World Plugin is working via pagoda-core!&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=nt>&#34;plugin&#34;</span><span class=p>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;id&#34;</span><span class=p>:</span> <span class=s2>&#34;hello-world-plugin&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;name&#34;</span><span class=p>:</span> <span class=s2>&#34;Hello World Plugin&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;version&#34;</span><span class=p>:</span> <span class=s2>&#34;1.0.0&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;type&#34;</span><span class=p>:</span> <span class=s2>&#34;external&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;core&#34;</span><span class=p>:</span> <span class=s2>&#34;pagoda-core&#34;</span>
</span></span><span class=line><span class=cl>  <span class=p>},</span>
</span></span><span class=line><span class=cl>  <span class=nt>&#34;test&#34;</span><span class=p>:</span> <span class=s2>&#34;no-auth&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=nt>&#34;user&#34;</span><span class=p>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;username&#34;</span><span class=p>:</span> <span class=s2>&#34;anonymous&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;is_authenticated&#34;</span><span class=p>:</span> <span class=kc>false</span>
</span></span><span class=line><span class=cl>  <span class=p>},</span>
</span></span><span class=line><span class=cl>  <span class=nt>&#34;pagoda_core_version&#34;</span><span class=p>:</span> <span class=s2>&#34;1.0.0&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=nt>&#34;timestamp&#34;</span><span class=p>:</span> <span class=s2>&#34;2025-09-15T02:09:45.658756&#34;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><div class=gdoc-page__anchorwrap><h2 id=plugin-development>Plugin Development<a data-clipboard-text=https://dmm-com.github.io/pagoda/advanced/plugin_system/#plugin-development class="gdoc-page__anchor gdoc-page__anchor--right clip" aria-label="Anchor Plugin Development" href=#plugin-development><svg class="icon link"><use xlink:href="#link"/></svg></a></h2></div><div class=gdoc-page__anchorwrap><h3 id=development-workflow>Development Workflow<a data-clipboard-text=https://dmm-com.github.io/pagoda/advanced/plugin_system/#development-workflow class="gdoc-page__anchor gdoc-page__anchor--right clip" aria-label="Anchor Development Workflow" href=#development-workflow><svg class="icon link"><use xlink:href="#link"/></svg></a></h3></div><div class=gdoc-page__anchorwrap><h4 id=1-create-plugin-structure>1. Create Plugin Structure<a data-clipboard-text=https://dmm-com.github.io/pagoda/advanced/plugin_system/#1-create-plugin-structure class="gdoc-page__anchor gdoc-page__anchor--right clip" aria-label="Anchor 1. Create Plugin Structure" href=#1-create-plugin-structure><svg class="icon link"><use xlink:href="#link"/></svg></a></h4></div><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>mkdir my-pagoda-plugin
</span></span><span class=line><span class=cl><span class=nb>cd</span> my-pagoda-plugin
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Copy from example</span>
</span></span><span class=line><span class=cl>cp -r ../plugin/examples/pagoda-hello-world-plugin/* .
</span></span></code></pre></div><div class=gdoc-page__anchorwrap><h4 id=2-plugin-package-structure>2. Plugin Package Structure<a data-clipboard-text=https://dmm-com.github.io/pagoda/advanced/plugin_system/#2-plugin-package-structure class="gdoc-page__anchor gdoc-page__anchor--right clip" aria-label="Anchor 2. Plugin Package Structure" href=#2-plugin-package-structure><svg class="icon link"><use xlink:href="#link"/></svg></a></h4></div><pre tabindex=0><code>my-pagoda-plugin/
├── pyproject.toml              # Modern package configuration
├── Makefile                    # Development commands
├── README.md                   # Plugin documentation
└── my_plugin_package/          # Main package
    ├── __init__.py
    ├── plugin.py               # Plugin class definition
    ├── hooks.py                # Hook handlers
    ├── apps.py                 # Django app configuration
    └── api_v2/                 # API endpoints
        ├── __init__.py
        ├── urls.py             # URL configuration
        └── views.py            # API view implementation
</code></pre><div class=gdoc-page__anchorwrap><h4 id=3-pyprojecttoml-configuration>3. pyproject.toml Configuration<a data-clipboard-text=https://dmm-com.github.io/pagoda/advanced/plugin_system/#3-pyprojecttoml-configuration class="gdoc-page__anchor gdoc-page__anchor--right clip" aria-label="Anchor 3. pyproject.toml Configuration" href=#3-pyprojecttoml-configuration><svg class="icon link"><use xlink:href="#link"/></svg></a></h4></div><div class=highlight><pre tabindex=0 class=chroma><code class=language-toml data-lang=toml><span class=line><span class=cl><span class=p>[</span><span class=nx>project</span><span class=p>]</span>
</span></span><span class=line><span class=cl><span class=nx>name</span> <span class=p>=</span> <span class=s2>&#34;my-pagoda-plugin&#34;</span>
</span></span><span class=line><span class=cl><span class=nx>version</span> <span class=p>=</span> <span class=s2>&#34;1.0.0&#34;</span>
</span></span><span class=line><span class=cl><span class=nx>description</span> <span class=p>=</span> <span class=s2>&#34;My Pagoda Plugin&#34;</span>
</span></span><span class=line><span class=cl><span class=nx>dependencies</span> <span class=p>=</span> <span class=p>[</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;pagoda-plugin-sdk @ git+https://github.com/dmm-com/pagoda.git#subdirectory=plugin/sdk&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;Django&gt;=3.2&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;djangorestframework&gt;=3.12&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl><span class=p>]</span>
</span></span><span class=line><span class=cl><span class=nx>requires-python</span> <span class=p>=</span> <span class=s2>&#34;&gt;=3.8&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>[</span><span class=nx>project</span><span class=p>.</span><span class=nx>entry-points</span><span class=p>.</span><span class=s2>&#34;pagoda.plugins&#34;</span><span class=p>]</span>
</span></span><span class=line><span class=cl><span class=nx>my-plugin</span> <span class=p>=</span> <span class=s2>&#34;my_plugin_package.plugin:MyPlugin&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>[</span><span class=nx>build-system</span><span class=p>]</span>
</span></span><span class=line><span class=cl><span class=nx>requires</span> <span class=p>=</span> <span class=p>[</span><span class=s2>&#34;hatchling&#34;</span><span class=p>]</span>
</span></span><span class=line><span class=cl><span class=nx>build-backend</span> <span class=p>=</span> <span class=s2>&#34;hatchling.build&#34;</span>
</span></span></code></pre></div><div class=gdoc-page__anchorwrap><h4 id=4-plugin-class-implementation>4. Plugin Class Implementation<a data-clipboard-text=https://dmm-com.github.io/pagoda/advanced/plugin_system/#4-plugin-class-implementation class="gdoc-page__anchor gdoc-page__anchor--right clip" aria-label="Anchor 4. Plugin Class Implementation" href=#4-plugin-class-implementation><svg class="icon link"><use xlink:href="#link"/></svg></a></h4></div><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=kn>from</span> <span class=nn>pagoda_plugin_sdk</span> <span class=kn>import</span> <span class=n>Plugin</span>
</span></span><span class=line><span class=cl><span class=kn>from</span> <span class=nn>pagoda_plugin_sdk.decorators</span> <span class=kn>import</span> <span class=n>entry_hook</span>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=nn>logging</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>logger</span> <span class=o>=</span> <span class=n>logging</span><span class=o>.</span><span class=n>getLogger</span><span class=p>(</span><span class=vm>__name__</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>MyPlugin</span><span class=p>(</span><span class=n>Plugin</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=c1># Required metadata</span>
</span></span><span class=line><span class=cl>    <span class=nb>id</span> <span class=o>=</span> <span class=s2>&#34;my-plugin&#34;</span>
</span></span><span class=line><span class=cl>    <span class=n>name</span> <span class=o>=</span> <span class=s2>&#34;My Plugin&#34;</span>
</span></span><span class=line><span class=cl>    <span class=n>version</span> <span class=o>=</span> <span class=s2>&#34;1.0.0&#34;</span>
</span></span><span class=line><span class=cl>    <span class=n>description</span> <span class=o>=</span> <span class=s2>&#34;My custom Pagoda plugin&#34;</span>
</span></span><span class=line><span class=cl>    <span class=n>author</span> <span class=o>=</span> <span class=s2>&#34;Your Name&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=c1># Django integration</span>
</span></span><span class=line><span class=cl>    <span class=n>django_apps</span> <span class=o>=</span> <span class=p>[</span><span class=s2>&#34;my_plugin_package&#34;</span><span class=p>]</span>
</span></span><span class=line><span class=cl>    <span class=n>api_v2_patterns</span> <span class=o>=</span> <span class=s2>&#34;my_plugin_package.api_v2.urls&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=c1># Hook handlers using decorators</span>
</span></span><span class=line><span class=cl>    <span class=nd>@entry_hook</span><span class=p>(</span><span class=s2>&#34;after_create&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>log_after_create</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>entity_name</span><span class=p>,</span> <span class=n>user</span><span class=p>,</span> <span class=n>entry</span><span class=p>,</span> <span class=o>**</span><span class=n>kwargs</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;&#34;&#34;Called after an entry is created&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>        <span class=n>logger</span><span class=o>.</span><span class=n>info</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;Entry created: </span><span class=si>{</span><span class=n>entry</span><span class=o>.</span><span class=n>name</span><span class=si>}</span><span class=s2> in </span><span class=si>{</span><span class=n>entity_name</span><span class=si>}</span><span class=s2>&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=nd>@entry_hook</span><span class=p>(</span><span class=s2>&#34;before_update&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>log_before_update</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>entity_name</span><span class=p>,</span> <span class=n>user</span><span class=p>,</span> <span class=n>validated_data</span><span class=p>,</span> <span class=n>entry</span><span class=p>,</span> <span class=o>**</span><span class=n>kwargs</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;&#34;&#34;Called before an entry is updated&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>        <span class=n>logger</span><span class=o>.</span><span class=n>info</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;Entry updating: </span><span class=si>{</span><span class=n>entry</span><span class=o>.</span><span class=n>name</span><span class=si>}</span><span class=s2>&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=n>validated_data</span>
</span></span></code></pre></div><div class=gdoc-page__anchorwrap><h4 id=5-api-view-implementation>5. API View Implementation<a data-clipboard-text=https://dmm-com.github.io/pagoda/advanced/plugin_system/#5-api-view-implementation class="gdoc-page__anchor gdoc-page__anchor--right clip" aria-label="Anchor 5. API View Implementation" href=#5-api-view-implementation><svg class="icon link"><use xlink:href="#link"/></svg></a></h4></div><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=kn>from</span> <span class=nn>datetime</span> <span class=kn>import</span> <span class=n>datetime</span>
</span></span><span class=line><span class=cl><span class=kn>from</span> <span class=nn>rest_framework.response</span> <span class=kn>import</span> <span class=n>Response</span>
</span></span><span class=line><span class=cl><span class=kn>from</span> <span class=nn>rest_framework.permissions</span> <span class=kn>import</span> <span class=n>AllowAny</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kn>from</span> <span class=nn>pagoda_plugin_sdk</span> <span class=kn>import</span> <span class=n>PluginAPIViewMixin</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>MyAPIView</span><span class=p>(</span><span class=n>PluginAPIViewMixin</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=n>permission_classes</span> <span class=o>=</span> <span class=p>[</span><span class=n>AllowAny</span><span class=p>]</span>  <span class=c1># For testing</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>get</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>request</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=n>Response</span><span class=p>({</span>
</span></span><span class=line><span class=cl>            <span class=s2>&#34;message&#34;</span><span class=p>:</span> <span class=s2>&#34;Hello from my plugin!&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=s2>&#34;plugin&#34;</span><span class=p>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>                <span class=s2>&#34;id&#34;</span><span class=p>:</span> <span class=bp>self</span><span class=o>.</span><span class=n>plugin_id</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                <span class=s2>&#34;name&#34;</span><span class=p>:</span> <span class=s2>&#34;My Plugin&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                <span class=s2>&#34;version&#34;</span><span class=p>:</span> <span class=s2>&#34;1.0.0&#34;</span>
</span></span><span class=line><span class=cl>            <span class=p>},</span>
</span></span><span class=line><span class=cl>            <span class=s2>&#34;timestamp&#34;</span><span class=p>:</span> <span class=n>datetime</span><span class=o>.</span><span class=n>now</span><span class=p>()</span><span class=o>.</span><span class=n>isoformat</span><span class=p>()</span>
</span></span><span class=line><span class=cl>        <span class=p>})</span>
</span></span></code></pre></div><div class=gdoc-page__anchorwrap><h3 id=development-commands>Development Commands<a data-clipboard-text=https://dmm-com.github.io/pagoda/advanced/plugin_system/#development-commands class="gdoc-page__anchor gdoc-page__anchor--right clip" aria-label="Anchor Development Commands" href=#development-commands><svg class="icon link"><use xlink:href="#link"/></svg></a></h3></div><p>Development Make commands in plugin directory:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>make <span class=nb>help</span>              <span class=c1># Show available commands</span>
</span></span><span class=line><span class=cl>make dev-setup         <span class=c1># Set up development environment</span>
</span></span><span class=line><span class=cl>make install-dev       <span class=c1># Install in development mode</span>
</span></span><span class=line><span class=cl>make <span class=nb>test</span>              <span class=c1># Run plugin tests</span>
</span></span><span class=line><span class=cl>make test-integration  <span class=c1># Run Pagoda integration tests</span>
</span></span><span class=line><span class=cl>make build             <span class=c1># Build distribution packages</span>
</span></span><span class=line><span class=cl>make publish-test      <span class=c1># Publish to TestPyPI</span>
</span></span><span class=line><span class=cl>make publish           <span class=c1># Publish to PyPI</span>
</span></span></code></pre></div><div class=gdoc-page__anchorwrap><h3 id=distribution-strategies>Distribution Strategies<a data-clipboard-text=https://dmm-com.github.io/pagoda/advanced/plugin_system/#distribution-strategies class="gdoc-page__anchor gdoc-page__anchor--right clip" aria-label="Anchor Distribution Strategies" href=#distribution-strategies><svg class="icon link"><use xlink:href="#link"/></svg></a></h3></div><div class=gdoc-page__anchorwrap><h4 id=1-pypi-distribution>1. PyPI Distribution<a data-clipboard-text=https://dmm-com.github.io/pagoda/advanced/plugin_system/#1-pypi-distribution class="gdoc-page__anchor gdoc-page__anchor--right clip" aria-label="Anchor 1. PyPI Distribution" href=#1-pypi-distribution><svg class="icon link"><use xlink:href="#link"/></svg></a></h4></div><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># Build and publish</span>
</span></span><span class=line><span class=cl>make build
</span></span><span class=line><span class=cl>make publish
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Users install the plugin</span>
</span></span><span class=line><span class=cl>pip install my-pagoda-plugin
</span></span></code></pre></div><div class=gdoc-page__anchorwrap><h4 id=2-github-releases>2. GitHub Releases<a data-clipboard-text=https://dmm-com.github.io/pagoda/advanced/plugin_system/#2-github-releases class="gdoc-page__anchor gdoc-page__anchor--right clip" aria-label="Anchor 2. GitHub Releases" href=#2-github-releases><svg class="icon link"><use xlink:href="#link"/></svg></a></h4></div><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># Create tag and release</span>
</span></span><span class=line><span class=cl>git tag v1.0.0
</span></span><span class=line><span class=cl>git push origin v1.0.0
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Users install from GitHub release</span>
</span></span><span class=line><span class=cl>pip install https://github.com/user/my-plugin/releases/download/v1.0.0/my_plugin-1.0.0-py3-none-any.whl
</span></span></code></pre></div><div class=gdoc-page__anchorwrap><h4 id=3-development-installation>3. Development Installation<a data-clipboard-text=https://dmm-com.github.io/pagoda/advanced/plugin_system/#3-development-installation class="gdoc-page__anchor gdoc-page__anchor--right clip" aria-label="Anchor 3. Development Installation" href=#3-development-installation><svg class="icon link"><use xlink:href="#link"/></svg></a></h4></div><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># Development editable install</span>
</span></span><span class=line><span class=cl>pip install -e .
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Development install in uv environment</span>
</span></span><span class=line><span class=cl>pip install -e .
</span></span></code></pre></div><div class=gdoc-page__anchorwrap><h2 id=asynchronous-job-tasks>Asynchronous Job Tasks<a data-clipboard-text=https://dmm-com.github.io/pagoda/advanced/plugin_system/#asynchronous-job-tasks class="gdoc-page__anchor gdoc-page__anchor--right clip" aria-label="Anchor Asynchronous Job Tasks" href=#asynchronous-job-tasks><svg class="icon link"><use xlink:href="#link"/></svg></a></h2></div><p>Plugins can define asynchronous Celery tasks that integrate with Airone&rsquo;s Job system for executing long-running operations in the background.</p><div class=gdoc-page__anchorwrap><h3 id=overview-2>Overview<a data-clipboard-text=https://dmm-com.github.io/pagoda/advanced/plugin_system/#overview-2 class="gdoc-page__anchor gdoc-page__anchor--right clip" aria-label="Anchor Overview" href=#overview-2><svg class="icon link"><use xlink:href="#link"/></svg></a></h3></div><p>The plugin job task system enables:</p><ul><li><strong>Background Execution</strong>: Run time-consuming operations without blocking API responses</li><li><strong>Job UI Integration</strong>: Unified progress tracking through Airone&rsquo;s Job management interface</li><li><strong>Operation Tracking</strong>: Audit trail of who executed what and when</li><li><strong>Status Management</strong>: Automatic handling of job lifecycle states</li></ul><div class=gdoc-page__anchorwrap><h3 id=operation-id-allocation>Operation ID Allocation<a data-clipboard-text=https://dmm-com.github.io/pagoda/advanced/plugin_system/#operation-id-allocation class="gdoc-page__anchor gdoc-page__anchor--right clip" aria-label="Anchor Operation ID Allocation" href=#operation-id-allocation><svg class="icon link"><use xlink:href="#link"/></svg></a></h3></div><p>Each job task requires a unique operation ID for tracking and execution.</p><p><strong>ID Range Allocation:</strong></p><ul><li><strong>1-99</strong>: Core operations (reserved for Airone core)</li><li><strong>100-199</strong>: custom_view operations (reserved for legacy custom views)</li><li><strong>200-9999</strong>: Plugin operations (available for plugin use)</li><li><strong>10000+</strong>: Reserved for future use</li></ul><p><strong>Configuration:</strong></p><p>Operation ID ranges are configured in Airone settings or via environment variable:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=c1># In airone/settings_common.py or as environment variable</span>
</span></span><span class=line><span class=cl><span class=n>PLUGIN_OPERATION_ID_CONFIG</span> <span class=o>=</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;hello-world&#34;</span><span class=p>:</span> <span class=p>(</span><span class=mi>5000</span><span class=p>,</span> <span class=mi>5099</span><span class=p>),</span>      <span class=c1># Plugin ID: (range_start, range_end)</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;my-plugin&#34;</span><span class=p>:</span> <span class=p>(</span><span class=mi>6000</span><span class=p>,</span> <span class=mi>6099</span><span class=p>),</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><p>Each plugin is allocated a range (e.g., 100 IDs from 5000 to 5099). Task operations use offsets within this range:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=c1># Actual operation_id = range_start + offset</span>
</span></span><span class=line><span class=cl><span class=c1># Example: hello-world plugin with offset 0 → operation_id = 5000</span>
</span></span></code></pre></div><div class=gdoc-page__anchorwrap><h3 id=implementing-plugin-tasks>Implementing Plugin Tasks<a data-clipboard-text=https://dmm-com.github.io/pagoda/advanced/plugin_system/#implementing-plugin-tasks class="gdoc-page__anchor gdoc-page__anchor--right clip" aria-label="Anchor Implementing Plugin Tasks" href=#implementing-plugin-tasks><svg class="icon link"><use xlink:href="#link"/></svg></a></h3></div><p>Plugin job tasks follow a four-step implementation pattern:</p><div class=gdoc-page__anchorwrap><h4 id=1-define-operation-offsets-configpy>1. Define Operation Offsets (config.py)<a data-clipboard-text=https://dmm-com.github.io/pagoda/advanced/plugin_system/#1-define-operation-offsets-configpy class="gdoc-page__anchor gdoc-page__anchor--right clip" aria-label="Anchor 1. Define Operation Offsets (config.py)" href=#1-define-operation-offsets-configpy><svg class="icon link"><use xlink:href="#link"/></svg></a></h4></div><p>Create a configuration file defining task offsets and metadata:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=c1># my_plugin/config.py</span>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=nn>enum</span>
</span></span><span class=line><span class=cl><span class=kn>from</span> <span class=nn>airone.lib.plugin_task</span> <span class=kn>import</span> <span class=n>PluginTaskConfig</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>MyPluginOperation</span><span class=p>(</span><span class=nb>int</span><span class=p>,</span> <span class=n>enum</span><span class=o>.</span><span class=n>Enum</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;&#34;&#34;Operation offsets for my-plugin tasks&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>    <span class=n>TASK_A</span> <span class=o>=</span> <span class=mi>0</span>  <span class=c1># offset within allocated range</span>
</span></span><span class=line><span class=cl>    <span class=n>TASK_B</span> <span class=o>=</span> <span class=mi>1</span>
</span></span><span class=line><span class=cl>    <span class=n>TASK_C</span> <span class=o>=</span> <span class=mi>2</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>PLUGIN_TASK_CONFIG</span> <span class=o>=</span> <span class=n>PluginTaskConfig</span><span class=p>(</span>
</span></span><span class=line><span class=cl>    <span class=n>plugin_id</span><span class=o>=</span><span class=s2>&#34;my-plugin&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=n>module_path</span><span class=o>=</span><span class=s2>&#34;my_plugin.tasks&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=n>tasks</span><span class=o>=</span><span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=c1># &#34;operation_name&#34;: (offset, &#34;function_name&#34;)</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;task_a&#34;</span><span class=p>:</span> <span class=p>(</span><span class=n>MyPluginOperation</span><span class=o>.</span><span class=n>TASK_A</span><span class=p>,</span> <span class=s2>&#34;task_a&#34;</span><span class=p>),</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;task_b&#34;</span><span class=p>:</span> <span class=p>(</span><span class=n>MyPluginOperation</span><span class=o>.</span><span class=n>TASK_B</span><span class=p>,</span> <span class=s2>&#34;task_b&#34;</span><span class=p>),</span>
</span></span><span class=line><span class=cl>    <span class=p>},</span>
</span></span><span class=line><span class=cl>    <span class=c1># Optional: specify task behavior</span>
</span></span><span class=line><span class=cl>    <span class=n>hidden_operations</span><span class=o>=</span><span class=p>[</span><span class=s2>&#34;task_b&#34;</span><span class=p>],</span>      <span class=c1># Hide from UI</span>
</span></span><span class=line><span class=cl>    <span class=n>cancelable_operations</span><span class=o>=</span><span class=p>[</span><span class=s2>&#34;task_a&#34;</span><span class=p>],</span>  <span class=c1># Allow user cancellation</span>
</span></span><span class=line><span class=cl><span class=p>)</span>
</span></span></code></pre></div><div class=gdoc-page__anchorwrap><h4 id=2-implement-celery-task-taskspy>2. Implement Celery Task (tasks.py)<a data-clipboard-text=https://dmm-com.github.io/pagoda/advanced/plugin_system/#2-implement-celery-task-taskspy class="gdoc-page__anchor gdoc-page__anchor--right clip" aria-label="Anchor 2. Implement Celery Task (tasks.py)" href=#2-implement-celery-task-taskspy><svg class="icon link"><use xlink:href="#link"/></svg></a></h4></div><p>Create the task implementation with proper decorators:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=c1># my_plugin/tasks.py</span>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=nn>logging</span>
</span></span><span class=line><span class=cl><span class=kn>from</span> <span class=nn>airone.celery</span> <span class=kn>import</span> <span class=n>app</span>
</span></span><span class=line><span class=cl><span class=kn>from</span> <span class=nn>airone.lib.plugin_task</span> <span class=kn>import</span> <span class=n>register_plugin_job_task</span>
</span></span><span class=line><span class=cl><span class=kn>from</span> <span class=nn>job.models</span> <span class=kn>import</span> <span class=n>Job</span><span class=p>,</span> <span class=n>JobStatus</span>
</span></span><span class=line><span class=cl><span class=kn>from</span> <span class=nn>my_plugin.config</span> <span class=kn>import</span> <span class=n>MyPluginOperation</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>logger</span> <span class=o>=</span> <span class=n>logging</span><span class=o>.</span><span class=n>getLogger</span><span class=p>(</span><span class=vm>__name__</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nd>@register_plugin_job_task</span><span class=p>(</span><span class=n>MyPluginOperation</span><span class=o>.</span><span class=n>TASK_A</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=nd>@app.task</span><span class=p>(</span><span class=n>bind</span><span class=o>=</span><span class=kc>True</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=k>def</span> <span class=nf>task_a</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>job_id</span><span class=p>:</span> <span class=nb>int</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;&#34;&#34;Example job task implementation&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>    <span class=k>try</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=n>job</span> <span class=o>=</span> <span class=n>Job</span><span class=o>.</span><span class=n>objects</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=nb>id</span><span class=o>=</span><span class=n>job_id</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=k>except</span> <span class=n>Job</span><span class=o>.</span><span class=n>DoesNotExist</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=n>logger</span><span class=o>.</span><span class=n>error</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;Job </span><span class=si>{</span><span class=n>job_id</span><span class=si>}</span><span class=s2> not found&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=c1># Check if job was canceled by user</span>
</span></span><span class=line><span class=cl>    <span class=k>if</span> <span class=n>job</span><span class=o>.</span><span class=n>is_canceled</span><span class=p>():</span>
</span></span><span class=line><span class=cl>        <span class=n>logger</span><span class=o>.</span><span class=n>info</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;Job </span><span class=si>{</span><span class=n>job_id</span><span class=si>}</span><span class=s2> was canceled&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=c1># Check if job is ready to proceed</span>
</span></span><span class=line><span class=cl>    <span class=k>if</span> <span class=ow>not</span> <span class=n>job</span><span class=o>.</span><span class=n>proceed_if_ready</span><span class=p>():</span>
</span></span><span class=line><span class=cl>        <span class=n>logger</span><span class=o>.</span><span class=n>warning</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;Job </span><span class=si>{</span><span class=n>job_id</span><span class=si>}</span><span class=s2> is not ready&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=c1># Update status to processing</span>
</span></span><span class=line><span class=cl>    <span class=n>job</span><span class=o>.</span><span class=n>update</span><span class=p>(</span><span class=n>JobStatus</span><span class=o>.</span><span class=n>PROCESSING</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>try</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=c1># Your long-running task logic here</span>
</span></span><span class=line><span class=cl>        <span class=n>params</span> <span class=o>=</span> <span class=n>job</span><span class=o>.</span><span class=n>params</span>  <span class=c1># Access job parameters</span>
</span></span><span class=line><span class=cl>        <span class=n>logger</span><span class=o>.</span><span class=n>info</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;Processing job </span><span class=si>{</span><span class=n>job_id</span><span class=si>}</span><span class=s2> with params: </span><span class=si>{</span><span class=n>params</span><span class=si>}</span><span class=s2>&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=c1># Example: process data</span>
</span></span><span class=line><span class=cl>        <span class=kn>import</span> <span class=nn>time</span>
</span></span><span class=line><span class=cl>        <span class=n>time</span><span class=o>.</span><span class=n>sleep</span><span class=p>(</span><span class=mi>10</span><span class=p>)</span>  <span class=c1># Simulate long operation</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=c1># Update status to done</span>
</span></span><span class=line><span class=cl>        <span class=n>job</span><span class=o>.</span><span class=n>update</span><span class=p>(</span><span class=n>JobStatus</span><span class=o>.</span><span class=n>DONE</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=n>logger</span><span class=o>.</span><span class=n>info</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;Job </span><span class=si>{</span><span class=n>job_id</span><span class=si>}</span><span class=s2> completed successfully&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>except</span> <span class=ne>Exception</span> <span class=k>as</span> <span class=n>e</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=n>logger</span><span class=o>.</span><span class=n>error</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;Job </span><span class=si>{</span><span class=n>job_id</span><span class=si>}</span><span class=s2> failed: </span><span class=si>{</span><span class=n>e</span><span class=si>}</span><span class=s2>&#34;</span><span class=p>,</span> <span class=n>exc_info</span><span class=o>=</span><span class=kc>True</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=n>job</span><span class=o>.</span><span class=n>update</span><span class=p>(</span><span class=n>JobStatus</span><span class=o>.</span><span class=n>ERROR</span><span class=p>)</span>
</span></span></code></pre></div><p><strong>Key Implementation Points:</strong></p><ul><li><strong>Double Decorator</strong>: Use both <code>@register_plugin_job_task(offset)</code> and <code>@app.task(bind=True)</code></li><li><strong>Status Checks</strong>: Always check <code>is_canceled()</code> and <code>proceed_if_ready()</code></li><li><strong>Status Updates</strong>: Update job status to PROCESSING, DONE, or ERROR</li><li><strong>Error Handling</strong>: Catch exceptions and update status to ERROR</li></ul><div class=gdoc-page__anchorwrap><h4 id=3-register-in-appconfig-appspy>3. Register in AppConfig (apps.py)<a data-clipboard-text=https://dmm-com.github.io/pagoda/advanced/plugin_system/#3-register-in-appconfig-appspy class="gdoc-page__anchor gdoc-page__anchor--right clip" aria-label="Anchor 3. Register in AppConfig (apps.py)" href=#3-register-in-appconfig-appspy><svg class="icon link"><use xlink:href="#link"/></svg></a></h4></div><p>Register the plugin&rsquo;s task configuration during Django initialization:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=c1># my_plugin/apps.py</span>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=nn>logging</span>
</span></span><span class=line><span class=cl><span class=kn>from</span> <span class=nn>django.apps</span> <span class=kn>import</span> <span class=n>AppConfig</span>
</span></span><span class=line><span class=cl><span class=kn>from</span> <span class=nn>airone.lib.plugin_task</span> <span class=kn>import</span> <span class=n>PluginTaskRegistry</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>logger</span> <span class=o>=</span> <span class=n>logging</span><span class=o>.</span><span class=n>getLogger</span><span class=p>(</span><span class=vm>__name__</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>MyPluginConfig</span><span class=p>(</span><span class=n>AppConfig</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=n>default_auto_field</span> <span class=o>=</span> <span class=s2>&#34;django.db.models.BigAutoField&#34;</span>
</span></span><span class=line><span class=cl>    <span class=n>name</span> <span class=o>=</span> <span class=s2>&#34;my_plugin&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>ready</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;&#34;&#34;Called when Django app is ready&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>        <span class=kn>from</span> <span class=nn>my_plugin.config</span> <span class=kn>import</span> <span class=n>PLUGIN_TASK_CONFIG</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=c1># Register plugin tasks with global registry</span>
</span></span><span class=line><span class=cl>        <span class=n>PluginTaskRegistry</span><span class=o>.</span><span class=n>register</span><span class=p>(</span><span class=n>PLUGIN_TASK_CONFIG</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=n>logger</span><span class=o>.</span><span class=n>info</span><span class=p>(</span><span class=s2>&#34;Plugin tasks registered successfully&#34;</span><span class=p>)</span>
</span></span></code></pre></div><div class=gdoc-page__anchorwrap><h4 id=4-trigger-job-from-api-api_v2viewspy>4. Trigger Job from API (api_v2/views.py)<a data-clipboard-text=https://dmm-com.github.io/pagoda/advanced/plugin_system/#4-trigger-job-from-api-api_v2viewspy class="gdoc-page__anchor gdoc-page__anchor--right clip" aria-label="Anchor 4. Trigger Job from API (api_v2/views.py)" href=#4-trigger-job-from-api-api_v2viewspy><svg class="icon link"><use xlink:href="#link"/></svg></a></h4></div><p>Create an API endpoint to trigger the job:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=c1># my_plugin/api_v2/views.py</span>
</span></span><span class=line><span class=cl><span class=kn>from</span> <span class=nn>rest_framework.response</span> <span class=kn>import</span> <span class=n>Response</span>
</span></span><span class=line><span class=cl><span class=kn>from</span> <span class=nn>rest_framework</span> <span class=kn>import</span> <span class=n>status</span>
</span></span><span class=line><span class=cl><span class=kn>from</span> <span class=nn>pagoda_plugin_sdk</span> <span class=kn>import</span> <span class=n>PluginAPIViewMixin</span>
</span></span><span class=line><span class=cl><span class=kn>from</span> <span class=nn>airone.lib.plugin_task</span> <span class=kn>import</span> <span class=n>PluginTaskRegistry</span>
</span></span><span class=line><span class=cl><span class=kn>from</span> <span class=nn>job.models</span> <span class=kn>import</span> <span class=n>Job</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>TaskView</span><span class=p>(</span><span class=n>PluginAPIViewMixin</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>post</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>request</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;&#34;&#34;Trigger a background job task&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>        <span class=k>try</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=c1># Get operation_id from registry</span>
</span></span><span class=line><span class=cl>            <span class=n>operation_id</span> <span class=o>=</span> <span class=n>PluginTaskRegistry</span><span class=o>.</span><span class=n>get_operation_id</span><span class=p>(</span>
</span></span><span class=line><span class=cl>                <span class=s2>&#34;my-plugin&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                <span class=s2>&#34;task_a&#34;</span>
</span></span><span class=line><span class=cl>            <span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>            <span class=c1># Create new job</span>
</span></span><span class=line><span class=cl>            <span class=n>job</span> <span class=o>=</span> <span class=n>Job</span><span class=o>.</span><span class=n>_create_new_job</span><span class=p>(</span>
</span></span><span class=line><span class=cl>                <span class=n>user</span><span class=o>=</span><span class=n>request</span><span class=o>.</span><span class=n>user</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                <span class=n>target</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>  <span class=c1># Optional: ACL object for permission checks</span>
</span></span><span class=line><span class=cl>                <span class=n>operation</span><span class=o>=</span><span class=n>operation_id</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                <span class=n>text</span><span class=o>=</span><span class=s2>&#34;Task A Processing&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                <span class=n>params</span><span class=o>=</span><span class=p>{</span>
</span></span><span class=line><span class=cl>                    <span class=s2>&#34;input_data&#34;</span><span class=p>:</span> <span class=n>request</span><span class=o>.</span><span class=n>data</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&#34;input&#34;</span><span class=p>),</span>
</span></span><span class=line><span class=cl>                    <span class=s2>&#34;options&#34;</span><span class=p>:</span> <span class=n>request</span><span class=o>.</span><span class=n>data</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&#34;options&#34;</span><span class=p>,</span> <span class=p>{}),</span>
</span></span><span class=line><span class=cl>                <span class=p>},</span>
</span></span><span class=line><span class=cl>            <span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>            <span class=c1># Queue job for execution</span>
</span></span><span class=line><span class=cl>            <span class=n>job</span><span class=o>.</span><span class=n>run</span><span class=p>()</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>            <span class=k>return</span> <span class=n>Response</span><span class=p>({</span>
</span></span><span class=line><span class=cl>                <span class=s2>&#34;message&#34;</span><span class=p>:</span> <span class=s2>&#34;Task queued successfully&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                <span class=s2>&#34;job_id&#34;</span><span class=p>:</span> <span class=n>job</span><span class=o>.</span><span class=n>id</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=p>},</span> <span class=n>status</span><span class=o>=</span><span class=n>status</span><span class=o>.</span><span class=n>HTTP_201_CREATED</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=k>except</span> <span class=ne>Exception</span> <span class=k>as</span> <span class=n>e</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=k>return</span> <span class=n>Response</span><span class=p>(</span>
</span></span><span class=line><span class=cl>                <span class=p>{</span><span class=s2>&#34;error&#34;</span><span class=p>:</span> <span class=nb>str</span><span class=p>(</span><span class=n>e</span><span class=p>)},</span>
</span></span><span class=line><span class=cl>                <span class=n>status</span><span class=o>=</span><span class=n>status</span><span class=o>.</span><span class=n>HTTP_500_INTERNAL_SERVER_ERROR</span>
</span></span><span class=line><span class=cl>            <span class=p>)</span>
</span></span></code></pre></div><div class=gdoc-page__anchorwrap><h3 id=job-lifecycle>Job Lifecycle<a data-clipboard-text=https://dmm-com.github.io/pagoda/advanced/plugin_system/#job-lifecycle class="gdoc-page__anchor gdoc-page__anchor--right clip" aria-label="Anchor Job Lifecycle" href=#job-lifecycle><svg class="icon link"><use xlink:href="#link"/></svg></a></h3></div><p>Jobs follow a standard lifecycle with automatic state transitions:</p><pre tabindex=0><code>API Request
    ↓
Job._create_new_job()
    ↓ (status = PREPARING)
    ↓
job.run()
    ↓ (Celery task queued)
    ↓
Task Handler executes
    ↓ (status = PROCESSING)
    ↓
Business logic execution
    ↓
    ├─ Success → status = DONE
    └─ Failure → status = ERROR

User can cancel → status = CANCELED
</code></pre><p><strong>Job Status Values:</strong></p><ul><li><code>PREPARING</code>: Job created, waiting to start</li><li><code>PROCESSING</code>: Task is currently executing</li><li><code>DONE</code>: Task completed successfully</li><li><code>ERROR</code>: Task failed with an error</li><li><code>CANCELED</code>: User canceled the job</li></ul><div class=gdoc-page__anchorwrap><h3 id=best-practices>Best Practices<a data-clipboard-text=https://dmm-com.github.io/pagoda/advanced/plugin_system/#best-practices class="gdoc-page__anchor gdoc-page__anchor--right clip" aria-label="Anchor Best Practices" href=#best-practices><svg class="icon link"><use xlink:href="#link"/></svg></a></h3></div><div class=gdoc-page__anchorwrap><h4 id=1-always-check-job-status>1. Always Check Job Status<a data-clipboard-text=https://dmm-com.github.io/pagoda/advanced/plugin_system/#1-always-check-job-status class="gdoc-page__anchor gdoc-page__anchor--right clip" aria-label="Anchor 1. Always Check Job Status" href=#1-always-check-job-status><svg class="icon link"><use xlink:href="#link"/></svg></a></h4></div><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=nd>@app.task</span><span class=p>(</span><span class=n>bind</span><span class=o>=</span><span class=kc>True</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=k>def</span> <span class=nf>my_task</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>job_id</span><span class=p>:</span> <span class=nb>int</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=n>job</span> <span class=o>=</span> <span class=n>Job</span><span class=o>.</span><span class=n>objects</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=nb>id</span><span class=o>=</span><span class=n>job_id</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=c1># Check if user canceled</span>
</span></span><span class=line><span class=cl>    <span class=k>if</span> <span class=n>job</span><span class=o>.</span><span class=n>is_canceled</span><span class=p>():</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=c1># Check if dependencies are met</span>
</span></span><span class=line><span class=cl>    <span class=k>if</span> <span class=ow>not</span> <span class=n>job</span><span class=o>.</span><span class=n>proceed_if_ready</span><span class=p>():</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=c1># Proceed with task...</span>
</span></span></code></pre></div><div class=gdoc-page__anchorwrap><h4 id=2-update-status-appropriately>2. Update Status Appropriately<a data-clipboard-text=https://dmm-com.github.io/pagoda/advanced/plugin_system/#2-update-status-appropriately class="gdoc-page__anchor gdoc-page__anchor--right clip" aria-label="Anchor 2. Update Status Appropriately" href=#2-update-status-appropriately><svg class="icon link"><use xlink:href="#link"/></svg></a></h4></div><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=c1># When starting work</span>
</span></span><span class=line><span class=cl><span class=n>job</span><span class=o>.</span><span class=n>update</span><span class=p>(</span><span class=n>JobStatus</span><span class=o>.</span><span class=n>PROCESSING</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># When successful</span>
</span></span><span class=line><span class=cl><span class=n>job</span><span class=o>.</span><span class=n>update</span><span class=p>(</span><span class=n>JobStatus</span><span class=o>.</span><span class=n>DONE</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># When failed</span>
</span></span><span class=line><span class=cl><span class=n>job</span><span class=o>.</span><span class=n>update</span><span class=p>(</span><span class=n>JobStatus</span><span class=o>.</span><span class=n>ERROR</span><span class=p>)</span>
</span></span></code></pre></div><div class=gdoc-page__anchorwrap><h4 id=3-handle-errors-gracefully>3. Handle Errors Gracefully<a data-clipboard-text=https://dmm-com.github.io/pagoda/advanced/plugin_system/#3-handle-errors-gracefully class="gdoc-page__anchor gdoc-page__anchor--right clip" aria-label="Anchor 3. Handle Errors Gracefully" href=#3-handle-errors-gracefully><svg class="icon link"><use xlink:href="#link"/></svg></a></h4></div><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=k>try</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=c1># Task logic</span>
</span></span><span class=line><span class=cl>    <span class=n>result</span> <span class=o>=</span> <span class=n>perform_operation</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    <span class=n>job</span><span class=o>.</span><span class=n>update</span><span class=p>(</span><span class=n>JobStatus</span><span class=o>.</span><span class=n>DONE</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=k>except</span> <span class=n>SpecificException</span> <span class=k>as</span> <span class=n>e</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=n>logger</span><span class=o>.</span><span class=n>error</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;Specific error: </span><span class=si>{</span><span class=n>e</span><span class=si>}</span><span class=s2>&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=n>job</span><span class=o>.</span><span class=n>update</span><span class=p>(</span><span class=n>JobStatus</span><span class=o>.</span><span class=n>ERROR</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=k>except</span> <span class=ne>Exception</span> <span class=k>as</span> <span class=n>e</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=n>logger</span><span class=o>.</span><span class=n>error</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;Unexpected error: </span><span class=si>{</span><span class=n>e</span><span class=si>}</span><span class=s2>&#34;</span><span class=p>,</span> <span class=n>exc_info</span><span class=o>=</span><span class=kc>True</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=n>job</span><span class=o>.</span><span class=n>update</span><span class=p>(</span><span class=n>JobStatus</span><span class=o>.</span><span class=n>ERROR</span><span class=p>)</span>
</span></span></code></pre></div><div class=gdoc-page__anchorwrap><h4 id=4-use-meaningful-job-text>4. Use Meaningful Job Text<a data-clipboard-text=https://dmm-com.github.io/pagoda/advanced/plugin_system/#4-use-meaningful-job-text class="gdoc-page__anchor gdoc-page__anchor--right clip" aria-label="Anchor 4. Use Meaningful Job Text" href=#4-use-meaningful-job-text><svg class="icon link"><use xlink:href="#link"/></svg></a></h4></div><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=c1># Good: Descriptive job text</span>
</span></span><span class=line><span class=cl><span class=n>job</span> <span class=o>=</span> <span class=n>Job</span><span class=o>.</span><span class=n>_create_new_job</span><span class=p>(</span>
</span></span><span class=line><span class=cl>    <span class=n>user</span><span class=o>=</span><span class=n>request</span><span class=o>.</span><span class=n>user</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=n>operation</span><span class=o>=</span><span class=n>operation_id</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=n>text</span><span class=o>=</span><span class=sa>f</span><span class=s2>&#34;Processing </span><span class=si>{</span><span class=n>entity_name</span><span class=si>}</span><span class=s2> export (</span><span class=si>{</span><span class=nb>len</span><span class=p>(</span><span class=n>entries</span><span class=p>)</span><span class=si>}</span><span class=s2> entries)&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Bad: Generic text</span>
</span></span><span class=line><span class=cl><span class=n>job</span> <span class=o>=</span> <span class=n>Job</span><span class=o>.</span><span class=n>_create_new_job</span><span class=p>(</span>
</span></span><span class=line><span class=cl>    <span class=n>user</span><span class=o>=</span><span class=n>request</span><span class=o>.</span><span class=n>user</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=n>operation</span><span class=o>=</span><span class=n>operation_id</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=n>text</span><span class=o>=</span><span class=s2>&#34;Processing&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl><span class=p>)</span>
</span></span></code></pre></div><div class=gdoc-page__anchorwrap><h4 id=5-test-with-celery-worker>5. Test with Celery Worker<a data-clipboard-text=https://dmm-com.github.io/pagoda/advanced/plugin_system/#5-test-with-celery-worker class="gdoc-page__anchor gdoc-page__anchor--right clip" aria-label="Anchor 5. Test with Celery Worker" href=#5-test-with-celery-worker><svg class="icon link"><use xlink:href="#link"/></svg></a></h4></div><p>Always test plugin tasks with a running Celery worker:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># Terminal 1: Start Celery worker</span>
</span></span><span class=line><span class=cl>uv run celery -A airone worker -l info
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Terminal 2: Start Django server</span>
</span></span><span class=line><span class=cl><span class=nv>ENABLED_PLUGINS</span><span class=o>=</span>my-plugin python manage.py runserver
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Terminal 3: Trigger task</span>
</span></span><span class=line><span class=cl>curl -X POST http://localhost:8000/api/v2/plugins/my-plugin/task/ <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>  -H <span class=s2>&#34;Content-Type: application/json&#34;</span> <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>  -H <span class=s2>&#34;Authorization: Token YOUR_TOKEN&#34;</span> <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>  -d <span class=s1>&#39;{&#34;input&#34;: &#34;test data&#34;}&#39;</span>
</span></span></code></pre></div><div class=gdoc-page__anchorwrap><h3 id=validation-at-startup>Validation at Startup<a data-clipboard-text=https://dmm-com.github.io/pagoda/advanced/plugin_system/#validation-at-startup class="gdoc-page__anchor gdoc-page__anchor--right clip" aria-label="Anchor Validation at Startup" href=#validation-at-startup><svg class="icon link"><use xlink:href="#link"/></svg></a></h3></div><p>Django automatically validates all plugin operation IDs during startup:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=c1># In airone/job/apps.py</span>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>JobConfig</span><span class=p>(</span><span class=n>AppConfig</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>ready</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=n>PluginTaskRegistry</span><span class=o>.</span><span class=n>validate_all</span><span class=p>()</span>
</span></span></code></pre></div><p><strong>Validation Checks:</strong></p><ol><li><strong>Range Conflicts</strong>: Ensures no overlap between plugin ID ranges</li><li><strong>Offset Bounds</strong>: Verifies all offsets are within allocated range</li><li><strong>Missing Registration</strong>: Detects plugins without registry entries</li></ol><p><strong>Example Validation Error:</strong></p><pre tabindex=0><code>django.core.exceptions.ImproperlyConfigured: Plugin &#39;my-plugin&#39; operation &#39;task_a&#39;
with offset 150 exceeds allocated range (6000, 6099). Maximum offset is 99.
</code></pre><p>If validation fails, Django will not start, preventing deployment of misconfigured plugins.</p><div class=gdoc-page__anchorwrap><h3 id=checking-job-status>Checking Job Status<a data-clipboard-text=https://dmm-com.github.io/pagoda/advanced/plugin_system/#checking-job-status class="gdoc-page__anchor gdoc-page__anchor--right clip" aria-label="Anchor Checking Job Status" href=#checking-job-status><svg class="icon link"><use xlink:href="#link"/></svg></a></h3></div><p>Users can check job status through the standard Job API:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># Get job details</span>
</span></span><span class=line><span class=cl>curl http://localhost:8000/api/v2/jobs/&lt;job_id&gt;/ <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>  -H <span class=s2>&#34;Authorization: Token YOUR_TOKEN&#34;</span>
</span></span></code></pre></div><p><strong>Response:</strong></p><div class=highlight><pre tabindex=0 class=chroma><code class=language-json data-lang=json><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nt>&#34;id&#34;</span><span class=p>:</span> <span class=mi>123</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=nt>&#34;user&#34;</span><span class=p>:</span> <span class=p>{</span><span class=nt>&#34;id&#34;</span><span class=p>:</span> <span class=mi>1</span><span class=p>,</span> <span class=nt>&#34;username&#34;</span><span class=p>:</span> <span class=s2>&#34;admin&#34;</span><span class=p>},</span>
</span></span><span class=line><span class=cl>  <span class=nt>&#34;text&#34;</span><span class=p>:</span> <span class=s2>&#34;Task A Processing&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=nt>&#34;status&#34;</span><span class=p>:</span> <span class=s2>&#34;DONE&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=nt>&#34;operation&#34;</span><span class=p>:</span> <span class=mi>6000</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=nt>&#34;created_at&#34;</span><span class=p>:</span> <span class=s2>&#34;2025-11-01T12:00:00Z&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=nt>&#34;updated_at&#34;</span><span class=p>:</span> <span class=s2>&#34;2025-11-01T12:00:10Z&#34;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><div class=gdoc-page__anchorwrap><h3 id=complete-example>Complete Example<a data-clipboard-text=https://dmm-com.github.io/pagoda/advanced/plugin_system/#complete-example class="gdoc-page__anchor gdoc-page__anchor--right clip" aria-label="Anchor Complete Example" href=#complete-example><svg class="icon link"><use xlink:href="#link"/></svg></a></h3></div><p>For a complete working example, see the hello-world-plugin implementation at:</p><pre tabindex=0><code>plugin/examples/pagoda-hello-world-plugin/
├── pagoda_hello_world_plugin/
│   ├── config.py           # Operation offset definitions
│   ├── tasks.py            # Celery task implementations
│   ├── apps.py             # Task registry registration
│   └── api_v2/
│       └── views.py        # API endpoint for job creation
</code></pre><p>The example demonstrates:</p><ul><li>Operation offset enumeration</li><li>Task implementation with proper decorators</li><li>Registry registration in AppConfig</li><li>API endpoint for triggering jobs</li><li>Status checking and error handling</li></ul><div class=gdoc-page__anchorwrap><h2 id=sample-plugin-reference>Sample Plugin Reference<a data-clipboard-text=https://dmm-com.github.io/pagoda/advanced/plugin_system/#sample-plugin-reference class="gdoc-page__anchor gdoc-page__anchor--right clip" aria-label="Anchor Sample Plugin Reference" href=#sample-plugin-reference><svg class="icon link"><use xlink:href="#link"/></svg></a></h2></div><div class=gdoc-page__anchorwrap><h3 id=available-example>Available Example<a data-clipboard-text=https://dmm-com.github.io/pagoda/advanced/plugin_system/#available-example class="gdoc-page__anchor gdoc-page__anchor--right clip" aria-label="Anchor Available Example" href=#available-example><svg class="icon link"><use xlink:href="#link"/></svg></a></h3></div><p>A complete sample plugin is available at <code>plugin/examples/pagoda-hello-world-plugin/</code>:</p><p><strong>Endpoints:</strong></p><ul><li><code>GET /api/v2/plugins/hello-world-plugin/test/</code> - Authentication-free test</li><li><code>GET /api/v2/plugins/hello-world-plugin/hello/</code> - Basic Hello API</li><li><code>POST /api/v2/plugins/hello-world-plugin/hello/</code> - Custom message API</li><li><code>GET /api/v2/plugins/hello-world-plugin/greet/&lt;name>/</code> - Personalized greeting</li><li><code>GET /api/v2/plugins/hello-world-plugin/status/</code> - Plugin status</li><li><code>GET /api/v2/plugins/hello-world-plugin/entities/</code> - List all entities (demonstrates model access)</li><li><code>GET /api/v2/plugins/hello-world-plugin/entities/&lt;id>/</code> - Get entity details</li><li><code>GET /api/v2/plugins/hello-world-plugin/entries/</code> - List entries with filtering</li><li><code>GET /api/v2/plugins/hello-world-plugin/entries/&lt;id>/</code> - Get entry with attributes</li></ul><p><strong>Model Access Examples:</strong></p><p>The sample plugin demonstrates how to access host application models:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=kn>from</span> <span class=nn>pagoda_plugin_sdk</span> <span class=kn>import</span> <span class=n>PluginAPIViewMixin</span>
</span></span><span class=line><span class=cl><span class=kn>from</span> <span class=nn>pagoda_plugin_sdk.models</span> <span class=kn>import</span> <span class=n>Entity</span><span class=p>,</span> <span class=n>Entry</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>EntityListView</span><span class=p>(</span><span class=n>PluginAPIViewMixin</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>get</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>request</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=c1># Type-safe entity access</span>
</span></span><span class=line><span class=cl>        <span class=n>entities</span> <span class=o>=</span> <span class=n>Entity</span><span class=o>.</span><span class=n>objects</span><span class=o>.</span><span class=n>filter</span><span class=p>(</span><span class=n>is_active</span><span class=o>=</span><span class=kc>True</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=n>entity_list</span> <span class=o>=</span> <span class=p>[</span>
</span></span><span class=line><span class=cl>            <span class=p>{</span>
</span></span><span class=line><span class=cl>                <span class=s2>&#34;id&#34;</span><span class=p>:</span> <span class=n>entity</span><span class=o>.</span><span class=n>id</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                <span class=s2>&#34;name&#34;</span><span class=p>:</span> <span class=n>entity</span><span class=o>.</span><span class=n>name</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                <span class=s2>&#34;note&#34;</span><span class=p>:</span> <span class=n>entity</span><span class=o>.</span><span class=n>note</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=p>}</span>
</span></span><span class=line><span class=cl>            <span class=k>for</span> <span class=n>entity</span> <span class=ow>in</span> <span class=n>entities</span>
</span></span><span class=line><span class=cl>        <span class=p>]</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=n>Response</span><span class=p>({</span><span class=s2>&#34;entities&#34;</span><span class=p>:</span> <span class=n>entity_list</span><span class=p>})</span>
</span></span></code></pre></div><div class=gdoc-page__anchorwrap><h2 id=backend-plugin-entity-overrides>Backend Plugin Entity Overrides<a data-clipboard-text=https://dmm-com.github.io/pagoda/advanced/plugin_system/#backend-plugin-entity-overrides class="gdoc-page__anchor gdoc-page__anchor--right clip" aria-label="Anchor Backend Plugin Entity Overrides" href=#backend-plugin-entity-overrides><svg class="icon link"><use xlink:href="#link"/></svg></a></h2></div><p>Plugins can override standard Entry API operations for specific entities. This allows custom handling of create, retrieve, update, delete, and list operations without modifying core code.</p><div class=gdoc-page__anchorwrap><h3 id=configuration>Configuration<a data-clipboard-text=https://dmm-com.github.io/pagoda/advanced/plugin_system/#configuration class="gdoc-page__anchor gdoc-page__anchor--right clip" aria-label="Anchor Configuration" href=#configuration><svg class="icon link"><use xlink:href="#link"/></svg></a></h3></div><p>Configure backend overrides in <code>settings_common.py</code> or via environment variable:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=c1># airone/settings_common.py</span>
</span></span><span class=line><span class=cl><span class=n>AIRONE</span> <span class=o>=</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=c1># ... other settings ...</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=c1># Backend plugin entity override configuration</span>
</span></span><span class=line><span class=cl>    <span class=c1># Format: { &#34;entityId&#34;: { &#34;plugin&#34;: &#34;plugin-id&#34;, &#34;operations&#34;: [...], &#34;params&#34;: {...} } }</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;BACKEND_PLUGIN_ENTITY_OVERRIDES&#34;</span><span class=p>:</span> <span class=n>json</span><span class=o>.</span><span class=n>loads</span><span class=p>(</span>
</span></span><span class=line><span class=cl>        <span class=n>env</span><span class=o>.</span><span class=n>str</span><span class=p>(</span>
</span></span><span class=line><span class=cl>            <span class=s2>&#34;BACKEND_PLUGIN_ENTITY_OVERRIDES&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=n>json</span><span class=o>.</span><span class=n>dumps</span><span class=p>({}),</span>  <span class=c1># Default: no overrides</span>
</span></span><span class=line><span class=cl>        <span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=p>),</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><div class=gdoc-page__anchorwrap><h3 id=configuration-format>Configuration Format<a data-clipboard-text=https://dmm-com.github.io/pagoda/advanced/plugin_system/#configuration-format class="gdoc-page__anchor gdoc-page__anchor--right clip" aria-label="Anchor Configuration Format" href=#configuration-format><svg class="icon link"><use xlink:href="#link"/></svg></a></h3></div><div class=highlight><pre tabindex=0 class=chroma><code class=language-json data-lang=json><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nt>&#34;entityId&#34;</span><span class=p>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;plugin&#34;</span><span class=p>:</span> <span class=s2>&#34;plugin-id&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;operations&#34;</span><span class=p>:</span> <span class=p>[</span><span class=s2>&#34;create&#34;</span><span class=p>,</span> <span class=s2>&#34;retrieve&#34;</span><span class=p>,</span> <span class=s2>&#34;update&#34;</span><span class=p>,</span> <span class=s2>&#34;delete&#34;</span><span class=p>],</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;params&#34;</span><span class=p>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=nt>&#34;configuration_entity_id&#34;</span><span class=p>:</span> <span class=mi>99</span><span class=p>,</span>
</span></span><span class=line><span class=cl>      <span class=nt>&#34;cascade_delete&#34;</span><span class=p>:</span> <span class=kc>true</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><table><thead><tr><th>Field</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td><code>entityId</code></td><td>string</td><td>The entity ID (as string) to override</td></tr><tr><td><code>plugin</code></td><td>string</td><td>The plugin ID that provides the override handlers</td></tr><tr><td><code>operations</code></td><td>string[]</td><td>List of operations to override: <code>create</code>, <code>retrieve</code>, <code>update</code>, <code>delete</code>, <code>list</code></td></tr><tr><td><code>params</code></td><td>object</td><td>Optional plugin-specific parameters passed to handlers</td></tr></tbody></table><div class=gdoc-page__anchorwrap><h3 id=example-configurations>Example Configurations<a data-clipboard-text=https://dmm-com.github.io/pagoda/advanced/plugin_system/#example-configurations class="gdoc-page__anchor gdoc-page__anchor--right clip" aria-label="Anchor Example Configurations" href=#example-configurations><svg class="icon link"><use xlink:href="#link"/></svg></a></h3></div><p><strong>Single Entity Override:</strong></p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=nb>export</span> <span class=nv>BACKEND_PLUGIN_ENTITY_OVERRIDES</span><span class=o>=</span><span class=s1>&#39;{&#34;42&#34;: {&#34;plugin&#34;: &#34;cross-entity-sample&#34;, &#34;operations&#34;: [&#34;create&#34;, &#34;retrieve&#34;, &#34;update&#34;, &#34;delete&#34;], &#34;params&#34;: {&#34;configuration_entity_id&#34;: 99}}}&#39;</span>
</span></span></code></pre></div><p><strong>Multiple Entity Overrides:</strong></p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=nb>export</span> <span class=nv>BACKEND_PLUGIN_ENTITY_OVERRIDES</span><span class=o>=</span><span class=s1>&#39;{
</span></span></span><span class=line><span class=cl><span class=s1>  &#34;42&#34;: {&#34;plugin&#34;: &#34;cross-entity-sample&#34;, &#34;operations&#34;: [&#34;create&#34;, &#34;retrieve&#34;], &#34;params&#34;: {}},
</span></span></span><span class=line><span class=cl><span class=s1>  &#34;100&#34;: {&#34;plugin&#34;: &#34;custom-handler&#34;, &#34;operations&#34;: [&#34;retrieve&#34;], &#34;params&#34;: {&#34;enrichment&#34;: true}}
</span></span></span><span class=line><span class=cl><span class=s1>}&#39;</span>
</span></span></code></pre></div><div class=gdoc-page__anchorwrap><h3 id=how-it-works>How It Works<a data-clipboard-text=https://dmm-com.github.io/pagoda/advanced/plugin_system/#how-it-works class="gdoc-page__anchor gdoc-page__anchor--right clip" aria-label="Anchor How It Works" href=#how-it-works><svg class="icon link"><use xlink:href="#link"/></svg></a></h3></div><ol><li><p>When an Entry API request is received (e.g., <code>GET /entry/api/v2/{entry_id}/</code>), the system checks if an override is registered for that entity/operation combination.</p></li><li><p>If an override exists, the request is dispatched to the plugin&rsquo;s handler instead of the default implementation.</p></li><li><p>The handler receives an <code>OverrideContext</code> object containing:</p><ul><li><code>request</code>: The DRF Request object</li><li><code>user</code>: The authenticated user</li><li><code>entity</code>: The Entity instance</li><li><code>entry</code>: The Entry instance (for retrieve/update/delete)</li><li><code>data</code>: Request data (for create/update)</li><li><code>params</code>: Plugin-specific parameters from configuration</li><li><code>plugin_id</code>: The plugin&rsquo;s ID</li><li><code>operation</code>: The operation type</li></ul></li><li><p>The handler returns a DRF <code>Response</code> object.</p></li></ol><div class=gdoc-page__anchorwrap><h3 id=implementing-override-handlers>Implementing Override Handlers<a data-clipboard-text=https://dmm-com.github.io/pagoda/advanced/plugin_system/#implementing-override-handlers class="gdoc-page__anchor gdoc-page__anchor--right clip" aria-label="Anchor Implementing Override Handlers" href=#implementing-override-handlers><svg class="icon link"><use xlink:href="#link"/></svg></a></h3></div><p>Use the <code>@override_operation</code> decorator to mark methods as override handlers:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=kn>from</span> <span class=nn>pagoda_plugin_sdk.override</span> <span class=kn>import</span> <span class=p>(</span>
</span></span><span class=line><span class=cl>    <span class=n>OverrideContext</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=n>override_operation</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=n>success_response</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=n>error_response</span><span class=p>,</span>
</span></span><span class=line><span class=cl><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>MyHandlers</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=nd>@override_operation</span><span class=p>(</span><span class=s2>&#34;retrieve&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>handle_retrieve</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>context</span><span class=p>:</span> <span class=n>OverrideContext</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>Response</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;&#34;&#34;Handle entry retrieval with custom logic.&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>        <span class=n>entry</span> <span class=o>=</span> <span class=n>context</span><span class=o>.</span><span class=n>entry</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=ow>not</span> <span class=n>entry</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=k>return</span> <span class=n>error_response</span><span class=p>(</span><span class=s2>&#34;Entry not found&#34;</span><span class=p>,</span> <span class=n>status_code</span><span class=o>=</span><span class=mi>404</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=c1># Use the standard serializer for compatibility</span>
</span></span><span class=line><span class=cl>        <span class=kn>from</span> <span class=nn>entry.api_v2.serializers</span> <span class=kn>import</span> <span class=n>EntryRetrieveSerializer</span>
</span></span><span class=line><span class=cl>        <span class=n>serializer</span> <span class=o>=</span> <span class=n>EntryRetrieveSerializer</span><span class=p>(</span><span class=n>entry</span><span class=p>,</span> <span class=n>context</span><span class=o>=</span><span class=p>{</span><span class=s2>&#34;request&#34;</span><span class=p>:</span> <span class=n>context</span><span class=o>.</span><span class=n>request</span><span class=p>})</span>
</span></span><span class=line><span class=cl>        <span class=n>response_data</span> <span class=o>=</span> <span class=n>serializer</span><span class=o>.</span><span class=n>data</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=c1># Add plugin-specific enrichment</span>
</span></span><span class=line><span class=cl>        <span class=n>response_data</span><span class=p>[</span><span class=s2>&#34;_plugin_override&#34;</span><span class=p>]</span> <span class=o>=</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=s2>&#34;active&#34;</span><span class=p>:</span> <span class=kc>True</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=s2>&#34;plugin_id&#34;</span><span class=p>:</span> <span class=n>context</span><span class=o>.</span><span class=n>plugin_id</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=s2>&#34;message&#34;</span><span class=p>:</span> <span class=s2>&#34;Custom handling active&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=n>success_response</span><span class=p>(</span><span class=n>response_data</span><span class=p>)</span>
</span></span></code></pre></div><div class=gdoc-page__anchorwrap><h3 id=response-helpers>Response Helpers<a data-clipboard-text=https://dmm-com.github.io/pagoda/advanced/plugin_system/#response-helpers class="gdoc-page__anchor gdoc-page__anchor--right clip" aria-label="Anchor Response Helpers" href=#response-helpers><svg class="icon link"><use xlink:href="#link"/></svg></a></h3></div><p>The SDK provides response helper functions:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=kn>from</span> <span class=nn>pagoda_plugin_sdk.override</span> <span class=kn>import</span> <span class=p>(</span>
</span></span><span class=line><span class=cl>    <span class=n>success_response</span><span class=p>,</span>            <span class=c1># 200 OK with data</span>
</span></span><span class=line><span class=cl>    <span class=n>created_response</span><span class=p>,</span>            <span class=c1># 201 Created</span>
</span></span><span class=line><span class=cl>    <span class=n>accepted_response</span><span class=p>,</span>           <span class=c1># 202 Accepted</span>
</span></span><span class=line><span class=cl>    <span class=n>no_content_response</span><span class=p>,</span>         <span class=c1># 204 No Content</span>
</span></span><span class=line><span class=cl>    <span class=n>error_response</span><span class=p>,</span>              <span class=c1># 400 Bad Request (customizable)</span>
</span></span><span class=line><span class=cl>    <span class=n>not_found_response</span><span class=p>,</span>          <span class=c1># 404 Not Found</span>
</span></span><span class=line><span class=cl>    <span class=n>permission_denied_response</span><span class=p>,</span>  <span class=c1># 403 Forbidden</span>
</span></span><span class=line><span class=cl>    <span class=n>validation_error_response</span><span class=p>,</span>   <span class=c1># 400 with validation errors</span>
</span></span><span class=line><span class=cl><span class=p>)</span>
</span></span></code></pre></div><div class=gdoc-page__anchorwrap><h3 id=important-maintaining-api-compatibility>Important: Maintaining API Compatibility<a data-clipboard-text=https://dmm-com.github.io/pagoda/advanced/plugin_system/#important-maintaining-api-compatibility class="gdoc-page__anchor gdoc-page__anchor--right clip" aria-label="Anchor Important: Maintaining API Compatibility" href=#important-maintaining-api-compatibility><svg class="icon link"><use xlink:href="#link"/></svg></a></h3></div><p>When implementing override handlers, especially for <code>retrieve</code> operations, ensure the response format is compatible with the frontend:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=nd>@override_operation</span><span class=p>(</span><span class=s2>&#34;retrieve&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=k>def</span> <span class=nf>handle_retrieve</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>context</span><span class=p>:</span> <span class=n>OverrideContext</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>Response</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=n>entry</span> <span class=o>=</span> <span class=n>context</span><span class=o>.</span><span class=n>entry</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=c1># Use the standard serializer to ensure correct format</span>
</span></span><span class=line><span class=cl>    <span class=kn>from</span> <span class=nn>entry.api_v2.serializers</span> <span class=kn>import</span> <span class=n>EntryRetrieveSerializer</span>
</span></span><span class=line><span class=cl>    <span class=n>serializer</span> <span class=o>=</span> <span class=n>EntryRetrieveSerializer</span><span class=p>(</span><span class=n>entry</span><span class=p>,</span> <span class=n>context</span><span class=o>=</span><span class=p>{</span><span class=s2>&#34;request&#34;</span><span class=p>:</span> <span class=n>context</span><span class=o>.</span><span class=n>request</span><span class=p>})</span>
</span></span><span class=line><span class=cl>    <span class=n>response_data</span> <span class=o>=</span> <span class=n>serializer</span><span class=o>.</span><span class=n>data</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=c1># Then add your custom fields</span>
</span></span><span class=line><span class=cl>    <span class=n>response_data</span><span class=p>[</span><span class=s2>&#34;_custom_field&#34;</span><span class=p>]</span> <span class=o>=</span> <span class=s2>&#34;value&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=n>success_response</span><span class=p>(</span><span class=n>response_data</span><span class=p>)</span>
</span></span></code></pre></div><p>This ensures the response includes required fields like <code>attrs</code> that the frontend expects.</p><div class=gdoc-page__anchorwrap><h3 id=verifying-override-configuration>Verifying Override Configuration<a data-clipboard-text=https://dmm-com.github.io/pagoda/advanced/plugin_system/#verifying-override-configuration class="gdoc-page__anchor gdoc-page__anchor--right clip" aria-label="Anchor Verifying Override Configuration" href=#verifying-override-configuration><svg class="icon link"><use xlink:href="#link"/></svg></a></h3></div><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># Check if override is active for an entry</span>
</span></span><span class=line><span class=cl>curl -H <span class=s2>&#34;Authorization: Token YOUR_TOKEN&#34;</span> <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>     http://localhost:8000/entry/api/v2/<span class=o>{</span>entry_id<span class=o>}</span>/
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Response with override active:</span>
</span></span><span class=line><span class=cl><span class=o>{</span>
</span></span><span class=line><span class=cl>  <span class=s2>&#34;id&#34;</span>: 123,
</span></span><span class=line><span class=cl>  <span class=s2>&#34;name&#34;</span>: <span class=s2>&#34;test-entry&#34;</span>,
</span></span><span class=line><span class=cl>  <span class=s2>&#34;attrs&#34;</span>: <span class=o>[</span>...<span class=o>]</span>,
</span></span><span class=line><span class=cl>  <span class=s2>&#34;_plugin_override&#34;</span>: <span class=o>{</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;active&#34;</span>: true,
</span></span><span class=line><span class=cl>    <span class=s2>&#34;plugin_id&#34;</span>: <span class=s2>&#34;cross-entity-sample&#34;</span>,
</span></span><span class=line><span class=cl>    <span class=s2>&#34;message&#34;</span>: <span class=s2>&#34;Custom handling active&#34;</span>
</span></span><span class=line><span class=cl>  <span class=o>}</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span></code></pre></div><div class=gdoc-page__anchorwrap><h2 id=configuration-1>Configuration<a data-clipboard-text=https://dmm-com.github.io/pagoda/advanced/plugin_system/#configuration-1 class="gdoc-page__anchor gdoc-page__anchor--right clip" aria-label="Anchor Configuration" href=#configuration-1><svg class="icon link"><use xlink:href="#link"/></svg></a></h2></div><div class=gdoc-page__anchorwrap><h3 id=environment-variables>Environment Variables<a data-clipboard-text=https://dmm-com.github.io/pagoda/advanced/plugin_system/#environment-variables class="gdoc-page__anchor gdoc-page__anchor--right clip" aria-label="Anchor Environment Variables" href=#environment-variables><svg class="icon link"><use xlink:href="#link"/></svg></a></h3></div><table><thead><tr><th>Variable</th><th>Default</th><th>Description</th></tr></thead><tbody><tr><td><code>ENABLED_PLUGINS</code></td><td><code>[]</code></td><td>List of plugins to enable (comma-separated)</td></tr><tr><td><code>BACKEND_PLUGIN_ENTITY_OVERRIDES</code></td><td><code>{}</code></td><td>Backend entity override configuration (JSON)</td></tr><tr><td><code>FRONTEND_PLUGIN_ENTITY_OVERRIDES</code></td><td><code>{}</code></td><td>Frontend entity override configuration (JSON)</td></tr></tbody></table><div class=gdoc-page__anchorwrap><h3 id=django-settings-integration>Django Settings Integration<a data-clipboard-text=https://dmm-com.github.io/pagoda/advanced/plugin_system/#django-settings-integration class="gdoc-page__anchor gdoc-page__anchor--right clip" aria-label="Anchor Django Settings Integration" href=#django-settings-integration><svg class="icon link"><use xlink:href="#link"/></svg></a></h3></div><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=c1># airone/settings_common.py</span>
</span></span><span class=line><span class=cl><span class=n>ENABLED_PLUGINS</span> <span class=o>=</span> <span class=n>env</span><span class=o>.</span><span class=n>list</span><span class=p>(</span><span class=s2>&#34;ENABLED_PLUGINS&#34;</span><span class=p>,</span> <span class=n>default</span><span class=o>=</span><span class=p>[])</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Plugin system is automatically enabled if any plugins are specified</span>
</span></span><span class=line><span class=cl><span class=n>PLUGINS_ENABLED</span> <span class=o>=</span> <span class=nb>bool</span><span class=p>(</span><span class=n>ENABLED_PLUGINS</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Plugin apps are dynamically added to INSTALLED_APPS</span>
</span></span><span class=line><span class=cl><span class=k>if</span> <span class=n>PLUGINS_ENABLED</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=n>INSTALLED_APPS</span><span class=o>.</span><span class=n>extend</span><span class=p>(</span><span class=n>plugin_integration</span><span class=o>.</span><span class=n>get_installed_apps</span><span class=p>())</span>
</span></span></code></pre></div><div class=gdoc-page__anchorwrap><h3 id=manual-plugin-control>Manual Plugin Control<a data-clipboard-text=https://dmm-com.github.io/pagoda/advanced/plugin_system/#manual-plugin-control class="gdoc-page__anchor gdoc-page__anchor--right clip" aria-label="Anchor Manual Plugin Control" href=#manual-plugin-control><svg class="icon link"><use xlink:href="#link"/></svg></a></h3></div><p>The plugin system adopts explicit control:</p><ul><li><strong>No Automatic Discovery</strong>: Does not automatically load available plugins</li><li><strong>Explicit Specification</strong>: Only loads plugins specified in <code>ENABLED_PLUGINS</code></li><li><strong>Security</strong>: Prevents loading of unintended plugins</li><li><strong>Controllability</strong>: Easy plugin control in development and production environments</li></ul><div class=gdoc-page__anchorwrap><h2 id=troubleshooting>Troubleshooting<a data-clipboard-text=https://dmm-com.github.io/pagoda/advanced/plugin_system/#troubleshooting class="gdoc-page__anchor gdoc-page__anchor--right clip" aria-label="Anchor Troubleshooting" href=#troubleshooting><svg class="icon link"><use xlink:href="#link"/></svg></a></h2></div><div class=gdoc-page__anchorwrap><h3 id=common-issues-and-solutions>Common Issues and Solutions<a data-clipboard-text=https://dmm-com.github.io/pagoda/advanced/plugin_system/#common-issues-and-solutions class="gdoc-page__anchor gdoc-page__anchor--right clip" aria-label="Anchor Common Issues and Solutions" href=#common-issues-and-solutions><svg class="icon link"><use xlink:href="#link"/></svg></a></h3></div><div class=gdoc-page__anchorwrap><h4 id=1-404-error-on-plugin-endpoints>1. 404 Error on Plugin Endpoints<a data-clipboard-text=https://dmm-com.github.io/pagoda/advanced/plugin_system/#1-404-error-on-plugin-endpoints class="gdoc-page__anchor gdoc-page__anchor--right clip" aria-label="Anchor 1. 404 Error on Plugin Endpoints" href=#1-404-error-on-plugin-endpoints><svg class="icon link"><use xlink:href="#link"/></svg></a></h4></div><p><strong>Symptoms</strong>: <code>curl http://localhost:8000/api/v2/plugins/my-plugin/test/</code> returns 404</p><p><strong>Causes and Solutions</strong>:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># Cause 1: Plugin not specified</span>
</span></span><span class=line><span class=cl>❌ python manage.py runserver
</span></span><span class=line><span class=cl>✅ <span class=nv>ENABLED_PLUGINS</span><span class=o>=</span>my-plugin python manage.py runserver
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Cause 2: Plugin not installed</span>
</span></span><span class=line><span class=cl>❌ pip install -e plugin_examples/my-plugin/
</span></span><span class=line><span class=cl>✅ <span class=nb>cd</span> plugin_examples/my-plugin/ <span class=o>&amp;&amp;</span> pip install -e .
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Cause 3: Incorrect Entry points path</span>
</span></span><span class=line><span class=cl>❌ <span class=s1>&#39;my-plugin = my_plugin:MyPlugin&#39;</span>
</span></span><span class=line><span class=cl>✅ <span class=s1>&#39;my-plugin = my_plugin.plugin:MyPlugin&#39;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Cause 4: Incorrect Entry points group name</span>
</span></span><span class=line><span class=cl>❌ <span class=o>[</span>project.entry-points.<span class=s2>&#34;airone.plugins&#34;</span><span class=o>]</span>
</span></span><span class=line><span class=cl>✅ <span class=o>[</span>project.entry-points.<span class=s2>&#34;pagoda.plugins&#34;</span><span class=o>]</span>
</span></span></code></pre></div><div class=gdoc-page__anchorwrap><h4 id=2-plugin-discovery-failures>2. Plugin Discovery Failures<a data-clipboard-text=https://dmm-com.github.io/pagoda/advanced/plugin_system/#2-plugin-discovery-failures class="gdoc-page__anchor gdoc-page__anchor--right clip" aria-label="Anchor 2. Plugin Discovery Failures" href=#2-plugin-discovery-failures><svg class="icon link"><use xlink:href="#link"/></svg></a></h4></div><p><strong>Log Example</strong>:</p><pre tabindex=0><code>[ERROR] Failed to load external plugin my-plugin: No module named &#39;my_plugin&#39;
[INFO] Plugin discovery completed. Found 0 plugins.
</code></pre><p><strong>Resolution Steps</strong>:</p><ol><li><strong>Check Entry points</strong>:</li></ol><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>python -c <span class=s2>&#34;
</span></span></span><span class=line><span class=cl><span class=s2>import pkg_resources
</span></span></span><span class=line><span class=cl><span class=s2>for ep in pkg_resources.iter_entry_points(&#39;pagoda.plugins&#39;):
</span></span></span><span class=line><span class=cl><span class=s2>    print(f&#39;{ep.name} -&gt; {ep.module_name}:{ep.attrs[0]}&#39;)
</span></span></span><span class=line><span class=cl><span class=s2>    try:
</span></span></span><span class=line><span class=cl><span class=s2>        plugin_class = ep.load()
</span></span></span><span class=line><span class=cl><span class=s2>        print(f&#39;✓ Load successful: {plugin_class}&#39;)
</span></span></span><span class=line><span class=cl><span class=s2>    except Exception as e:
</span></span></span><span class=line><span class=cl><span class=s2>        print(f&#39;✗ Load failed: {e}&#39;)
</span></span></span><span class=line><span class=cl><span class=s2>&#34;</span>
</span></span></code></pre></div><ol start=2><li><strong>Reinstall Plugin</strong>:</li></ol><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=nb>cd</span> my-plugin/
</span></span><span class=line><span class=cl>pip uninstall -y my-plugin
</span></span><span class=line><span class=cl>rm -rf build/ dist/ *.egg-info/
</span></span><span class=line><span class=cl>pip install -e .
</span></span></code></pre></div><ol start=3><li><strong>Check Path and Module</strong>:</li></ol><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>python -c <span class=s2>&#34;
</span></span></span><span class=line><span class=cl><span class=s2>import sys
</span></span></span><span class=line><span class=cl><span class=s2>sys.path.insert(0, &#39;plugin_examples/my-plugin&#39;)
</span></span></span><span class=line><span class=cl><span class=s2>from my_plugin.plugin import MyPlugin
</span></span></span><span class=line><span class=cl><span class=s2>print(f&#39;✓ Direct import works: {MyPlugin().name}&#39;)
</span></span></span><span class=line><span class=cl><span class=s2>&#34;</span>
</span></span></code></pre></div><div class=gdoc-page__anchorwrap><h4 id=3-hook-execution-errors>3. Hook Execution Errors<a data-clipboard-text=https://dmm-com.github.io/pagoda/advanced/plugin_system/#3-hook-execution-errors class="gdoc-page__anchor gdoc-page__anchor--right clip" aria-label="Anchor 3. Hook Execution Errors" href=#3-hook-execution-errors><svg class="icon link"><use xlink:href="#link"/></svg></a></h4></div><p><strong>Log Example</strong>:</p><pre tabindex=0><code>[ERROR] Hook entry.after_create failed: missing required arguments
</code></pre><p><strong>Solution</strong>: Implement correct hook handler signature with decorator</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=c1># ❌ Wrong (missing decorator)</span>
</span></span><span class=line><span class=cl><span class=k>def</span> <span class=nf>log_after_create</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>entity_name</span><span class=p>,</span> <span class=n>user</span><span class=p>,</span> <span class=n>entry</span><span class=p>,</span> <span class=o>**</span><span class=n>kwargs</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=k>pass</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># ❌ Wrong (incorrect signature)</span>
</span></span><span class=line><span class=cl><span class=nd>@entry_hook</span><span class=p>(</span><span class=s2>&#34;after_create&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=k>def</span> <span class=nf>log_after_create</span><span class=p>(</span><span class=n>user</span><span class=p>,</span> <span class=n>entry</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=k>pass</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># ✅ Correct</span>
</span></span><span class=line><span class=cl><span class=nd>@entry_hook</span><span class=p>(</span><span class=s2>&#34;after_create&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=k>def</span> <span class=nf>log_after_create</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>entity_name</span><span class=p>,</span> <span class=n>user</span><span class=p>,</span> <span class=n>entry</span><span class=p>,</span> <span class=o>**</span><span class=n>kwargs</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;&#34;&#34;
</span></span></span><span class=line><span class=cl><span class=s2>    entity_name: Name of the entity
</span></span></span><span class=line><span class=cl><span class=s2>    user: User who created the entry
</span></span></span><span class=line><span class=cl><span class=s2>    entry: The created Entry instance
</span></span></span><span class=line><span class=cl><span class=s2>    **kwargs: Additional context
</span></span></span><span class=line><span class=cl><span class=s2>    &#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>    <span class=n>logger</span><span class=o>.</span><span class=n>info</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;New entry created: </span><span class=si>{</span><span class=n>entry</span><span class=o>.</span><span class=n>name</span><span class=si>}</span><span class=s2> in </span><span class=si>{</span><span class=n>entity_name</span><span class=si>}</span><span class=s2>&#34;</span><span class=p>)</span>
</span></span></code></pre></div><div class=gdoc-page__anchorwrap><h4 id=4-plugin-development-environment-issues>4. Plugin Development Environment Issues<a data-clipboard-text=https://dmm-com.github.io/pagoda/advanced/plugin_system/#4-plugin-development-environment-issues class="gdoc-page__anchor gdoc-page__anchor--right clip" aria-label="Anchor 4. Plugin Development Environment Issues" href=#4-plugin-development-environment-issues><svg class="icon link"><use xlink:href="#link"/></svg></a></h4></div><p><strong>Development with uv</strong>:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># If pagoda-core is not found</span>
</span></span><span class=line><span class=cl><span class=nb>cd</span> pagoda-core/
</span></span><span class=line><span class=cl>make install-dev
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Install plugin for development</span>
</span></span><span class=line><span class=cl><span class=nb>cd</span> ../plugin_examples/my-plugin/
</span></span><span class=line><span class=cl>pip install -e .
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Run integration tests</span>
</span></span><span class=line><span class=cl>make test-integration
</span></span></code></pre></div><div class=gdoc-page__anchorwrap><h3 id=debug-commands>Debug Commands<a data-clipboard-text=https://dmm-com.github.io/pagoda/advanced/plugin_system/#debug-commands class="gdoc-page__anchor gdoc-page__anchor--right clip" aria-label="Anchor Debug Commands" href=#debug-commands><svg class="icon link"><use xlink:href="#link"/></svg></a></h3></div><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># Check plugin status</span>
</span></span><span class=line><span class=cl><span class=nv>ENABLED_PLUGINS</span><span class=o>=</span>hello-world python manage.py shell -c <span class=s2>&#34;
</span></span></span><span class=line><span class=cl><span class=s2>from airone.plugins.integration import plugin_integration
</span></span></span><span class=line><span class=cl><span class=s2>plugin_integration.initialize()
</span></span></span><span class=line><span class=cl><span class=s2>print(f&#39;Plugins: {plugin_integration.get_enabled_plugin_count()}&#39;)
</span></span></span><span class=line><span class=cl><span class=s2>for plugin in plugin_integration.get_enabled_plugins():
</span></span></span><span class=line><span class=cl><span class=s2>    print(f&#39;  - {plugin.name} ({plugin.id}) v{plugin.version}&#39;)
</span></span></span><span class=line><span class=cl><span class=s2>&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Test URL resolution</span>
</span></span><span class=line><span class=cl>python -c <span class=s2>&#34;
</span></span></span><span class=line><span class=cl><span class=s2>import django
</span></span></span><span class=line><span class=cl><span class=s2>django.setup()
</span></span></span><span class=line><span class=cl><span class=s2>from django.urls import get_resolver
</span></span></span><span class=line><span class=cl><span class=s2>resolver = get_resolver()
</span></span></span><span class=line><span class=cl><span class=s2>match = resolver.resolve(&#39;/api/v2/plugins/hello-world-plugin/test/&#39;)
</span></span></span><span class=line><span class=cl><span class=s2>print(f&#39;✓ URL resolved: {match.func}&#39;)
</span></span></span><span class=line><span class=cl><span class=s2>&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Get hook statistics</span>
</span></span><span class=line><span class=cl>python -c <span class=s2>&#34;
</span></span></span><span class=line><span class=cl><span class=s2>from airone.plugins.bridge_manager import bridge_manager
</span></span></span><span class=line><span class=cl><span class=s2>bridge_manager.initialize()
</span></span></span><span class=line><span class=cl><span class=s2>stats = bridge_manager.hooks.get_hook_statistics()
</span></span></span><span class=line><span class=cl><span class=s2>print(f&#39;Total hooks: {stats[\&#34;total_hooks\&#34;]}&#39;)
</span></span></span><span class=line><span class=cl><span class=s2>print(f&#39;Registered hooks: {stats[\&#34;registered_hooks\&#34;]}&#39;)
</span></span></span><span class=line><span class=cl><span class=s2>&#34;</span>
</span></span></code></pre></div><div class=gdoc-page__anchorwrap><h2 id=architecture-details>Architecture Details<a data-clipboard-text=https://dmm-com.github.io/pagoda/advanced/plugin_system/#architecture-details class="gdoc-page__anchor gdoc-page__anchor--right clip" aria-label="Anchor Architecture Details" href=#architecture-details><svg class="icon link"><use xlink:href="#link"/></svg></a></h2></div><div class=gdoc-page__anchorwrap><h3 id=plugin-discovery-process>Plugin Discovery Process<a data-clipboard-text=https://dmm-com.github.io/pagoda/advanced/plugin_system/#plugin-discovery-process class="gdoc-page__anchor gdoc-page__anchor--right clip" aria-label="Anchor Plugin Discovery Process" href=#plugin-discovery-process><svg class="icon link"><use xlink:href="#link"/></svg></a></h3></div><pre tabindex=0><code>1. External Plugin Discovery (Entry Points)
   ├─ pkg_resources.iter_entry_points(&#39;pagoda.plugins&#39;)
   ├─ Load plugin class from entry point
   └─ Register with plugin_registry

2. Example Plugin Discovery (Directory Scan)
   ├─ Scan plugin_examples/ directory
   ├─ Import plugin.py from each plugin directory
   └─ Register discovered plugin classes

3. Plugin Integration
   ├─ Django Apps → INSTALLED_APPS integration
   ├─ URL Patterns → api_v2/urls.py integration
   ├─ Hook Registration → bridge_manager.hooks
   └─ Bridge System Initialization
</code></pre><div class=gdoc-page__anchorwrap><h3 id=hook-system-architecture>Hook System Architecture<a data-clipboard-text=https://dmm-com.github.io/pagoda/advanced/plugin_system/#hook-system-architecture class="gdoc-page__anchor gdoc-page__anchor--right clip" aria-label="Anchor Hook System Architecture" href=#hook-system-architecture><svg class="icon link"><use xlink:href="#link"/></svg></a></h3></div><p>The plugin system provides a comprehensive hook system with 17 standard hooks organized into four categories:</p><div class=gdoc-page__anchorwrap><h4 id=available-hook-types>Available Hook Types<a data-clipboard-text=https://dmm-com.github.io/pagoda/advanced/plugin_system/#available-hook-types class="gdoc-page__anchor gdoc-page__anchor--right clip" aria-label="Anchor Available Hook Types" href=#available-hook-types><svg class="icon link"><use xlink:href="#link"/></svg></a></h4></div><p><strong>1. Entry Lifecycle Hooks</strong></p><ul><li><code>entry.before_create</code> - Called before an entry is created</li><li><code>entry.after_create</code> - Called after an entry is created</li><li><code>entry.before_update</code> - Called before an entry is updated</li><li><code>entry.after_update</code> - Called after an entry is updated</li><li><code>entry.before_delete</code> - Called before an entry is deleted</li><li><code>entry.before_restore</code> - Called before an entry is restored</li><li><code>entry.after_restore</code> - Called after an entry is restored</li></ul><p><strong>2. Entity Lifecycle Hooks</strong></p><ul><li><code>entity.before_create</code> - Called before an entity is created</li><li><code>entity.after_create</code> - Called after an entity is created</li><li><code>entity.before_update</code> - Called before an entity is updated</li><li><code>entity.after_update</code> - Called after an entity is updated</li></ul><p><strong>3. Validation Hooks</strong></p><ul><li><code>entry.validate</code> - Custom validation for entry creation/update</li></ul><p><strong>4. Data Access Hooks</strong></p><ul><li><code>entry.get_attrs</code> - Modify entry attributes before returning to client</li><li><code>entity.get_attrs</code> - Modify entity attributes before returning to client</li></ul><div class=gdoc-page__anchorwrap><h4 id=hook-decorators>Hook Decorators<a data-clipboard-text=https://dmm-com.github.io/pagoda/advanced/plugin_system/#hook-decorators class="gdoc-page__anchor gdoc-page__anchor--right clip" aria-label="Anchor Hook Decorators" href=#hook-decorators><svg class="icon link"><use xlink:href="#link"/></svg></a></h4></div><p>The plugin SDK provides four decorators for registering hook handlers:</p><p><strong>1. <code>@entry_hook(hook_name, entity=None, priority=100)</code></strong></p><p>For Entry lifecycle hooks. Supports entity-specific filtering.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=kn>from</span> <span class=nn>pagoda_plugin_sdk.decorators</span> <span class=kn>import</span> <span class=n>entry_hook</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>MyPlugin</span><span class=p>(</span><span class=n>Plugin</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=c1># Apply to all entities</span>
</span></span><span class=line><span class=cl>    <span class=nd>@entry_hook</span><span class=p>(</span><span class=s2>&#34;after_create&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>log_all_entries</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>entity_name</span><span class=p>,</span> <span class=n>user</span><span class=p>,</span> <span class=n>entry</span><span class=p>,</span> <span class=o>**</span><span class=n>kwargs</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=n>logger</span><span class=o>.</span><span class=n>info</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;Entry created: </span><span class=si>{</span><span class=n>entry</span><span class=o>.</span><span class=n>name</span><span class=si>}</span><span class=s2>&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=c1># Apply only to specific entity</span>
</span></span><span class=line><span class=cl>    <span class=nd>@entry_hook</span><span class=p>(</span><span class=s2>&#34;after_create&#34;</span><span class=p>,</span> <span class=n>entity</span><span class=o>=</span><span class=s2>&#34;customer&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>log_customer_only</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>entity_name</span><span class=p>,</span> <span class=n>user</span><span class=p>,</span> <span class=n>entry</span><span class=p>,</span> <span class=o>**</span><span class=n>kwargs</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=n>logger</span><span class=o>.</span><span class=n>info</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;Customer entry created: </span><span class=si>{</span><span class=n>entry</span><span class=o>.</span><span class=n>name</span><span class=si>}</span><span class=s2>&#34;</span><span class=p>)</span>
</span></span></code></pre></div><p><strong>2. <code>@entity_hook(hook_name, priority=100)</code></strong></p><p>For Entity lifecycle hooks.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=kn>from</span> <span class=nn>pagoda_plugin_sdk.decorators</span> <span class=kn>import</span> <span class=n>entity_hook</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>MyPlugin</span><span class=p>(</span><span class=n>Plugin</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=nd>@entity_hook</span><span class=p>(</span><span class=s2>&#34;after_create&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>log_entity_create</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>user</span><span class=p>,</span> <span class=n>entity</span><span class=p>,</span> <span class=o>**</span><span class=n>kwargs</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=n>logger</span><span class=o>.</span><span class=n>info</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;Entity created: </span><span class=si>{</span><span class=n>entity</span><span class=o>.</span><span class=n>name</span><span class=si>}</span><span class=s2>&#34;</span><span class=p>)</span>
</span></span></code></pre></div><p><strong>3. <code>@validation_hook(priority=100)</code></strong></p><p>For entry validation (entry.validate hook).</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=kn>from</span> <span class=nn>pagoda_plugin_sdk.decorators</span> <span class=kn>import</span> <span class=n>validation_hook</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>MyPlugin</span><span class=p>(</span><span class=n>Plugin</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=nd>@validation_hook</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>validate_entry</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>user</span><span class=p>,</span> <span class=n>schema_name</span><span class=p>,</span> <span class=n>name</span><span class=p>,</span> <span class=n>attrs</span><span class=p>,</span> <span class=n>instance</span><span class=p>,</span> <span class=o>**</span><span class=n>kwargs</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=s2>&#34;forbidden&#34;</span> <span class=ow>in</span> <span class=n>name</span><span class=o>.</span><span class=n>lower</span><span class=p>():</span>
</span></span><span class=line><span class=cl>            <span class=k>raise</span> <span class=ne>ValueError</span><span class=p>(</span><span class=s2>&#34;Name cannot contain &#39;forbidden&#39;&#34;</span><span class=p>)</span>
</span></span></code></pre></div><p><strong>4. <code>@get_attrs_hook(target, priority=100)</code></strong></p><p>For data access hooks. Target must be either &ldquo;entry&rdquo; or &ldquo;entity&rdquo;.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=kn>from</span> <span class=nn>pagoda_plugin_sdk.decorators</span> <span class=kn>import</span> <span class=n>get_attrs_hook</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>MyPlugin</span><span class=p>(</span><span class=n>Plugin</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=nd>@get_attrs_hook</span><span class=p>(</span><span class=s2>&#34;entry&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>modify_entry_attrs</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>entry</span><span class=p>,</span> <span class=n>attrinfo</span><span class=p>,</span> <span class=n>is_retrieve</span><span class=p>,</span> <span class=o>**</span><span class=n>kwargs</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=c1># Add custom field</span>
</span></span><span class=line><span class=cl>        <span class=k>for</span> <span class=n>attr</span> <span class=ow>in</span> <span class=n>attrinfo</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=n>attr</span><span class=p>[</span><span class=s2>&#34;custom_flag&#34;</span><span class=p>]</span> <span class=o>=</span> <span class=kc>True</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=n>attrinfo</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=nd>@get_attrs_hook</span><span class=p>(</span><span class=s2>&#34;entity&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>modify_entity_attrs</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>entity</span><span class=p>,</span> <span class=n>attrinfo</span><span class=p>,</span> <span class=o>**</span><span class=n>kwargs</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=n>attrinfo</span>
</span></span></code></pre></div><div class=gdoc-page__anchorwrap><h4 id=entity-filtering>Entity Filtering<a data-clipboard-text=https://dmm-com.github.io/pagoda/advanced/plugin_system/#entity-filtering class="gdoc-page__anchor gdoc-page__anchor--right clip" aria-label="Anchor Entity Filtering" href=#entity-filtering><svg class="icon link"><use xlink:href="#link"/></svg></a></h4></div><p>Entry hooks support entity-specific filtering using the <code>entity</code> parameter:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=k>class</span> <span class=nc>MyPlugin</span><span class=p>(</span><span class=n>Plugin</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=c1># Runs only for &#34;product&#34; entity</span>
</span></span><span class=line><span class=cl>    <span class=nd>@entry_hook</span><span class=p>(</span><span class=s2>&#34;after_create&#34;</span><span class=p>,</span> <span class=n>entity</span><span class=o>=</span><span class=s2>&#34;product&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>handle_product_create</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>entity_name</span><span class=p>,</span> <span class=n>user</span><span class=p>,</span> <span class=n>entry</span><span class=p>,</span> <span class=o>**</span><span class=n>kwargs</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=c1># Only called when a product entry is created</span>
</span></span><span class=line><span class=cl>        <span class=k>pass</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=c1># Runs for all entities</span>
</span></span><span class=line><span class=cl>    <span class=nd>@entry_hook</span><span class=p>(</span><span class=s2>&#34;after_create&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>handle_any_create</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>entity_name</span><span class=p>,</span> <span class=n>user</span><span class=p>,</span> <span class=n>entry</span><span class=p>,</span> <span class=o>**</span><span class=n>kwargs</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=c1># Called for all entry creations</span>
</span></span><span class=line><span class=cl>        <span class=k>pass</span>
</span></span></code></pre></div><p>When both entity-specific and generic hooks are registered, both will be executed in priority order.</p><div class=gdoc-page__anchorwrap><h4 id=hook-priority-system>Hook Priority System<a data-clipboard-text=https://dmm-com.github.io/pagoda/advanced/plugin_system/#hook-priority-system class="gdoc-page__anchor gdoc-page__anchor--right clip" aria-label="Anchor Hook Priority System" href=#hook-priority-system><svg class="icon link"><use xlink:href="#link"/></svg></a></h4></div><p>Hooks are executed in priority order (lower number = higher priority, default is 100):</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=k>class</span> <span class=nc>MyPlugin</span><span class=p>(</span><span class=n>Plugin</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=c1># Runs first (priority 50)</span>
</span></span><span class=line><span class=cl>    <span class=nd>@entry_hook</span><span class=p>(</span><span class=s2>&#34;after_create&#34;</span><span class=p>,</span> <span class=n>priority</span><span class=o>=</span><span class=mi>50</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>first_handler</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>entity_name</span><span class=p>,</span> <span class=n>user</span><span class=p>,</span> <span class=n>entry</span><span class=p>,</span> <span class=o>**</span><span class=n>kwargs</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=n>logger</span><span class=o>.</span><span class=n>info</span><span class=p>(</span><span class=s2>&#34;Runs first&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=c1># Runs second (default priority 100)</span>
</span></span><span class=line><span class=cl>    <span class=nd>@entry_hook</span><span class=p>(</span><span class=s2>&#34;after_create&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>second_handler</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>entity_name</span><span class=p>,</span> <span class=n>user</span><span class=p>,</span> <span class=n>entry</span><span class=p>,</span> <span class=o>**</span><span class=n>kwargs</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=n>logger</span><span class=o>.</span><span class=n>info</span><span class=p>(</span><span class=s2>&#34;Runs second&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=c1># Runs last (priority 150)</span>
</span></span><span class=line><span class=cl>    <span class=nd>@entry_hook</span><span class=p>(</span><span class=s2>&#34;after_create&#34;</span><span class=p>,</span> <span class=n>priority</span><span class=o>=</span><span class=mi>150</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>third_handler</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>entity_name</span><span class=p>,</span> <span class=n>user</span><span class=p>,</span> <span class=n>entry</span><span class=p>,</span> <span class=o>**</span><span class=n>kwargs</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=n>logger</span><span class=o>.</span><span class=n>info</span><span class=p>(</span><span class=s2>&#34;Runs last&#34;</span><span class=p>)</span>
</span></span></code></pre></div><p>This is useful for ensuring proper execution order when multiple plugins handle the same hook.</p><div class=gdoc-page__anchorwrap><h4 id=hook-signatures>Hook Signatures<a data-clipboard-text=https://dmm-com.github.io/pagoda/advanced/plugin_system/#hook-signatures class="gdoc-page__anchor gdoc-page__anchor--right clip" aria-label="Anchor Hook Signatures" href=#hook-signatures><svg class="icon link"><use xlink:href="#link"/></svg></a></h4></div><p>Each hook type has a specific signature:</p><p><strong>Entry Lifecycle Hooks:</strong></p><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=k>def</span> <span class=nf>handler</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>entity_name</span><span class=p>:</span> <span class=nb>str</span><span class=p>,</span> <span class=n>user</span><span class=p>:</span> <span class=n>User</span><span class=p>,</span> <span class=n>entry</span><span class=p>:</span> <span class=n>Entry</span><span class=p>,</span> <span class=o>**</span><span class=n>kwargs</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=kc>None</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=c1># For after_create, after_update, after_delete, after_restore</span>
</span></span><span class=line><span class=cl>    <span class=k>pass</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>def</span> <span class=nf>handler</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>entity_name</span><span class=p>:</span> <span class=nb>str</span><span class=p>,</span> <span class=n>user</span><span class=p>:</span> <span class=n>User</span><span class=p>,</span> <span class=n>validated_data</span><span class=p>:</span> <span class=nb>dict</span><span class=p>,</span> <span class=o>**</span><span class=n>kwargs</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=nb>dict</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=c1># For before_create - can modify data</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=n>validated_data</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>def</span> <span class=nf>handler</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>entity_name</span><span class=p>:</span> <span class=nb>str</span><span class=p>,</span> <span class=n>user</span><span class=p>:</span> <span class=n>User</span><span class=p>,</span> <span class=n>validated_data</span><span class=p>:</span> <span class=nb>dict</span><span class=p>,</span> <span class=n>entry</span><span class=p>:</span> <span class=n>Entry</span><span class=p>,</span> <span class=o>**</span><span class=n>kwargs</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=nb>dict</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=c1># For before_update - can modify data</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=n>validated_data</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>def</span> <span class=nf>handler</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>entity_name</span><span class=p>:</span> <span class=nb>str</span><span class=p>,</span> <span class=n>user</span><span class=p>:</span> <span class=n>User</span><span class=p>,</span> <span class=n>entry</span><span class=p>:</span> <span class=n>Entry</span><span class=p>,</span> <span class=o>**</span><span class=n>kwargs</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=kc>None</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=c1># For before_delete, before_restore</span>
</span></span><span class=line><span class=cl>    <span class=k>pass</span>
</span></span></code></pre></div><p><strong>Entity Lifecycle Hooks:</strong></p><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=k>def</span> <span class=nf>handler</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>user</span><span class=p>:</span> <span class=n>User</span><span class=p>,</span> <span class=n>entity</span><span class=p>:</span> <span class=n>Entity</span><span class=p>,</span> <span class=o>**</span><span class=n>kwargs</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=kc>None</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=c1># For after_create, after_update</span>
</span></span><span class=line><span class=cl>    <span class=k>pass</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>def</span> <span class=nf>handler</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>user</span><span class=p>:</span> <span class=n>User</span><span class=p>,</span> <span class=n>validated_data</span><span class=p>:</span> <span class=nb>dict</span><span class=p>,</span> <span class=o>**</span><span class=n>kwargs</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=nb>dict</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=c1># For before_create - can modify data</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=n>validated_data</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>def</span> <span class=nf>handler</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>user</span><span class=p>:</span> <span class=n>User</span><span class=p>,</span> <span class=n>validated_data</span><span class=p>:</span> <span class=nb>dict</span><span class=p>,</span> <span class=n>entity</span><span class=p>:</span> <span class=n>Entity</span><span class=p>,</span> <span class=o>**</span><span class=n>kwargs</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=nb>dict</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=c1># For before_update - can modify data</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=n>validated_data</span>
</span></span></code></pre></div><p><strong>Validation Hook:</strong></p><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=k>def</span> <span class=nf>handler</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>user</span><span class=p>:</span> <span class=n>User</span><span class=p>,</span> <span class=n>schema_name</span><span class=p>:</span> <span class=nb>str</span><span class=p>,</span> <span class=n>name</span><span class=p>:</span> <span class=nb>str</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=n>attrs</span><span class=p>:</span> <span class=nb>list</span><span class=p>,</span> <span class=n>instance</span><span class=p>:</span> <span class=n>Optional</span><span class=p>[</span><span class=n>Entry</span><span class=p>],</span> <span class=o>**</span><span class=n>kwargs</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=kc>None</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=c1># Raise ValueError or ValidationError to reject</span>
</span></span><span class=line><span class=cl>    <span class=k>if</span> <span class=n>invalid_condition</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=k>raise</span> <span class=ne>ValueError</span><span class=p>(</span><span class=s2>&#34;Validation error message&#34;</span><span class=p>)</span>
</span></span></code></pre></div><p><strong>Data Access Hooks:</strong></p><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=k>def</span> <span class=nf>handler</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>entry</span><span class=p>:</span> <span class=n>Entry</span><span class=p>,</span> <span class=n>attrinfo</span><span class=p>:</span> <span class=nb>list</span><span class=p>,</span> <span class=n>is_retrieve</span><span class=p>:</span> <span class=nb>bool</span><span class=p>,</span> <span class=o>**</span><span class=n>kwargs</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=nb>list</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=c1># For entry.get_attrs - must return modified attrinfo</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=n>attrinfo</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>def</span> <span class=nf>handler</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>entity</span><span class=p>:</span> <span class=n>Entity</span><span class=p>,</span> <span class=n>attrinfo</span><span class=p>:</span> <span class=nb>list</span><span class=p>,</span> <span class=o>**</span><span class=n>kwargs</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=nb>list</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=c1># For entity.get_attrs - must return modified attrinfo</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=n>attrinfo</span>
</span></span></code></pre></div><div class=gdoc-page__anchorwrap><h4 id=backward-compatibility>Backward Compatibility<a data-clipboard-text=https://dmm-com.github.io/pagoda/advanced/plugin_system/#backward-compatibility class="gdoc-page__anchor gdoc-page__anchor--right clip" aria-label="Anchor Backward Compatibility" href=#backward-compatibility><svg class="icon link"><use xlink:href="#link"/></svg></a></h4></div><p>The hook system maintains backward compatibility with the legacy custom_view system through hook name aliases:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=c1># Legacy custom_view hook names are automatically mapped to standard names</span>
</span></span><span class=line><span class=cl><span class=n>HOOK_ALIASES</span> <span class=o>=</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;before_create_entry_v2&#34;</span><span class=p>:</span> <span class=s2>&#34;entry.before_create&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;after_create_entry_v2&#34;</span><span class=p>:</span> <span class=s2>&#34;entry.after_create&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;before_update_entry_v2&#34;</span><span class=p>:</span> <span class=s2>&#34;entry.before_update&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;after_update_entry_v2&#34;</span><span class=p>:</span> <span class=s2>&#34;entry.after_update&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;before_delete_entry_v2&#34;</span><span class=p>:</span> <span class=s2>&#34;entry.before_delete&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;validate_entry&#34;</span><span class=p>:</span> <span class=s2>&#34;entry.validate&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;get_entry_attr&#34;</span><span class=p>:</span> <span class=s2>&#34;entry.get_attrs&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;get_entity_attr&#34;</span><span class=p>:</span> <span class=s2>&#34;entity.get_attrs&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=c1># ... and more</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><p>This allows existing custom_view implementations to work with the new plugin system without modification.</p><div class=gdoc-page__anchorwrap><h4 id=hook-execution-implementation>Hook Execution Implementation<a data-clipboard-text=https://dmm-com.github.io/pagoda/advanced/plugin_system/#hook-execution-implementation class="gdoc-page__anchor gdoc-page__anchor--right clip" aria-label="Anchor Hook Execution Implementation" href=#hook-execution-implementation><svg class="icon link"><use xlink:href="#link"/></svg></a></h4></div><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=c1># Pagoda Hook Manager implementation</span>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>HookManager</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>execute_hook</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>hook_name</span><span class=p>,</span> <span class=o>*</span><span class=n>args</span><span class=p>,</span> <span class=n>entity_name</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span> <span class=o>**</span><span class=n>kwargs</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=c1># 1. Normalize hook name (handle aliases)</span>
</span></span><span class=line><span class=cl>        <span class=c1># 2. Get all registered handlers</span>
</span></span><span class=line><span class=cl>        <span class=c1># 3. Filter by entity if specified</span>
</span></span><span class=line><span class=cl>        <span class=c1># 4. Sort by priority</span>
</span></span><span class=line><span class=cl>        <span class=c1># 5. Execute each handler with error isolation</span>
</span></span><span class=line><span class=cl>        <span class=c1># 6. Collect and return results</span>
</span></span></code></pre></div><p>Key features:</p><ul><li><strong>Error Isolation</strong>: One plugin&rsquo;s failure doesn&rsquo;t affect others</li><li><strong>Priority Ordering</strong>: Handlers execute in priority order</li><li><strong>Entity Filtering</strong>: Entity-specific hooks run only for matching entities</li><li><strong>Flexible Signatures</strong>: Different hook types have different signatures</li></ul><div class=gdoc-page__anchorwrap><h3 id=model-injection-implementation>Model Injection Implementation<a data-clipboard-text=https://dmm-com.github.io/pagoda/advanced/plugin_system/#model-injection-implementation class="gdoc-page__anchor gdoc-page__anchor--right clip" aria-label="Anchor Model Injection Implementation" href=#model-injection-implementation><svg class="icon link"><use xlink:href="#link"/></svg></a></h3></div><p>The host application (Pagoda) injects concrete model implementations into the plugin SDK during initialization. This allows plugins to access Pagoda&rsquo;s data models without creating direct dependencies.</p><div class=gdoc-page__anchorwrap><h4 id=injected-models>Injected Models<a data-clipboard-text=https://dmm-com.github.io/pagoda/advanced/plugin_system/#injected-models class="gdoc-page__anchor gdoc-page__anchor--right clip" aria-label="Anchor Injected Models" href=#injected-models><svg class="icon link"><use xlink:href="#link"/></svg></a></h4></div><p>The following six models are automatically injected:</p><ol><li><strong>Entity</strong> - Schema definition (from <code>entity.models.Entity</code>)</li><li><strong>EntityAttr</strong> - Entity attribute definition (from <code>entity.models.EntityAttr</code>)</li><li><strong>Entry</strong> - Data entry (from <code>entry.models.Entry</code>)</li><li><strong>Attribute</strong> - Entry attribute (from <code>entry.models.Attribute</code>)</li><li><strong>AttributeValue</strong> - Attribute value (from <code>entry.models.AttributeValue</code>)</li><li><strong>User</strong> - User account (from <code>user.models.User</code>)</li></ol><div class=gdoc-page__anchorwrap><h4 id=injection-process>Injection Process<a data-clipboard-text=https://dmm-com.github.io/pagoda/advanced/plugin_system/#injection-process class="gdoc-page__anchor gdoc-page__anchor--right clip" aria-label="Anchor Injection Process" href=#injection-process><svg class="icon link"><use xlink:href="#link"/></svg></a></h4></div><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=c1># airone/plugins/integration.py</span>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>PluginIntegration</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>_inject_models</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;&#34;&#34;Inject real models into the plugin SDK&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>        <span class=k>try</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=c1># Import real models from Pagoda</span>
</span></span><span class=line><span class=cl>            <span class=kn>import</span> <span class=nn>pagoda_plugin_sdk.models</span> <span class=k>as</span> <span class=nn>sdk_models</span>
</span></span><span class=line><span class=cl>            <span class=kn>from</span> <span class=nn>entity.models</span> <span class=kn>import</span> <span class=n>Entity</span><span class=p>,</span> <span class=n>EntityAttr</span>
</span></span><span class=line><span class=cl>            <span class=kn>from</span> <span class=nn>entry.models</span> <span class=kn>import</span> <span class=n>Entry</span><span class=p>,</span> <span class=n>Attribute</span><span class=p>,</span> <span class=n>AttributeValue</span>
</span></span><span class=line><span class=cl>            <span class=kn>from</span> <span class=nn>user.models</span> <span class=kn>import</span> <span class=n>User</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>            <span class=c1># Inject real models into SDK namespace</span>
</span></span><span class=line><span class=cl>            <span class=n>sdk_models</span><span class=o>.</span><span class=n>Entity</span> <span class=o>=</span> <span class=n>Entity</span>
</span></span><span class=line><span class=cl>            <span class=n>sdk_models</span><span class=o>.</span><span class=n>Entry</span> <span class=o>=</span> <span class=n>Entry</span>
</span></span><span class=line><span class=cl>            <span class=n>sdk_models</span><span class=o>.</span><span class=n>User</span> <span class=o>=</span> <span class=n>User</span>
</span></span><span class=line><span class=cl>            <span class=n>sdk_models</span><span class=o>.</span><span class=n>AttributeValue</span> <span class=o>=</span> <span class=n>AttributeValue</span>
</span></span><span class=line><span class=cl>            <span class=n>sdk_models</span><span class=o>.</span><span class=n>EntityAttr</span> <span class=o>=</span> <span class=n>EntityAttr</span>
</span></span><span class=line><span class=cl>            <span class=n>sdk_models</span><span class=o>.</span><span class=n>Attribute</span> <span class=o>=</span> <span class=n>Attribute</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>            <span class=n>logger</span><span class=o>.</span><span class=n>info</span><span class=p>(</span><span class=s2>&#34;Successfully injected models into plugin SDK&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=k>except</span> <span class=ne>ImportError</span> <span class=k>as</span> <span class=n>e</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=n>logger</span><span class=o>.</span><span class=n>error</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;Failed to inject models into plugin SDK: </span><span class=si>{</span><span class=n>e</span><span class=si>}</span><span class=s2>&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>            <span class=k>raise</span>
</span></span></code></pre></div><div class=gdoc-page__anchorwrap><h4 id=initialization-sequence>Initialization Sequence<a data-clipboard-text=https://dmm-com.github.io/pagoda/advanced/plugin_system/#initialization-sequence class="gdoc-page__anchor gdoc-page__anchor--right clip" aria-label="Anchor Initialization Sequence" href=#initialization-sequence><svg class="icon link"><use xlink:href="#link"/></svg></a></h4></div><pre tabindex=0><code>1. Pagoda Application Startup
   └─ settings_common.py loads ENABLED_PLUGINS from environment

2. Plugin System Initialization
   ├─ PluginIntegration.initialize() is called
   ├─ discover_plugins() finds and registers plugins
   └─ _inject_models() injects real models into SDK

3. Plugin Access
   └─ Plugins can now safely import and use models
</code></pre><div class=gdoc-page__anchorwrap><h4 id=using-injected-models-in-plugins>Using Injected Models in Plugins<a data-clipboard-text=https://dmm-com.github.io/pagoda/advanced/plugin_system/#using-injected-models-in-plugins class="gdoc-page__anchor gdoc-page__anchor--right clip" aria-label="Anchor Using Injected Models in Plugins" href=#using-injected-models-in-plugins><svg class="icon link"><use xlink:href="#link"/></svg></a></h4></div><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=c1># In plugin code</span>
</span></span><span class=line><span class=cl><span class=kn>from</span> <span class=nn>pagoda_plugin_sdk.models</span> <span class=kn>import</span> <span class=n>Entity</span><span class=p>,</span> <span class=n>Entry</span><span class=p>,</span> <span class=n>User</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>MyPlugin</span><span class=p>(</span><span class=n>Plugin</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=nd>@entry_hook</span><span class=p>(</span><span class=s2>&#34;after_create&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>handle_entry_create</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>entity_name</span><span class=p>,</span> <span class=n>user</span><span class=p>,</span> <span class=n>entry</span><span class=p>,</span> <span class=o>**</span><span class=n>kwargs</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=c1># Direct access to model methods</span>
</span></span><span class=line><span class=cl>        <span class=n>entity</span> <span class=o>=</span> <span class=n>entry</span><span class=o>.</span><span class=n>schema</span>  <span class=c1># Access related Entity</span>
</span></span><span class=line><span class=cl>        <span class=n>creator</span> <span class=o>=</span> <span class=n>entry</span><span class=o>.</span><span class=n>created_user</span>  <span class=c1># Access related User</span>
</span></span><span class=line><span class=cl>        <span class=n>attrs</span> <span class=o>=</span> <span class=n>entry</span><span class=o>.</span><span class=n>get_attrs</span><span class=p>()</span>  <span class=c1># Call Entry methods</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=c1># Query operations</span>
</span></span><span class=line><span class=cl>        <span class=n>all_entries</span> <span class=o>=</span> <span class=n>Entry</span><span class=o>.</span><span class=n>objects</span><span class=o>.</span><span class=n>filter</span><span class=p>(</span><span class=n>schema</span><span class=o>=</span><span class=n>entity</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=n>active_users</span> <span class=o>=</span> <span class=n>User</span><span class=o>.</span><span class=n>objects</span><span class=o>.</span><span class=n>filter</span><span class=p>(</span><span class=n>is_active</span><span class=o>=</span><span class=kc>True</span><span class=p>)</span>
</span></span></code></pre></div><div class=gdoc-page__anchorwrap><h4 id=type-safety-with-protocols>Type Safety with Protocols<a data-clipboard-text=https://dmm-com.github.io/pagoda/advanced/plugin_system/#type-safety-with-protocols class="gdoc-page__anchor gdoc-page__anchor--right clip" aria-label="Anchor Type Safety with Protocols" href=#type-safety-with-protocols><svg class="icon link"><use xlink:href="#link"/></svg></a></h4></div><p>The SDK provides Protocol definitions for type checking without creating implementation dependencies:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=kn>from</span> <span class=nn>pagoda_plugin_sdk.protocols</span> <span class=kn>import</span> <span class=p>(</span>
</span></span><span class=line><span class=cl>    <span class=n>EntityProtocol</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=n>EntryProtocol</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=n>UserProtocol</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=n>EntityAttrProtocol</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=n>AttributeProtocol</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=n>AttributeValueProtocol</span><span class=p>,</span>
</span></span><span class=line><span class=cl><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>def</span> <span class=nf>process_entry</span><span class=p>(</span><span class=n>entry</span><span class=p>:</span> <span class=n>EntryProtocol</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=nb>dict</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;&#34;&#34;Type-safe entry processing with IDE support&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;id&#34;</span><span class=p>:</span> <span class=n>entry</span><span class=o>.</span><span class=n>id</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;name&#34;</span><span class=p>:</span> <span class=n>entry</span><span class=o>.</span><span class=n>name</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;schema&#34;</span><span class=p>:</span> <span class=n>entry</span><span class=o>.</span><span class=n>schema</span><span class=o>.</span><span class=n>name</span><span class=p>,</span>  <span class=c1># Full IntelliSense support</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span></code></pre></div><div class=gdoc-page__anchorwrap><h4 id=checking-model-availability>Checking Model Availability<a data-clipboard-text=https://dmm-com.github.io/pagoda/advanced/plugin_system/#checking-model-availability class="gdoc-page__anchor gdoc-page__anchor--right clip" aria-label="Anchor Checking Model Availability" href=#checking-model-availability><svg class="icon link"><use xlink:href="#link"/></svg></a></h4></div><p>Always check if models are available before using them:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=kn>from</span> <span class=nn>pagoda_plugin_sdk</span> <span class=kn>import</span> <span class=n>models</span>
</span></span><span class=line><span class=cl><span class=kn>from</span> <span class=nn>pagoda_plugin_sdk.models</span> <span class=kn>import</span> <span class=n>Entity</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>def</span> <span class=nf>safe_operation</span><span class=p>():</span>
</span></span><span class=line><span class=cl>    <span class=c1># Check if plugin system is initialized</span>
</span></span><span class=line><span class=cl>    <span class=k>if</span> <span class=ow>not</span> <span class=n>models</span><span class=o>.</span><span class=n>is_initialized</span><span class=p>():</span>
</span></span><span class=line><span class=cl>        <span class=k>raise</span> <span class=ne>RuntimeError</span><span class=p>(</span><span class=s2>&#34;Plugin system not initialized&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=c1># Check specific model</span>
</span></span><span class=line><span class=cl>    <span class=k>if</span> <span class=n>Entity</span> <span class=ow>is</span> <span class=kc>None</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=k>raise</span> <span class=ne>RuntimeError</span><span class=p>(</span><span class=s2>&#34;Entity model not available&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=c1># Safe to proceed</span>
</span></span><span class=line><span class=cl>    <span class=n>entities</span> <span class=o>=</span> <span class=n>Entity</span><span class=o>.</span><span class=n>objects</span><span class=o>.</span><span class=n>all</span><span class=p>()</span>
</span></span></code></pre></div><p>This injection mechanism ensures that plugins remain independent of Pagoda&rsquo;s implementation while still having full access to its data models.</p><div class=gdoc-page__anchorwrap><h2 id=best-practices-1>Best Practices<a data-clipboard-text=https://dmm-com.github.io/pagoda/advanced/plugin_system/#best-practices-1 class="gdoc-page__anchor gdoc-page__anchor--right clip" aria-label="Anchor Best Practices" href=#best-practices-1><svg class="icon link"><use xlink:href="#link"/></svg></a></h2></div><div class=gdoc-page__anchorwrap><h3 id=1-plugin-development>1. Plugin Development<a data-clipboard-text=https://dmm-com.github.io/pagoda/advanced/plugin_system/#1-plugin-development class="gdoc-page__anchor gdoc-page__anchor--right clip" aria-label="Anchor 1. Plugin Development" href=#1-plugin-development><svg class="icon link"><use xlink:href="#link"/></svg></a></h3></div><ul><li><strong>Version Pinning</strong>: Ensure compatibility with <code>pagoda-core>=1.0.0,&lt;2.0.0</code></li><li><strong>Testing</strong>: Implement both unit tests and Pagoda integration tests</li><li><strong>Documentation</strong>: Include README and API specifications</li><li><strong>Error Handling</strong>: Implement proper exception handling in hooks and APIs</li><li><strong>Security</strong>: Implement proper authentication and authorization</li></ul><div class=gdoc-page__anchorwrap><h3 id=2-distribution>2. Distribution<a data-clipboard-text=https://dmm-com.github.io/pagoda/advanced/plugin_system/#2-distribution class="gdoc-page__anchor gdoc-page__anchor--right clip" aria-label="Anchor 2. Distribution" href=#2-distribution><svg class="icon link"><use xlink:href="#link"/></svg></a></h3></div><ul><li><strong>Semantic Versioning</strong>: Use appropriate <code>major.minor.patch</code> versioning</li><li><strong>Changelog</strong>: Maintain release notes and change history</li><li><strong>Compatibility</strong>: Clearly specify supported Pagoda/pagoda-plugin-sdk versions</li><li><strong>Dependencies</strong>: Keep dependencies to a minimum</li></ul><div class=gdoc-page__anchorwrap><h3 id=3-production-deployment>3. Production Deployment<a data-clipboard-text=https://dmm-com.github.io/pagoda/advanced/plugin_system/#3-production-deployment class="gdoc-page__anchor gdoc-page__anchor--right clip" aria-label="Anchor 3. Production Deployment" href=#3-production-deployment><svg class="icon link"><use xlink:href="#link"/></svg></a></h3></div><ul><li><strong>Environment Isolation</strong>: Isolate virtual environments per plugin</li><li><strong>Monitoring</strong>: Monitor plugin error logs</li><li><strong>Rollback Strategy</strong>: Prepare procedures for disabling plugins</li><li><strong>Performance</strong>: Evaluate performance impact of hook processing</li></ul><p>This 3-layer architecture realizes a plugin system completely independent from Pagoda. Plugin developers can create safe and reusable plugins depending only on <code>pagoda-plugin-sdk</code>.</p></article><div class="gdoc-page__footer flex flex-wrap justify-between"></div></div></main><footer class=gdoc-footer><div class="container flex flex-wrap"><span class=gdoc-footer__item>Copyright © since 2020, DMM.com LLC. All Rights Reserved.</span></div></footer></div><script defer src=https://dmm-com.github.io/pagoda/js/en.search.min.2f6745c6746daca833f02af894707126692b20181aaa275e4d6e9f7bb00ab7af.js></script>
<script defer src=https://dmm-com.github.io/pagoda/js/clipboard.min.js></script>
<script>document.addEventListener("DOMContentLoaded",function(){var t=new ClipboardJS(".clip")})</script></body></html>